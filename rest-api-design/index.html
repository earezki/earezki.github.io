<!DOCTYPE html><html lang="en" data-theme="dark"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>REST API Design: Beyond the Dogma ‚Ä¢ Dev|Journal</title><meta name="description" content="REST is not a protocol. It's not a standard. It's a set of architectural constraints that Roy Fielding described in his dissertation, and most APIs calling‚Ä¶"><meta name="keywords" content="API, REST, Architecture, Backend"><meta name="author" content="El Mehdi Arezki"><meta property="og:type" content="website"><meta property="og:url" content="https://earezki.com/rest-api-design/"><meta property="og:title" content="REST API Design: Beyond the Dogma ‚Ä¢ Dev|Journal"><meta property="og:site_name" content="Dev|Journal"><meta property="og:description" content="REST is not a protocol. It's not a standard. It's a set of architectural constraints that Roy Fielding described in his dissertation, and most APIs calling‚Ä¶"><meta property="og:image" content="https://earezki.com/assets/og-image-default.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://earezki.com/rest-api-design/"><meta name="twitter:title" content="REST API Design: Beyond the Dogma ‚Ä¢ Dev|Journal"><meta name="twitter:description" content="REST is not a protocol. It's not a standard. It's a set of architectural constraints that Roy Fielding described in his dissertation, and most APIs calling‚Ä¶"><meta name="twitter:image" content="https://earezki.com/assets/og-image-default.jpg"><meta name="twitter:creator" content="@earezki"><link rel="canonical" href="https://earezki.com/rest-api-design/"><link rel="icon" type="image/png" href="/assets/favicon_48_d.webp"><link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml"><link rel="dns-prefetch" href="https://cloud.umami.is"><script defer src="https://cloud.umami.is/script.js" data-website-id="4a26531d-1053-4f79-97a6-06a1366aff91"></script><script>
      (function() {
        const theme = localStorage.getItem('theme');
        if (theme) document.documentElement.setAttribute('data-theme', theme);
      })();
    </script><script>
!function(){const o=window.location.pathname;if("/"===o)return;if(/\.\w+$/.test(o))return;const n=o.toLowerCase(),i=n!==o,t=!o.endsWith("/");if(i||t){const o=n+(t?"/":""),i=window.location.origin+o+window.location.search+window.location.hash;window.location.replace(i)}}();
</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"REST API Design: Beyond the Dogma","description":"REST is not a protocol. It's not a standard. It's a set of architectural constraints that Roy Fielding described in his dissertation, and most APIs calling‚Ä¶","image":"https://earezki.com/assets/og-image-default.jpg","datePublished":"2025-12-22T00:00:00.000Z","dateModified":"2025-12-22T00:00:00.000Z","author":{"@type":"Person","name":"El Mehdi Arezki","url":"https://earezki.com/about","jobTitle":"Lead Software Engineer","sameAs":["https://github.com/earezki","https://www.linkedin.com/in/mehdi-arezki"]},"publisher":{"@type":"Organization","name":"Dev|Journal","url":"https://earezki.com","logo":{"@type":"ImageObject","url":"https://earezki.com/assets/logo.png"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://earezki.com/rest-api-design/"}}</script><link rel="stylesheet" href="/_astro/_slug_.B_eXuGWa.css">
<link rel="stylesheet" href="/_astro/_slug_.CFj9bTVJ.css">
<link rel="stylesheet" href="/_astro/_slug_.BuIxISHP.css"></head> <body> <div id="readingProgress" role="progressbar" aria-label="Reading progress" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="position:fixed;left:0;top:0;height:3px;background:linear-gradient(90deg,#2563eb,#9333ea);width:0;z-index:999;transition:width .15s ease;"></div> <script type="module">function c(){const t=document.getElementById("readingProgress");if(!t)return;const o=()=>{const e=document.documentElement,r=e.scrollTop||document.body.scrollTop,s=e.scrollHeight-e.clientHeight,n=s>0?r/s*100:0;t.style.width=`${n}%`,t.setAttribute("aria-valuenow",n.toFixed(0))};document.addEventListener("scroll",o,{passive:!0}),o()}c();</script> <header class="site-header container"> <div class="logo-wrap"> <a class="logo" href="/" aria-label="Dev|Journal Home">
Dev|Journal
</a> </div> <!-- Search Box in Header --> <div class="header-search" data-search-api-url="https://api.earezki.com/blog/api/q" data-search-timeout="2000"> <div class="search-box" id="search-box"> <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon" aria-hidden="true"> <circle cx="11" cy="11" r="8"></circle> <path d="m21 21-4.35-4.35"></path> </svg> <input type="text" id="search-input" placeholder="Search ..." class="search-input" autocomplete="off" aria-label="Search articles" minlength="3"> <button id="clear-search" class="clear-button" style="display: none;" aria-label="Clear search"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <line x1="18" y1="6" x2="6" y2="18"></line> <line x1="6" y1="6" x2="18" y2="18"></line> </svg> </button> </div> <div id="search-results" class="search-results" role="status" aria-live="polite"></div> </div> <script type="module" src="/_astro/SearchBox.astro_astro_type_script_index_0_lang.BNnBPVSN.js"></script> <nav class="main-nav" aria-label="Main navigation"> <a href="/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" style="vertical-align: -2px; margin-right: 4px;"> <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path> <polyline points="9 22 9 12 15 12 15 22"></polyline> </svg>
Home
</a> <a href="/ai-news/" class="ai-news-link ai-gradient-nav"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" style="vertical-align: -2px; margin-right: 4px;"> <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h-9.5a.5.5 0 0 0-.5.5.5.5 0 0 1-1 0 .5.5 0 0 0-.5-.5H1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"></path> <path d="M7 15v4a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-4"></path> </svg>
AI News
</a> <a href="/ai-financial-news/" class="ai-financial-link ai-gradient-nav"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" style="vertical-align: -2px; margin-right: 4px;"> <line x1="12" y1="1" x2="12" y2="23"></line> <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path> </svg>
AI Financial
</a> <a href="/about/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" style="vertical-align: -2px; margin-right: 4px;"> <circle cx="12" cy="12" r="10"></circle> <path d="M12 16v-4"></path> <path d="M12 8h.01"></path> </svg>
About
</a> <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode"> <span class="theme-icon" aria-hidden="true">‚òæ</span> </button> </nav> </header> <!-- Main Content --> <main class="container content-area">  <nav class="breadcrumbs" aria-label="Breadcrumb" data-astro-cid-ilhxcym7> <ol data-astro-cid-ilhxcym7> <li data-astro-cid-ilhxcym7>  <a href="/" data-astro-cid-ilhxcym7>Home</a> <span class="separator" aria-hidden="true" data-astro-cid-ilhxcym7>/</span>  </li><li data-astro-cid-ilhxcym7> <span class="current" aria-current="page" data-astro-cid-ilhxcym7>REST API Design: Beyond the Dogma</span> </li>  </ol> </nav>  <div class="post-layout" data-astro-cid-yvbahnfj> <aside class="sidebar-left" data-astro-cid-yvbahnfj> <nav class="toc" aria-label="Table of Contents" data-astro-cid-xvrfupwn> <div class="toc-title" data-astro-cid-xvrfupwn>On this page</div> <ul data-astro-cid-xvrfupwn> <li class="d-2" data-astro-cid-xvrfupwn> <a href="#urls-are-interfaces" data-astro-cid-xvrfupwn> URLs Are Interfaces </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#http-verbs-use-them-or-lose-credibility" data-astro-cid-xvrfupwn> HTTP Verbs: Use Them or Lose Credibility </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#status-codes-matter" data-astro-cid-xvrfupwn> Status Codes Matter </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#error-design-is-where-you-show-your-empathy" data-astro-cid-xvrfupwn> Error Design Is Where You Show Your Empathy </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#pagination-is-non-negotiable" data-astro-cid-xvrfupwn> Pagination Is Non-Negotiable </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#filtering-sorting-and-searching" data-astro-cid-xvrfupwn> Filtering, Sorting, and Searching </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#versioning" data-astro-cid-xvrfupwn> Versioning: </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#authentication" data-astro-cid-xvrfupwn> Authentication: </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#hateoas-the-unrealized-dream" data-astro-cid-xvrfupwn> HATEOAS: The Unrealized Dream </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#documentation-is-part-of-the-api" data-astro-cid-xvrfupwn> Documentation Is Part of the API </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#what-you-send-back-matters" data-astro-cid-xvrfupwn> What You Send Back Matters </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#idempotency" data-astro-cid-xvrfupwn> Idempotency: </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#the-things-nobody-talks-about" data-astro-cid-xvrfupwn> The Things Nobody Talks About </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#when-to-break-the-rules" data-astro-cid-xvrfupwn> When to Break the Rules </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#what-matters-more-than-rest" data-astro-cid-xvrfupwn> What Matters More Than REST </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#the-real-constraints" data-astro-cid-xvrfupwn> The Real Constraints </a> </li><li class="d-2" data-astro-cid-xvrfupwn> <a href="#build-apis-youd-want-to-use" data-astro-cid-xvrfupwn> Build APIs You&#39;d Want to Use </a> </li> </ul> </nav>  </aside> <article class="post" data-astro-cid-yvbahnfj> <header class="post-header" data-astro-cid-yvbahnfj> <h1 data-astro-cid-yvbahnfj>REST API Design: Beyond the Dogma</h1> <div class="meta" data-astro-cid-yvbahnfj> <time datetime="2025-12-22T00:00:00.000Z" data-astro-cid-yvbahnfj>Mon Dec 22 2025</time> <span data-astro-cid-yvbahnfj>‚Ä¢ 10 min read</span> </div> <div class="tag-row" data-astro-cid-yvbahnfj><a class="post-tag  " href="/tags/api/" data-astro-cid-yvbahnfj>API</a><a class="post-tag  " href="/tags/rest/" data-astro-cid-yvbahnfj>REST</a><a class="post-tag  " href="/tags/architecture/" data-astro-cid-yvbahnfj>Architecture</a><a class="post-tag  " href="/tags/backend/" data-astro-cid-yvbahnfj>Backend</a></div> </header>     <div class="post-body prose" data-astro-cid-yvbahnfj> <p>REST is not a protocol. It‚Äôs not a standard. It‚Äôs a set of architectural constraints that Roy Fielding described in his dissertation, and most APIs calling themselves RESTful violate half of them. That‚Äôs fine. You‚Äôre not writing an academic paper. You‚Äôre building something people need to use.</p>
<p>The real question isn‚Äôt ‚Äúis this truly REST?‚Äù It‚Äôs ‚Äúcan another developer figure out how to use this in five minutes, and will they curse your name when requirements change?‚Äù</p>
<h2 id="urls-are-interfaces">URLs Are Interfaces</h2>
<p>Your URL structure is a promise. Change it and you break that promise. Design URLs like you‚Äôre carving them in stone because once you ship them, they might as well be.</p>
<p>Start with resources, not actions. Resources are nouns. If your URL has a verb in it, you‚Äôre probably doing it wrong.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">Bad:  POST /api/createUser
Good: POST /api/users
</code></pre>
<p>The exception: actions that don‚Äôt map cleanly to CRUD. Sometimes you need <code>/api/users/123/activate</code> or <code>/api/orders/456/cancel</code>. That‚Äôs reality. The purists will tell you to model these as state changes on a resource. They‚Äôre not wrong, but they‚Äôre also not paying your bills. Do what makes sense for your team.</p>
<p>Nesting is seductive. It feels organized. But <code>GET /users/123/posts/456/comments/789/likes</code> is a maintenance nightmare. You‚Äôve encoded a rigid hierarchy that will break the moment your data model evolves. Flat is better than nested. If you need relationships, use query parameters or separate endpoints.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">Better: GET /comments/789
Best:   GET /comments/789?include=post,user,likes
</code></pre>
<p>Plurals for collections, always. <code>/users</code> not <code>/user</code>. Yes, even when English grammar makes it weird (<code>/people</code> not <code>/person</code>). Consistency beats correctness.</p>
<h2 id="http-verbs-use-them-or-lose-credibility">HTTP Verbs: Use Them or Lose Credibility</h2>
<p>GET is for reading. POST is for creating. PUT is for replacing. PATCH is for updating. DELETE is for deleting. This isn‚Äôt controversial. Yet somehow half the APIs I‚Äôve integrated with use POST for everything because ‚Äúit‚Äôs simpler.‚Äù</p>
<p>It‚Äôs not simpler. It‚Äôs lazy. And it makes caching impossible, breaks browser behavior, and confuses every developer who has to read your code.</p>
<p>GET must be safe and idempotent. That means no side effects. If your GET endpoint modifies state, you‚Äôve violated the social contract of the web. Proxies will cache it. Browsers will prefetch it. Bots will crawl it. Your database will suffer.</p>
<p>PUT versus PATCH: PUT replaces the entire resource. Send incomplete data to PUT and you‚Äôre saying ‚Äúyes, I want all those missing fields to be null.‚Äù PATCH is for partial updates. Use it.</p>
<p>DELETE should be idempotent. Deleting a resource that doesn‚Äôt exist? Return 204 or 404, but don‚Äôt crash. The client asked for the resource to be gone. It‚Äôs gone. Mission accomplished.</p>
<h2 id="status-codes-matter">Status Codes Matter</h2>
<p>You have dozens of status codes. Use maybe seven of them well.</p>
<ul>
<li><strong>200 OK</strong>: Request succeeded. You‚Äôre returning data.</li>
<li><strong>201 Created</strong>: Resource created. Include a <code>Location</code> header pointing to it.</li>
<li><strong>204 No Content</strong>: Request succeeded. You‚Äôre not returning data.</li>
<li><strong>400 Bad Request</strong>: Client screwed up. Tell them why.</li>
<li><strong>401 Unauthorized</strong>: No credentials or invalid credentials.</li>
<li><strong>403 Forbidden</strong>: Valid credentials, insufficient permissions.</li>
<li><strong>404 Not Found</strong>: Resource doesn‚Äôt exist.</li>
<li><strong>500 Internal Server Error</strong>: You screwed up. Log it, fix it, apologize.</li>
</ul>
<p>That‚Äôs it. You don‚Äôt need 418 I‚Äôm a teapot. You probably don‚Äôt need 402 Payment Required. And if you‚Äôre using 200 for errors because ‚Äúthe HTTP request succeeded,‚Äù we need to have a different conversation.</p>
<p>Use 422 Unprocessable Entity for validation errors if you want to be pedantic about separating syntactic errors (400) from semantic ones (422). Most clients won‚Äôt care. I don‚Äôt care. But be consistent.</p>
<h2 id="error-design-is-where-you-show-your-empathy">Error Design Is Where You Show Your Empathy</h2>
<p>Errors are not edge cases. They‚Äôre the normal case. Networks fail. Users mistype. Services go down. Your error responses should be as carefully designed as your success responses.</p>
<p>Return machine-readable error codes. HTTP status codes aren‚Äôt enough. You need application-level codes.</p>
<pre class="language-json" data-language="json"><code is:raw="" class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"error"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"INVALID_EMAIL"</span><span class="token punctuation">,</span>
    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Email address is not valid"</span><span class="token punctuation">,</span>
    <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"email"</span><span class="token punctuation">,</span>
    <span class="token property">"documentation"</span><span class="token operator">:</span> <span class="token string">"https://api.example.com/docs/errors/INVALID_EMAIL"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Don‚Äôt leak implementation details. Stack traces in production are a security risk and useless to API consumers. Log them server-side. Return something actionable.</p>
<p>Don‚Äôt use error codes like ‚ÄúERROR_1234‚Äù. Use codes that mean something: <code>RESOURCE_NOT_FOUND</code>, <code>DUPLICATE_EMAIL</code>, <code>RATE_LIMIT_EXCEEDED</code>. Your clients will thank you.</p>
<p>Multiple validation errors? Return them all at once. Don‚Äôt make me fix one field, resubmit, and discover five more problems. That‚Äôs sadism.</p>
<pre class="language-json" data-language="json"><code is:raw="" class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"error"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"VALIDATION_FAILED"</span><span class="token punctuation">,</span>
    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Request validation failed"</span><span class="token punctuation">,</span>
    <span class="token property">"details"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"email"</span><span class="token punctuation">,</span>
        <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"INVALID_FORMAT"</span><span class="token punctuation">,</span>
        <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Email address is not valid"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span><span class="token punctuation">,</span>
        <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"OUT_OF_RANGE"</span><span class="token punctuation">,</span>
        <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Age must be between 18 and 120"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="pagination-is-non-negotiable">Pagination Is Non-Negotiable</h2>
<p>Never return unbounded collections. Ever. Your database will grow. Your response times will degrade. Your users will complain.</p>
<p>Offset-based pagination is simple but dangerous at scale. Page 500 of a million-record table is slow. Use it anyway if your data is small and you need simplicity.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">GET /users?page=2&#x26;per_page=50
</code></pre>
<p>Cursor-based pagination is better for large datasets. Less intuitive, but it performs consistently regardless of position.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">GET /users?cursor=eyJpZCI6MTIzfQ&#x26;limit=50
</code></pre>
<p>Return metadata. Tell clients what they‚Äôre looking at.</p>
<pre class="language-json" data-language="json"><code is:raw="" class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">[</span>...<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"pagination"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"total"</span><span class="token operator">:</span> <span class="token number">10543</span><span class="token punctuation">,</span>
    <span class="token property">"page"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"per_page"</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    <span class="token property">"total_pages"</span><span class="token operator">:</span> <span class="token number">211</span><span class="token punctuation">,</span>
    <span class="token property">"next_page"</span><span class="token operator">:</span> <span class="token string">"/users?page=3&#x26;per_page=50"</span><span class="token punctuation">,</span>
    <span class="token property">"prev_page"</span><span class="token operator">:</span> <span class="token string">"/users?page=1&#x26;per_page=50"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>For cursor-based, return <code>next_cursor</code> and <code>prev_cursor</code>. Don‚Äôt make clients reverse-engineer your cursor format.</p>
<h2 id="filtering-sorting-and-searching">Filtering, Sorting, and Searching</h2>
<p>Query parameters for filtering. Not path parameters, not POST bodies. Query parameters.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">GET /users?role=admin&#x26;status=active&#x26;created_after=2024-01-01
</code></pre>
<p>Be explicit about operators. <code>?age=25</code> is ambiguous. Is that exact match? Minimum? Use clear names.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">GET /products?price_min=10&#x26;price_max=100&#x26;category=electronics
</code></pre>
<p>Sorting: use a <code>sort</code> parameter. Support multiple fields. Use <code>-</code> for descending order.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">GET /articles?sort=-published_at,title
</code></pre>
<p>Full-text search doesn‚Äôt belong in query parameters when it gets complex. Use POST with a search endpoint.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">POST /articles/search
{
  "query": "REST API design",
  "filters": {
    "tags": ["api", "architecture"],
    "published_after": "2024-01-01"
  },
  "sort": ["-relevance", "-published_at"],
  "page": 1,
  "per_page": 20
}
</code></pre>
<p>Yes, POST for reads feels wrong. Get over it. GET requests with complex JSON bodies are worse. Some proxies strip them. Some clients can‚Äôt send them easily. POST at least works everywhere.</p>
<h2 id="versioning">Versioning:</h2>
<p>You will change your API. Plan for it.</p>
<p>URL versioning is ugly but honest. <code>/v1/users</code> and <code>/v2/users</code> coexist. It‚Äôs explicit. It‚Äôs cache-friendly. It‚Äôs easy to route.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">GET /v1/users/123
GET /v2/users/123
</code></pre>
<p>Header versioning is cleaner but hidden. Clients need to remember to set <code>Accept: application/vnd.api+json; version=2</code>. Debugging is harder. Caching is trickier.</p>
<p>Neither is wrong. Both work. Pick one and stick with it.</p>
<p>Don‚Äôt version for every tiny change. Minor additions (new optional fields, new endpoints) shouldn‚Äôt bump versions. Breaking changes (removing fields, changing behavior, renaming things) should.</p>
<p>Support old versions longer than you want to. Deprecate loudly. Give clients months to migrate, not weeks. Your version 1 will outlive your tenure at the company.</p>
<h2 id="authentication">Authentication:</h2>
<p>Use established standards. OAuth 2.0 for user authentication. API keys for service-to-service. JWT for stateless auth.</p>
<p>Don‚Äôt invent your own signature scheme. Don‚Äôt use Basic Auth over HTTP. Don‚Äôt store passwords in plain text. These aren‚Äôt opinions. These are baseline competence.</p>
<p>API keys go in headers, not query parameters. Query parameters get logged everywhere. Logs leak.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">Authorization: Bearer YOUR_API_KEY
</code></pre>
<p>Rate limit by API key or user. Return current limits in headers.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 432
X-RateLimit-Reset: 1640000000
</code></pre>
<p>When rate limited, return 429 Too Many Requests and tell them when to retry.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">Retry-After: 60
</code></pre>
<h2 id="hateoas-the-unrealized-dream">HATEOAS: The Unrealized Dream</h2>
<p>Hypermedia as the Engine of Application State. It‚Äôs a core REST principle. Almost nobody implements it. You probably shouldn‚Äôt either.</p>
<p>The idea: responses include links to related resources and available actions. Clients follow links instead of constructing URLs.</p>
<pre class="language-json" data-language="json"><code is:raw="" class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span>
  <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"self"</span><span class="token operator">:</span> <span class="token string">"/users/123"</span><span class="token punctuation">,</span>
    <span class="token property">"posts"</span><span class="token operator">:</span> <span class="token string">"/users/123/posts"</span><span class="token punctuation">,</span>
    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"/users/123/avatar"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>It‚Äôs elegant in theory. In practice, it adds overhead, complicates responses, and most client developers ignore it anyway. They hardcode URLs. They read documentation, not responses.</p>
<p>Use HATEOAS if you‚Äôre building a genuinely hypermedia-driven application. Otherwise, write good documentation and move on.</p>
<h2 id="documentation-is-part-of-the-api">Documentation Is Part of the API</h2>
<p>Your API is only as good as its documentation. Undocumented endpoints might as well not exist.</p>
<p>OpenAPI is the standard. Generate it from code or write it by hand, but have it. Interactive documentation is table stakes now.</p>
<p>Document error responses. Document rate limits. Document authentication. Document pagination. Document every query parameter and what it does.</p>
<p>Show examples. Real ones. Not ‚Äústring‚Äù and ‚Äúinteger‚Äù in a schema, but actual requests and responses.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">POST /users
Content-Type: application/json

{
  "email": "jane@example.com",
  "name": "Jane Smith",
  "role": "admin"
}

Response: 201 Created
Location: /users/456

{
  "id": 456,
  "email": "jane@example.com",
  "name": "Jane Smith",
  "role": "admin",
  "created_at": "2024-12-22T10:30:00Z"
}
</code></pre>
<p>Keep documentation up to date. Out-of-date documentation is worse than no documentation because it‚Äôs actively misleading.</p>
<h2 id="what-you-send-back-matters">What You Send Back Matters</h2>
<p>JSON is the default. Don‚Äôt fight it. XML lost. If you need XML for legacy reasons, support both, but make JSON the default.</p>
<p>Use camelCase or snake_case consistently. Not both. JavaScript developers expect camelCase. Python and Ruby developers expect snake_case. Pick your audience.</p>
<p>ISO 8601 for dates. Always. UTC preferred. Include timezone info if you must use local time.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">"created_at": "2024-12-22T10:30:00Z"
</code></pre>
<p>Don‚Äôt stringify numbers. <code>"id": "123"</code> should be <code>"id": 123</code>. JSON supports numbers. Use them.</p>
<p>Omit missing values entirely. Be consistent. Returning <code>""</code> for missing strings and <code>0</code> for missing numbers is confusing.</p>
<p>Envelope or no envelope?</p>
<pre class="language-json" data-language="json"><code is:raw="" class="language-json"><span class="token comment">// Envelope</span>
<span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"John"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"meta"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"timestamp"</span><span class="token operator">:</span> <span class="token string">"2024-12-22T10:30:00Z"</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// No envelope</span>
<span class="token punctuation">{</span> <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"John"</span> <span class="token punctuation">}</span>
</code></pre>
<p>Envelopes let you add metadata without polluting the resource. But they add nesting. I prefer no envelope for simple cases, envelope when you need metadata or are returning errors.</p>
<h2 id="idempotency">Idempotency:</h2>
<p>GET, PUT, and DELETE should be idempotent. Make the same request twice and the result should be the same.</p>
<p>POST is the odd one out. Two identical POST requests might create two resources. That‚Äôs a problem for unreliable networks.</p>
<p>Idempotency keys solve this. Client sends a unique key with each request. Server checks if it‚Äôs seen that key before.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">POST /orders
Idempotency-Key: a1b2c3d4-e5f6-g7h8-i9j0-k1l2m3n4o5p6

{
  "product_id": 789,
  "quantity": 2
}
</code></pre>
<p>If the server has seen that key, it returns the previous response instead of creating a duplicate order. Financial transactions, email sending, any irreversible operation benefits from this.</p>
<p>Stripe and Twilio does this. You should too if you‚Äôre doing anything important.</p>
<h2 id="the-things-nobody-talks-about">The Things Nobody Talks About</h2>
<p><strong>Bulk operations</strong>: <code>/users/bulk</code> endpoints that accept arrays of operations. Faster than N individual requests. Harder to implement. Worth it at scale.</p>
<p><strong>Partial responses</strong>: Let clients specify which fields they want. <code>GET /users/123?fields=id,name,email</code>. Reduces bandwidth. Increases complexity. Useful for mobile clients.</p>
<p><strong>ETags and conditional requests</strong>: Support <code>If-None-Match</code> and <code>If-Modified-Since</code>. Let clients cache effectively. Reduce server load. Barely anyone uses them, but when they do, you look professional.</p>
<p><strong>Webhook alternatives</strong>: Polling is wasteful. Webhooks are finicky. Server-sent events (SSE) or WebSockets might be better if you control both ends.</p>
<p><strong>Request IDs</strong>: Generate a unique ID for every request. Return it in responses. Log it everywhere. When something breaks, clients can give you the request ID and you can trace exactly what happened.</p>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">X-Request-ID: a1b2c3d4-e5f6-g7h8-i9j0-k1l2m3n4o5p6
</code></pre>
<h2 id="when-to-break-the-rules">When to Break the Rules</h2>
<p>Pragmatism beats purity.</p>
<p>Need to download a file? <code>GET /files/123/download</code> is clearer than trying to make it purely resourceful.</p>
<p>Need a health check endpoint? <code>GET /health</code> works. Nobody cares that ‚Äúhealth‚Äù isn‚Äôt a resource.</p>
<p>Need to expose a complex algorithm? <code>POST /recommendations/generate</code> is fine. Not everything is a resource.</p>
<p>Background jobs? <code>POST /jobs</code> to create them, <code>GET /jobs/123</code> to check status. Perfectly RESTful and perfectly practical.</p>
<p>The rules exist to make your API predictable and maintainable. When following a rule makes your API worse, break it. Just do it consistently.</p>
<h2 id="what-matters-more-than-rest">What Matters More Than REST</h2>
<p>Developer experience. Can someone use your API without reading 50 pages of documentation? Can they debug when something breaks? Can they iterate quickly?</p>
<p>Performance. REST doesn‚Äôt guarantee good performance. Careful design does. N+1 queries through your API will kill you. Overfetching will annoy your mobile users. Underfetching forces multiple round trips.</p>
<p>Evolution. Can you add features without breaking existing clients? Can you deprecate gracefully? Can you fix mistakes without a flag day migration?</p>
<p>Monitoring and observability. Can you tell when your API is slow? When it‚Äôs failing? Which endpoints are unused? Which clients are abusing rate limits?</p>
<p>Those things matter more than whether your API is theoretically RESTful.</p>
<h2 id="the-real-constraints">The Real Constraints</h2>
<p>REST was designed for the web. Long-lived client applications. Decentralized deployment. Unknown clients. Those constraints led to specific design choices.</p>
<p>Your API might have different constraints. Internal microservices don‚Äôt need versioning. Single-page apps might prefer GraphQL. Realtime systems might need WebSockets.</p>
<p>REST is a good default because it‚Äôs well-understood and supported everywhere. But it‚Äôs a default, not a requirement.</p>
<h2 id="build-apis-youd-want-to-use">Build APIs You‚Äôd Want to Use</h2>
<p>The best API design advice is simple: build something you wouldn‚Äôt hate to integrate with.</p>
<p>Clear URLs. Sensible status codes. Useful error messages. Good documentation. Consistent patterns. Those things aren‚Äôt REST-specific. They‚Äôre basic respect for whoever has to use what you built.</p>
<p>REST gives you a framework for making those decisions. It‚Äôs not the only framework. It‚Äôs not always the best framework. But it‚Äôs a decent starting point, and most APIs would be better if they at least tried to follow it.</p>
<p>Design your API like you‚Äôre going to maintain it for a decade and document it for someone who will curse your name when you‚Äôre gone. That‚Äôs the real constraint that matters.</p> </div>    <section class="related-posts" data-astro-cid-dpgbfi7r> <h2 data-astro-cid-dpgbfi7r>Related Posts</h2> <div class="related-posts-grid" data-astro-cid-dpgbfi7r> <article class="related-post-card" data-astro-cid-dpgbfi7r> <a href="/rest-response-structure/" class="related-post-link" data-astro-cid-dpgbfi7r> <h3 data-astro-cid-dpgbfi7r>Stop Sending Nulls in Your API Responses</h3> <p class="related-excerpt" data-astro-cid-dpgbfi7r>If you&#39;ve sat through backend architecture reviews, you&#39;ve witnessed The Great Null Debate. Someone cleans up a JSON‚Ä¶</p> <div class="related-meta" data-astro-cid-dpgbfi7r> <time datetime="2025-12-23T00:00:00.000Z" data-astro-cid-dpgbfi7r> Dec 23, 2025 </time> <span data-astro-cid-dpgbfi7r>‚Ä¢</span> <span data-astro-cid-dpgbfi7r>4 min read</span> </div> </a> </article><article class="related-post-card" data-astro-cid-dpgbfi7r> <a href="/hexagonal-architecture-python-fastapi/" class="related-post-link" data-astro-cid-dpgbfi7r> <h3 data-astro-cid-dpgbfi7r>Hexagonal Architecture with FastAPI: Database, Valkey Cache, Messaging</h3> <p class="related-excerpt" data-astro-cid-dpgbfi7r>Hexagonal Architecture for FastAPI Document Systems 1. TL;DR - Hexagonal Architecture (ports &amp; adapters) keeps the‚Ä¶</p> <div class="related-meta" data-astro-cid-dpgbfi7r> <time datetime="2025-12-26T00:00:00.000Z" data-astro-cid-dpgbfi7r> Dec 26, 2025 </time> <span data-astro-cid-dpgbfi7r>‚Ä¢</span> <span data-astro-cid-dpgbfi7r>13 min read</span> </div> </a> </article><article class="related-post-card" data-astro-cid-dpgbfi7r> <a href="/ai-news/2025-12-19-i-built-a-29-mo-alternative-to-800-enterprise-social-listening-tools/" class="related-post-link" data-astro-cid-dpgbfi7r> <h3 data-astro-cid-dpgbfi7r>Grok X Intelligence: A $29/mo Alternative to Enterprise Social Listening</h3> <p class="related-excerpt" data-astro-cid-dpgbfi7r>The Problem with Alternatives Existing enterprise social listening tools are prohibitively expensive, with options like‚Ä¶</p> <div class="related-meta" data-astro-cid-dpgbfi7r> <time datetime="2025-12-19T00:00:00.000Z" data-astro-cid-dpgbfi7r> Dec 19, 2025 </time> <span data-astro-cid-dpgbfi7r>‚Ä¢</span> <span data-astro-cid-dpgbfi7r>1 min read</span> </div> </a> </article><article class="related-post-card" data-astro-cid-dpgbfi7r> <a href="/ai-news/2025-11-25-contract-testing-tm-forum-open-apis-with-pact-postman-stop-breaking-your-bss/" class="related-post-link" data-astro-cid-dpgbfi7r> <h3 data-astro-cid-dpgbfi7r>Contract-Testing TM Forum Open APIs with Pact + Postman: Stop Breaking Your BSS</h3> <p class="related-excerpt" data-astro-cid-dpgbfi7r>Why Open APIs still break (even when you follow the spec) TM Forum Open APIs like TMF620 Product Catalog and TMF622‚Ä¶</p> <div class="related-meta" data-astro-cid-dpgbfi7r> <time datetime="2025-11-25T00:00:00.000Z" data-astro-cid-dpgbfi7r> Nov 25, 2025 </time> <span data-astro-cid-dpgbfi7r>‚Ä¢</span> <span data-astro-cid-dpgbfi7r>2 min read</span> </div> </a> </article> </div> </section>  </article> </div> <div class="back-link" data-astro-cid-yvbahnfj><a href="/" data-astro-cid-yvbahnfj>‚Üê Back to home</a></div>  </main> <!-- Site Footer --> <footer class="site-footer container"> <p>
¬© 2025 AREZKI El Mehdi ‚Ä¢
<a href="https://github.com/earezki">GitHub</a> ‚Ä¢
<a href="/rss.xml">RSS</a> ‚Ä¢
<a href="/tags/">Tags</a> ‚Ä¢
<a href="/sitemap-index.xml">Sitemap</a> ‚Ä¢
<button id="footer-subscribe-btn" class="footer-subscribe-btn" aria-label="Subscribe to newsletter">
üì¨ Subscribe
</button> </p> </footer> <!-- Footer Subscribe Button Handler --> <script type="module">const e=document.getElementById("themeToggle"),o=n=>{if(!e)return;const t=e.querySelector(".theme-icon");t&&(t.textContent=n==="dark"?"‚òÄ":"‚òæ")};if(e){const n=document.documentElement.getAttribute("data-theme")||"dark";o(n),e.addEventListener("click",()=>{const t=document.documentElement,c=t.getAttribute("data-theme")==="dark"?"light":"dark";t.setAttribute("data-theme",c),localStorage.setItem("theme",c),o(c)})}</script> <!-- Theme Toggle --> <script type="module">document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("footer-subscribe-btn");e&&e.addEventListener("click",n=>{n.preventDefault();const t=document.getElementById("subscription-popup");t&&(t.setAttribute("data-state","visible"),document.body.style.overflow="hidden")})});</script> <!-- Article read/unread tracking --> <script>
      (function() {
        const KEY = 'readArticles';
        
        function getRead() {
          try {
            const d = localStorage.getItem(KEY);
            return d ? JSON.parse(d) : [];
          } catch (e) {
            return [];
          }
        }
        
        function markRead(url) {
          try {
            const read = getRead();
            if (!read.includes(url)) {
              read.push(url);
              localStorage.setItem(KEY, JSON.stringify(read));
            }
          } catch (e) {}
        }
        
        function updateCards() {
          const read = new Set(getRead());
          const cards = document.querySelectorAll('.post-card[data-article-url]');
          cards.forEach(function(card) {
            const url = card.getAttribute('data-article-url');
            if (!url) return;
            const isRead = read.has(url);
            card.classList.toggle('read', isRead);
            card.classList.toggle('unread', !isRead);
          });
        }
        
        function markCurrent() {
          if (document.querySelector('.post-body')) {
            markRead(window.location.pathname);
          }
        }
        
        function init() {
          updateCards();
          markCurrent();
        }
        
        function clearRead(url) {
          try {
            const read = new Set(getRead());
            if (read.has(url)) {
              read.delete(url);
              localStorage.setItem(KEY, JSON.stringify(Array.from(read)));
              updateCards();
            }
          } catch (e) {}
        }
        
        window.clearReadArticle = clearRead;
        document.addEventListener('DOMContentLoaded', init);
        window.addEventListener('pageshow', function(e) {
          if (e.persisted) init();
        });
      })();
    </script> <!-- Clear read button handler --> <script>
      (function() {
        document.addEventListener('click', function(e) {
          var tgt = e.target, btn = null;
          while (tgt && tgt !== document) {
            if (tgt.classList && tgt.classList.contains('clear-read-btn')) {
              btn = tgt;
              break;
            }
            tgt = tgt.parentNode;
          }
          if (!btn) return;
          e.preventDefault();
          e.stopPropagation();
          var url = btn.getAttribute('data-article-url');
          if (url && window.clearReadArticle) window.clearReadArticle(url);
        });
      })();
    </script> <!-- External links open in new tab --> <script>
      (function() {
        function makeExternal() {
          const domain = window.location.hostname;
          const links = document.querySelectorAll('a[href]');
          links.forEach(function(link) {
            const href = link.getAttribute('href');
            if (!href || link.hasAttribute('target')) return;
            const isExt = (href.startsWith('http://') || href.startsWith('https://')) && !href.includes(domain);
            if (isExt) {
              link.setAttribute('target', '_blank');
              link.setAttribute('rel', 'noopener noreferrer');
            }
          });
        }
        document.addEventListener('DOMContentLoaded', makeExternal);
        if (window.MutationObserver) {
          const obs = new MutationObserver(function(muts) {
            muts.forEach(function(mut) {
              if (mut.addedNodes.length) makeExternal();
            });
          });
          obs.observe(document.body, { childList: true, subtree: true });
        }
      })();
    </script> <!-- Code copy buttons --> <script>
      (function() {
        function createBtn() {
          const btn = document.createElement('button');
          btn.className = 'copy-code-button';
          btn.setAttribute('aria-label', 'Copy code to clipboard');
          btn.innerHTML = `
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
            <span>Copy</span>
          `;
          return btn;
        }
        
        function checkIcon() {
          return `
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            <span>Copied!</span>
          `;
        }
        
        async function copyText(txt) {
          try {
            await navigator.clipboard.writeText(txt);
            return true;
          } catch (err) {
            const ta = document.createElement('textarea');
            ta.value = txt;
            ta.style.position = 'fixed';
            ta.style.left = '-999999px';
            document.body.appendChild(ta);
            ta.select();
            try {
              document.execCommand('copy');
              document.body.removeChild(ta);
              return true;
            } catch (e) {
              document.body.removeChild(ta);
              return false;
            }
          }
        }
        
        async function handleCopy(btn, code) {
          const txt = code.textContent || '';
          const ok = await copyText(txt);
          if (ok) {
            const orig = btn.innerHTML;
            btn.classList.add('copied');
            btn.innerHTML = checkIcon();
            setTimeout(function() {
              btn.classList.remove('copied');
              btn.innerHTML = orig;
            }, 2000);
          }
        }
        
        function addBtns() {
          const blocks = document.querySelectorAll('.post-body pre');
          blocks.forEach(function(pre) {
            if (pre.querySelector('.copy-code-button')) return;
            const btn = createBtn();
            const code = pre.querySelector('code');
            if (code) {
              btn.addEventListener('click', function() {
                handleCopy(btn, code);
              });
              pre.appendChild(btn);
            }
          });
        }
        
        document.addEventListener('DOMContentLoaded', addBtns);
      })();
    </script> <!-- Newsletter Subscription Popup --> <div id="subscription-popup" class="subscription-popup" data-state="hidden" data-auto-trigger="true" data-astro-cid-we5gmdnp> <div class="popup-overlay" id="popup-overlay" data-astro-cid-we5gmdnp></div> <div class="popup-container" data-astro-cid-we5gmdnp> <div class="popup-content" data-astro-cid-we5gmdnp> <div class="popup-icon" data-astro-cid-we5gmdnp> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-we5gmdnp> <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-astro-cid-we5gmdnp></path> <polyline points="22,6 12,13 2,6" data-astro-cid-we5gmdnp></polyline> </svg> </div> <h2 class="popup-title" data-astro-cid-we5gmdnp>Stay Updated with Dev|Journal</h2> <p class="popup-description" id="popup-description" data-astro-cid-we5gmdnp>
Join our community of developers and engineers. Get insights on:
</p> <ul class="popup-features" data-astro-cid-we5gmdnp> <li data-astro-cid-we5gmdnp> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-we5gmdnp> <polyline points="20 6 9 17 4 12" data-astro-cid-we5gmdnp></polyline> </svg>
Software Architecture & Design Patterns
</li> <li data-astro-cid-we5gmdnp> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-we5gmdnp> <polyline points="20 6 9 17 4 12" data-astro-cid-we5gmdnp></polyline> </svg>
Backend Development Best Practices
</li> <li data-astro-cid-we5gmdnp> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-astro-cid-we5gmdnp> <polyline points="20 6 9 17 4 12" data-astro-cid-we5gmdnp></polyline> </svg>
AI & Tech Industry Analysis
</li> </ul> <form id="subscription-form" class="popup-form" data-astro-cid-we5gmdnp> <div class="form-group" data-astro-cid-we5gmdnp> <input type="text" id="subscriber-name" name="name" placeholder="Your name" required autocomplete="name" data-astro-cid-we5gmdnp> </div> <div class="form-group" data-astro-cid-we5gmdnp> <input type="email" id="subscriber-email" name="email" placeholder="your.email@example.com" required autocomplete="email" data-astro-cid-we5gmdnp> </div> <div id="form-message" class="form-message" data-astro-cid-we5gmdnp></div> <div class="popup-actions" data-astro-cid-we5gmdnp> <button type="submit" class="btn btn-primary" id="subscribe-btn" data-astro-cid-we5gmdnp> <span class="btn-text" data-astro-cid-we5gmdnp>Subscribe</span> <span class="btn-loader" data-astro-cid-we5gmdnp> <svg class="spinner" viewBox="0 0 24 24" data-astro-cid-we5gmdnp> <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" data-astro-cid-we5gmdnp></circle> </svg> </span> </button> <button type="button" class="btn btn-secondary" id="not-now-btn" data-astro-cid-we5gmdnp>Not Now</button> <button type="button" class="btn btn-text" id="cancel-btn" data-astro-cid-we5gmdnp>Don't Show Again</button> </div> </form> </div> </div> </div>  <script>
  // Configuration
  const CONFIG = {
    graceDelay: 5000, // 5 seconds delay before showing popup
    notNowDelay: 24 * 60 * 60 * 1000, // 1 day in milliseconds
    apiUrl: 'https://api.earezki.com/blog/api',
  };

  const STORAGE_KEYS = {
    subscribed: 'newsletter_subscribed',
    cancelled: 'newsletter_cancelled',
    notNowUntil: 'newsletter_not_now_until',
  };

  // State management
  let popupTimeout = null;

  function showPopup() {
    const popup = document.getElementById('subscription-popup');
    if (popup) {
      popup.setAttribute('data-state', 'visible');
      document.body.style.overflow = 'hidden';
    }
  }

  function hidePopup() {
    const popup = document.getElementById('subscription-popup');
    if (popup) {
      popup.setAttribute('data-state', 'hidden');
      document.body.style.overflow = '';
    }
  }

  function shouldShowPopup() {
    // Check if user has already subscribed
    if (localStorage.getItem(STORAGE_KEYS.subscribed) === 'true') {
      return false;
    }

    // Check if user clicked "Don't show again"
    if (localStorage.getItem(STORAGE_KEYS.cancelled) === 'true') {
      return false;
    }

    // Check if user clicked "Not now" and delay hasn't passed
    const notNowUntil = localStorage.getItem(STORAGE_KEYS.notNowUntil);
    if (notNowUntil) {
      const notNowTime = parseInt(notNowUntil, 10);
      if (Date.now() < notNowTime) {
        return false;
      }
    }

    return true;
  }

  async function getSubscriberStats() {
    try {
      const response = await fetch(`${CONFIG.apiUrl}/subscribers/stats`, {
        method: 'GET',
        headers: {
          'Accept': 'application/json',
        },
      });
      
      if (!response.ok) {
        return null;
      }
      
      const data = await response.json();
      return data.subscriber_count || null;
    } catch (error) {
      console.error('Failed to fetch subscriber stats:', error);
      return null;
    }
  }

  async function schedulePopup() {
    if (!shouldShowPopup()) {
      return;
    }

    // Fetch subscriber stats before scheduling popup
    const subscriberCount = await getSubscriberStats();
    if (subscriberCount === null) {
      console.log('Failed to fetch subscriber stats, not showing subscription popup');
      return;
    }

    // Update popup with subscriber count
    updatePopupWithStats(subscriberCount);

    // Show popup after grace period
    popupTimeout = window.setTimeout(() => {
      showPopup();
    }, CONFIG.graceDelay);
  }

  function updatePopupWithStats(count) {
    const descriptionEl = document.querySelector('.popup-description');
    if (descriptionEl) {
      const formattedCount = new Intl.NumberFormat('en-US').format(count);
      descriptionEl.innerHTML = `Join a community of <strong>${formattedCount}+</strong> developers and engineers who are growing together. Get insights on:`;
    }
  }

  async function handleSubscribe(event) {
    event.preventDefault();
    
    const form = event.target;
    const nameInput = form.querySelector('#subscriber-name');
    const emailInput = form.querySelector('#subscriber-email');
    const submitBtn = form.querySelector('#subscribe-btn');
    const messageEl = document.getElementById('form-message');

    const name = nameInput.value.trim();
    const email = emailInput.value.trim();

    if (!name || !email) {
      if (messageEl) {
        messageEl.textContent = 'Please fill in all fields.';
        messageEl.className = 'form-message error';
      }
      return;
    }

    // Show loading state
    submitBtn.classList.add('loading');
    submitBtn.disabled = true;
    if (messageEl) {
      messageEl.textContent = '';
      messageEl.className = 'form-message';
    }

    try {
      const response = await fetch(`${CONFIG.apiUrl}/subscribe`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ name, email }),
      });

      const data = await response.json();

      if (data.success) {
        localStorage.setItem(STORAGE_KEYS.subscribed, 'true');
        
        if (messageEl) {
          messageEl.textContent = 'üéâ Successfully subscribed! Thank you for joining us.';
          messageEl.className = 'form-message success';
        }

        // Hide popup after 2 seconds
        setTimeout(() => {
          hidePopup();
        }, 2000);
      } else {
        if (messageEl) {
          messageEl.textContent = data.error || 'Subscription failed. Please try again.';
          messageEl.className = 'form-message error';
        }
      }
    } catch (error) {
      console.error('Subscription error:', error);
      if (messageEl) {
        messageEl.textContent = 'Network error. Please check your connection and try again.';
        messageEl.className = 'form-message error';
      }
    } finally {
      submitBtn.classList.remove('loading');
      submitBtn.disabled = false;
    }
  }

  function handleNotNow() {
    const notNowUntil = Date.now() + CONFIG.notNowDelay;
    localStorage.setItem(STORAGE_KEYS.notNowUntil, notNowUntil.toString());
    hidePopup();
  }

  function handleCancel() {
    localStorage.setItem(STORAGE_KEYS.cancelled, 'true');
    hidePopup();
  }

  // Initialize popup
  document.addEventListener('DOMContentLoaded', () => {
    const popup = document.getElementById('subscription-popup');
    const autoTrigger = popup?.getAttribute('data-auto-trigger') === 'true';
    
    // Schedule popup to show after grace period only if autoTrigger is enabled
    if (autoTrigger) {
      schedulePopup();
    }

    // Event listeners
    const form = document.getElementById('subscription-form');
    const overlay = document.getElementById('popup-overlay');
    const notNowBtn = document.getElementById('not-now-btn');
    const cancelBtn = document.getElementById('cancel-btn');

    if (form) {
      form.addEventListener('submit', handleSubscribe);
    }

    if (overlay) {
      overlay.addEventListener('click', handleNotNow);
    }

    if (notNowBtn) {
      notNowBtn.addEventListener('click', handleNotNow);
    }

    if (cancelBtn) {
      cancelBtn.addEventListener('click', handleCancel);
    }

    // Clean up on page unload
    window.addEventListener('beforeunload', () => {
      if (popupTimeout) {
        clearTimeout(popupTimeout);
      }
    });
  });
</script> </body></html> 