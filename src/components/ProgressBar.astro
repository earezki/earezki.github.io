---
// Reading progress bar component - displays scroll progress at top of page
---

<div 
  id="readingProgress" 
  role="progressbar"
  aria-label="Reading progress"
  aria-valuenow="0"
  aria-valuemin="0"
  aria-valuemax="100"
  style="position:fixed;left:0;top:0;height:3px;background:linear-gradient(90deg,#2563eb,#9333ea);width:0;z-index:999;transition:width .15s ease;"
>
</div>

<script>
  /**
   * Updates the reading progress bar based on scroll position
   */
  function initReadingProgress(): void {
    const bar = document.getElementById('readingProgress');
    if (!bar) return;

    const updateProgress = (): void => {
      const html = document.documentElement;
      const scrollTop = html.scrollTop || document.body.scrollTop;
      const scrollHeight = html.scrollHeight - html.clientHeight;
      const progress = scrollHeight > 0 ? (scrollTop / scrollHeight) * 100 : 0;
      
      bar.style.width = `${progress}%`;
      bar.setAttribute('aria-valuenow', progress.toFixed(0));
    };

    // Use passive listener for better performance
    document.addEventListener('scroll', updateProgress, { passive: true });
    
    // Initialize on load
    updateProgress();
  }

  // Initialize when DOM is ready
  initReadingProgress();
</script>
