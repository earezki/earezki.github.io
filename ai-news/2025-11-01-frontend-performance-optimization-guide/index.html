<!DOCTYPE html><html lang="en" data-theme="dark"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Frontend Performance Optimization: Complete Guide to Building Fast Web Apps • Dev|Journal</title><meta name="description" content="Frontend Performance Optimization: Complete Guide to Building Fast Web Apps Performance is critical for modern web applications. This comprehensive guide…"><meta name="keywords" content="software architecture, backend development, microservices, Java, Python, Spring Boot, technical blog"><meta name="author" content="El Mehdi Arezki"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://earezki.com/ai-news/2025-11-01-frontend-performance-optimization-guide/"><meta property="og:title" content="Frontend Performance Optimization: Complete Guide to Building Fast Web Apps • Dev|Journal"><meta property="og:site_name" content="Dev|Journal"><meta property="og:description" content="Frontend Performance Optimization: Complete Guide to Building Fast Web Apps Performance is critical for modern web applications. This comprehensive guide…"><meta property="og:image" content="https://earezki.com/assets/og-image-default.jpg"><!-- Twitter --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://earezki.com/ai-news/2025-11-01-frontend-performance-optimization-guide/"><meta name="twitter:title" content="Frontend Performance Optimization: Complete Guide to Building Fast Web Apps • Dev|Journal"><meta name="twitter:description" content="Frontend Performance Optimization: Complete Guide to Building Fast Web Apps Performance is critical for modern web applications. This comprehensive guide…"><meta name="twitter:image" content="https://earezki.com/assets/og-image-default.jpg"><meta name="twitter:creator" content="@earezki"><link rel="canonical" href="https://earezki.com/ai-news/2025-11-01-frontend-performance-optimization-guide/"><link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-161447264-1"></script><script defer src="https://cloud.umami.is/script.js" data-website-id="4a26531d-1053-4f79-97a6-06a1366aff91"></script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Frontend Performance Optimization: Complete Guide to Building Fast Web Apps","datePublished":"2025-11-01T17:00:00.000Z","dateModified":"2025-11-01T17:00:00.000Z","author":{"@type":"Person","name":"AREZKI El Mehdi"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://earezki.com/ai-news/2025-11-01-frontend-performance-optimization-guide/"},"description":"Frontend Performance Optimization: Complete Guide to Building Fast Web Apps Performance is critical for modern web applications. This comprehensive guide…"}</script><link rel="stylesheet" href="/_astro/_slug_.CDWqF8AB.css">
<style>.post-layout[data-astro-cid-rkg3zjxi]{display:grid;grid-template-columns:260px 1fr;gap:2.5rem}.sidebar-left[data-astro-cid-rkg3zjxi]{position:relative}@media (max-width: 1080px){.post-layout[data-astro-cid-rkg3zjxi]{grid-template-columns:1fr}}.ai-disclaimer-article[data-astro-cid-rkg3zjxi]{display:flex;gap:.75rem;padding:.9rem 1.1rem;margin:0 auto 2rem;max-width:780px;background:linear-gradient(135deg,#667eea1a,#764ba21a,#f093fb1a);border:2px solid transparent;border-radius:var(--radius-md);position:relative;background-clip:padding-box;font-size:.85rem}.ai-disclaimer-article[data-astro-cid-rkg3zjxi]:before{content:"";position:absolute;inset:-2px;border-radius:var(--radius-md);padding:2px;background:var(--ai-gradient-border);background-size:200% 200%;animation:gradient-rotate 3s linear infinite;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask-composite:exclude;pointer-events:none}html[data-theme=dark] .ai-disclaimer-article[data-astro-cid-rkg3zjxi]{background:linear-gradient(135deg,#667eea26,#764ba226,#f093fb26)}.ai-disclaimer-article[data-astro-cid-rkg3zjxi] svg[data-astro-cid-rkg3zjxi]{margin-top:.15rem}.ai-disclaimer-article[data-astro-cid-rkg3zjxi] strong[data-astro-cid-rkg3zjxi]{color:var(--color-text);display:block;margin-bottom:.15rem}.ai-disclaimer-article[data-astro-cid-rkg3zjxi] div[data-astro-cid-rkg3zjxi]{line-height:1.5;color:var(--color-text-alt)}
.toc[data-astro-cid-xvrfupwn]{position:sticky;top:90px;max-height:calc(100vh - 120px);overflow:auto;padding:1rem 1rem 1.2rem;background:var(--color-bg-alt);border:1px solid var(--color-border);border-radius:var(--radius-md);font-size:.8rem;line-height:1.3}.toc-title[data-astro-cid-xvrfupwn]{font-weight:600;font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;margin-bottom:.6rem;color:var(--color-text-alt)}.toc[data-astro-cid-xvrfupwn] ul[data-astro-cid-xvrfupwn]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.35rem}.toc[data-astro-cid-xvrfupwn] a[data-astro-cid-xvrfupwn]{text-decoration:none;color:var(--color-text-alt)}.toc[data-astro-cid-xvrfupwn] a[data-astro-cid-xvrfupwn]:hover{color:var(--color-accent)}.toc[data-astro-cid-xvrfupwn] li[data-astro-cid-xvrfupwn][class*=d-3]{margin-left:.75rem}.toc[data-astro-cid-xvrfupwn] li[data-astro-cid-xvrfupwn][class*=d-4]{margin-left:1.4rem}@media (max-width: 1080px){.toc[data-astro-cid-xvrfupwn]{display:none}}
</style><script type="module" src="/_astro/hoisted.CwSnpN4J.js"></script></head> <body> <div id="readingProgress" style="position:fixed;left:0;top:0;height:3px;background:linear-gradient(90deg,#2563eb,#9333ea);width:0;z-index:999;transition:width .15s ease;"></div>  <header class="site-header container"> <div class="logo-wrap"> <a class="logo" href="/">Dev|Journal</a> </div> <nav class="main-nav"> <a href="/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path> <polyline points="9 22 9 12 15 12 15 22"></polyline> </svg>
Home
</a> <a href="/ai-news/" class="ai-news-link"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h-9.5a.5.5 0 0 0-.5.5.5.5 0 0 1-1 0 .5.5 0 0 0-.5-.5H1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"></path> <path d="M7 15v4a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-4"></path> </svg>
AI News
</a> <a href="/tags/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2z"></path> <circle cx="7" cy="7" r="1.5"></circle> </svg>
Tags
</a> <a href="/about/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <circle cx="12" cy="12" r="10"></circle> <path d="M12 16v-4"></path> <path d="M12 8h.01"></path> </svg>
About
</a> <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode"> <span class="theme-icon">☾</span> <span class="theme-text">dark</span> </button> </nav> </header> <main class="container content-area">  <div class="ai-disclaimer-article" data-astro-cid-rkg3zjxi> <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink: 0;" data-astro-cid-rkg3zjxi> <circle cx="12" cy="12" r="10" data-astro-cid-rkg3zjxi></circle> <line x1="12" y1="8" x2="12" y2="12" data-astro-cid-rkg3zjxi></line> <line x1="12" y1="16" x2="12.01" y2="16" data-astro-cid-rkg3zjxi></line> </svg> <div data-astro-cid-rkg3zjxi> <strong data-astro-cid-rkg3zjxi>AI-Generated Content:</strong> This article was created with AI assistance. Please verify important information and check original references.
</div> </div> <div class="post-layout" data-astro-cid-rkg3zjxi> <aside class="sidebar-left" data-astro-cid-rkg3zjxi> <nav class="toc" aria-label="Table of Contents" data-astro-cid-xvrfupwn> <div class="toc-title" data-astro-cid-xvrfupwn>On this page</div> <ul data-astro-cid-xvrfupwn> <li class="d-2" data-astro-cid-xvrfupwn><a href="#table-of-contents" data-astro-cid-xvrfupwn>Table of Contents</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#performance-metrics-metrics" data-astro-cid-xvrfupwn>Performance Metrics {#metrics}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-key-performance-indicators" data-astro-cid-xvrfupwn>1. Key Performance Indicators</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-measuring-performance" data-astro-cid-xvrfupwn>2. Measuring Performance</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-web-vitals-library" data-astro-cid-xvrfupwn>3. Web Vitals Library</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#critical-rendering-path-rendering-path" data-astro-cid-xvrfupwn>Critical Rendering Path {#rendering-path}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-html-optimization" data-astro-cid-xvrfupwn>1. HTML Optimization</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-critical-css-extraction" data-astro-cid-xvrfupwn>2. Critical CSS Extraction</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-lazy-loading" data-astro-cid-xvrfupwn>3. Lazy Loading</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#javascript-performance-javascript" data-astro-cid-xvrfupwn>JavaScript Performance {#javascript}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-debouncing-and-throttling" data-astro-cid-xvrfupwn>1. Debouncing and Throttling</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-web-workers" data-astro-cid-xvrfupwn>2. Web Workers</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-code-splitting-strategies" data-astro-cid-xvrfupwn>3. Code Splitting Strategies</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#css-optimization-css" data-astro-cid-xvrfupwn>CSS Optimization {#css}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-css-performance-best-practices" data-astro-cid-xvrfupwn>1. CSS Performance Best Practices</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-css-loading-strategies" data-astro-cid-xvrfupwn>2. CSS Loading Strategies</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-css-in-js-performance" data-astro-cid-xvrfupwn>3. CSS-in-JS Performance</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#image-and-media-optimization-images" data-astro-cid-xvrfupwn>Image and Media Optimization {#images}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-modern-image-formats" data-astro-cid-xvrfupwn>1. Modern Image Formats</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-image-optimization-techniques" data-astro-cid-xvrfupwn>2. Image Optimization Techniques</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-video-optimization" data-astro-cid-xvrfupwn>3. Video Optimization</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#network-optimization-network" data-astro-cid-xvrfupwn>Network Optimization {#network}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-http2-and-http3" data-astro-cid-xvrfupwn>1. HTTP/2 and HTTP/3</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-caching-strategies" data-astro-cid-xvrfupwn>2. Caching Strategies</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-resource-prioritization" data-astro-cid-xvrfupwn>3. Resource Prioritization</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#bundle-size-optimization-bundles" data-astro-cid-xvrfupwn>Bundle Size Optimization {#bundles}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-webpack-configuration" data-astro-cid-xvrfupwn>1. Webpack Configuration</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-tree-shaking" data-astro-cid-xvrfupwn>2. Tree Shaking</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#runtime-performance-runtime" data-astro-cid-xvrfupwn>Runtime Performance {#runtime}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-virtual-scrolling" data-astro-cid-xvrfupwn>1. Virtual Scrolling</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-efficient-dom-updates" data-astro-cid-xvrfupwn>2. Efficient DOM Updates</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#core-web-vitals-web-vitals" data-astro-cid-xvrfupwn>Core Web Vitals {#web-vitals}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-optimizing-lcp" data-astro-cid-xvrfupwn>1. Optimizing LCP</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-optimizing-fidinp" data-astro-cid-xvrfupwn>2. Optimizing FID/INP</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-optimizing-cls" data-astro-cid-xvrfupwn>3. Optimizing CLS</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#monitoring-and-tools-monitoring" data-astro-cid-xvrfupwn>Monitoring and Tools {#monitoring}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-performance-monitoring" data-astro-cid-xvrfupwn>1. Performance Monitoring</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-performance-tools" data-astro-cid-xvrfupwn>2. Performance Tools</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#conclusion" data-astro-cid-xvrfupwn>Conclusion</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#resources" data-astro-cid-xvrfupwn>Resources</a></li> </ul> </nav>  </aside> <article class="post" data-astro-cid-rkg3zjxi> <header class="post-header" data-astro-cid-rkg3zjxi> <h1 data-astro-cid-rkg3zjxi>Frontend Performance Optimization: Complete Guide to Building Fast Web Apps</h1> <div class="meta" data-astro-cid-rkg3zjxi> <time datetime="2025-11-01T17:00:00.000Z" data-astro-cid-rkg3zjxi>Sat Nov 01 2025</time> <span data-astro-cid-rkg3zjxi>• 19 min read</span> </div> <div class="tag-row" data-astro-cid-rkg3zjxi><span class="tag" data-astro-cid-rkg3zjxi>Frontend</span><span class="tag" data-astro-cid-rkg3zjxi>Performance</span><span class="tag" data-astro-cid-rkg3zjxi>Web Development</span><span class="tag" data-astro-cid-rkg3zjxi>JavaScript</span></div> </header> <div class="post-body prose" data-astro-cid-rkg3zjxi> <h1 id="frontend-performance-optimization-complete-guide-to-building-fast-web-apps">Frontend Performance Optimization: Complete Guide to Building Fast Web Apps</h1>
<p>Performance is critical for modern web applications. This comprehensive guide covers everything from initial page load to runtime performance, with practical examples and proven techniques used by top companies.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#metrics">Performance Metrics</a></li>
<li><a href="#rendering-path">Critical Rendering Path</a></li>
<li><a href="#javascript">JavaScript Performance</a></li>
<li><a href="#css">CSS Optimization</a></li>
<li><a href="#images">Image and Media Optimization</a></li>
<li><a href="#network">Network Optimization</a></li>
<li><a href="#bundles">Bundle Size Optimization</a></li>
<li><a href="#runtime">Runtime Performance</a></li>
<li><a href="#web-vitals">Core Web Vitals</a></li>
<li><a href="#monitoring">Monitoring and Tools</a></li>
</ol>
<h2 id="performance-metrics-metrics">Performance Metrics {#metrics}</h2>
<h3 id="1-key-performance-indicators">1. Key Performance Indicators</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Core Web Vitals</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> webVitals</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#8B949E">  // Largest Contentful Paint - Loading performance</span></span>
<span class="line"><span style="color:#E6EDF3">  LCP: </span><span style="color:#A5D6FF">'&#x3C; 2.5s'</span><span style="color:#E6EDF3">,  </span><span style="color:#8B949E">// Good</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  // First Input Delay - Interactivity</span></span>
<span class="line"><span style="color:#E6EDF3">  FID: </span><span style="color:#A5D6FF">'&#x3C; 100ms'</span><span style="color:#E6EDF3">,  </span><span style="color:#8B949E">// Good</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  // Cumulative Layout Shift - Visual stability</span></span>
<span class="line"><span style="color:#E6EDF3">  CLS: </span><span style="color:#A5D6FF">'&#x3C; 0.1'</span><span style="color:#E6EDF3">,  </span><span style="color:#8B949E">// Good</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  // Interaction to Next Paint (replacing FID)</span></span>
<span class="line"><span style="color:#E6EDF3">  INP: </span><span style="color:#A5D6FF">'&#x3C; 200ms'</span><span style="color:#E6EDF3">,  </span><span style="color:#8B949E">// Good</span></span>
<span class="line"><span style="color:#E6EDF3">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Other important metrics</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> otherMetrics</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#8B949E">  // Time to First Byte</span></span>
<span class="line"><span style="color:#E6EDF3">  TTFB: </span><span style="color:#A5D6FF">'&#x3C; 800ms'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  // First Contentful Paint</span></span>
<span class="line"><span style="color:#E6EDF3">  FCP: </span><span style="color:#A5D6FF">'&#x3C; 1.8s'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  // Time to Interactive</span></span>
<span class="line"><span style="color:#E6EDF3">  TTI: </span><span style="color:#A5D6FF">'&#x3C; 3.8s'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  // Total Blocking Time</span></span>
<span class="line"><span style="color:#E6EDF3">  TBT: </span><span style="color:#A5D6FF">'&#x3C; 200ms'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  // Speed Index</span></span>
<span class="line"><span style="color:#E6EDF3">  SI: </span><span style="color:#A5D6FF">'&#x3C; 3.4s'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">};</span></span>
<span class="line"></span></code></pre>
<h3 id="2-measuring-performance">2. Measuring Performance</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Performance Observer API</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> observer</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> PerformanceObserver</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">list</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">  for</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> entry</span><span style="color:#FF7B72"> of</span><span style="color:#E6EDF3"> list.</span><span style="color:#D2A8FF">getEntries</span><span style="color:#E6EDF3">()) {</span></span>
<span class="line"><span style="color:#E6EDF3">    console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'Performance entry:'</span><span style="color:#E6EDF3">, {</span></span>
<span class="line"><span style="color:#E6EDF3">      name: entry.name,</span></span>
<span class="line"><span style="color:#E6EDF3">      duration: entry.duration,</span></span>
<span class="line"><span style="color:#E6EDF3">      startTime: entry.startTime,</span></span>
<span class="line"><span style="color:#E6EDF3">      entryType: entry.entryType</span></span>
<span class="line"><span style="color:#E6EDF3">    });</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">observer.</span><span style="color:#D2A8FF">observe</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">  entryTypes: [</span><span style="color:#A5D6FF">'navigation'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'resource'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'paint'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'measure'</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Navigation Timing API</span></span>
<span class="line"><span style="color:#E6EDF3">window.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'load'</span><span style="color:#E6EDF3">, () </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> perfData</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> performance.</span><span style="color:#D2A8FF">getEntriesByType</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'navigation'</span><span style="color:#E6EDF3">)[</span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">];</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#E6EDF3">  console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#8B949E">    // DNS lookup</span></span>
<span class="line"><span style="color:#E6EDF3">    dnsTime: perfData.domainLookupEnd </span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3"> perfData.domainLookupStart,</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // TCP connection</span></span>
<span class="line"><span style="color:#E6EDF3">    tcpTime: perfData.connectEnd </span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3"> perfData.connectStart,</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // Request + Response</span></span>
<span class="line"><span style="color:#E6EDF3">    requestTime: perfData.responseEnd </span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3"> perfData.requestStart,</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // DOM processing</span></span>
<span class="line"><span style="color:#E6EDF3">    domProcessing: perfData.domComplete </span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3"> perfData.domInteractive,</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // Full page load</span></span>
<span class="line"><span style="color:#E6EDF3">    pageLoad: perfData.loadEventEnd </span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3"> perfData.fetchStart</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Resource Timing API</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> resources</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> performance.</span><span style="color:#D2A8FF">getEntriesByType</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'resource'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">resources.</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">resource</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">    name: resource.name,</span></span>
<span class="line"><span style="color:#E6EDF3">    duration: resource.duration,</span></span>
<span class="line"><span style="color:#E6EDF3">    size: resource.transferSize,</span></span>
<span class="line"><span style="color:#E6EDF3">    type: resource.initiatorType</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// User Timing API - Custom measurements</span></span>
<span class="line"><span style="color:#E6EDF3">performance.</span><span style="color:#D2A8FF">mark</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'component-render-start'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// ... component rendering code ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">performance.</span><span style="color:#D2A8FF">mark</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'component-render-end'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">performance.</span><span style="color:#D2A8FF">measure</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#A5D6FF">  'component-render'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">  'component-render-start'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">  'component-render-end'</span></span>
<span class="line"><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> measure</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> performance.</span><span style="color:#D2A8FF">getEntriesByName</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'component-render'</span><span style="color:#E6EDF3">)[</span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">];</span></span>
<span class="line"><span style="color:#E6EDF3">console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">`Component render took ${</span><span style="color:#E6EDF3">measure</span><span style="color:#A5D6FF">.</span><span style="color:#E6EDF3">duration</span><span style="color:#A5D6FF">}ms`</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span></code></pre>
<h3 id="3-web-vitals-library">3. Web Vitals Library</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Install: npm install web-vitals</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> { getCLS, getFID, getFCP, getLCP, getTTFB } </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'web-vitals'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Measure and send to analytics</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> sendToAnalytics</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">metric</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> body</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> JSON</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">stringify</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">    name: metric.name,</span></span>
<span class="line"><span style="color:#E6EDF3">    value: metric.value,</span></span>
<span class="line"><span style="color:#E6EDF3">    id: metric.id,</span></span>
<span class="line"><span style="color:#E6EDF3">    rating: metric.rating</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  // Use `navigator.sendBeacon()` if available</span></span>
<span class="line"><span style="color:#FF7B72">  if</span><span style="color:#E6EDF3"> (navigator.sendBeacon) {</span></span>
<span class="line"><span style="color:#E6EDF3">    navigator.</span><span style="color:#D2A8FF">sendBeacon</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'/analytics'</span><span style="color:#E6EDF3">, body);</span></span>
<span class="line"><span style="color:#E6EDF3">  } </span><span style="color:#FF7B72">else</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#D2A8FF">    fetch</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'/analytics'</span><span style="color:#E6EDF3">, { body, method: </span><span style="color:#A5D6FF">'POST'</span><span style="color:#E6EDF3">, keepalive: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3"> });</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Track all Core Web Vitals</span></span>
<span class="line"><span style="color:#D2A8FF">getCLS</span><span style="color:#E6EDF3">(sendToAnalytics);</span></span>
<span class="line"><span style="color:#D2A8FF">getFID</span><span style="color:#E6EDF3">(sendToAnalytics);</span></span>
<span class="line"><span style="color:#D2A8FF">getFCP</span><span style="color:#E6EDF3">(sendToAnalytics);</span></span>
<span class="line"><span style="color:#D2A8FF">getLCP</span><span style="color:#E6EDF3">(sendToAnalytics);</span></span>
<span class="line"><span style="color:#D2A8FF">getTTFB</span><span style="color:#E6EDF3">(sendToAnalytics);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Custom implementation</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> measureLCP</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#FF7B72"> new</span><span style="color:#79C0FF"> Promise</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">resolve</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    new</span><span style="color:#D2A8FF"> PerformanceObserver</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">entryList</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">      const</span><span style="color:#79C0FF"> entries</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> entryList.</span><span style="color:#D2A8FF">getEntries</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#FF7B72">      const</span><span style="color:#79C0FF"> lastEntry</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> entries[entries.</span><span style="color:#79C0FF">length</span><span style="color:#FF7B72"> -</span><span style="color:#79C0FF"> 1</span><span style="color:#E6EDF3">];</span></span>
<span class="line"><span style="color:#D2A8FF">      resolve</span><span style="color:#E6EDF3">(lastEntry.renderTime </span><span style="color:#FF7B72">||</span><span style="color:#E6EDF3"> lastEntry.loadTime);</span></span>
<span class="line"><span style="color:#E6EDF3">    }).</span><span style="color:#D2A8FF">observe</span><span style="color:#E6EDF3">({ type: </span><span style="color:#A5D6FF">'largest-contentful-paint'</span><span style="color:#E6EDF3">, buffered: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3"> });</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">measureLCP</span><span style="color:#E6EDF3">().</span><span style="color:#D2A8FF">then</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">lcp</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'LCP:'</span><span style="color:#E6EDF3">, lcp);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span></code></pre>
<h2 id="critical-rendering-path-rendering-path">Critical Rendering Path {#rendering-path}</h2>
<h3 id="1-html-optimization">1. HTML Optimization</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#8B949E">&#x3C;!-- ❌ Bad: Render-blocking CSS --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"stylesheet"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"styles.css"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"stylesheet"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"print.css"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- ✅ Good: Non-blocking CSS --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Critical CSS inline --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#8B949E">    /* Above-the-fold styles */</span></span>
<span class="line"><span style="color:#7EE787">    body</span><span style="color:#E6EDF3"> { </span><span style="color:#79C0FF">margin</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">; </span><span style="color:#79C0FF">font-family</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">sans-serif</span><span style="color:#E6EDF3">; }</span></span>
<span class="line"><span style="color:#79C0FF">    .header</span><span style="color:#E6EDF3"> { </span><span style="color:#79C0FF">background</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">#333</span><span style="color:#E6EDF3">; </span><span style="color:#79C0FF">color</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">white</span><span style="color:#E6EDF3">; }</span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;/</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Non-critical CSS async --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preload"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"styles.css"</span><span style="color:#79C0FF"> as</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"style"</span><span style="color:#79C0FF"> onload</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"</span><span style="color:#79C0FF">this</span><span style="color:#A5D6FF">.</span><span style="color:#E6EDF3">onload</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">null</span><span style="color:#A5D6FF">;</span><span style="color:#79C0FF">this</span><span style="color:#A5D6FF">.</span><span style="color:#E6EDF3">rel</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">'stylesheet'"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">noscript</span><span style="color:#E6EDF3">>&#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"stylesheet"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"styles.css"</span><span style="color:#E6EDF3">>&#x3C;/</span><span style="color:#7EE787">noscript</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Media-specific CSS --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"stylesheet"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"print.css"</span><span style="color:#79C0FF"> media</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"print"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- ❌ Bad: Render-blocking JavaScript --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">script</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"app.js"</span><span style="color:#E6EDF3">>&#x3C;/</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- ✅ Good: Non-blocking JavaScript --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Critical JS inline --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#8B949E">    // Only critical code here</span></span>
<span class="line"><span style="color:#E6EDF3">    window.</span><span style="color:#79C0FF">APP_CONFIG</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> { theme: </span><span style="color:#A5D6FF">'dark'</span><span style="color:#E6EDF3"> };</span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;/</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">body</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Content --></span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Scripts at end of body --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">script</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"app.js"</span><span style="color:#79C0FF"> defer</span><span style="color:#E6EDF3">>&#x3C;/</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">script</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"analytics.js"</span><span style="color:#79C0FF"> async</span><span style="color:#E6EDF3">>&#x3C;/</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">body</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- Resource hints --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Preconnect to required origins --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preconnect"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"https://api.example.com"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preconnect"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"https://fonts.googleapis.com"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- DNS prefetch for third-party domains --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"dns-prefetch"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"https://analytics.example.com"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Preload critical resources --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preload"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"hero-image.jpg"</span><span style="color:#79C0FF"> as</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"image"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preload"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"font.woff2"</span><span style="color:#79C0FF"> as</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"font"</span><span style="color:#79C0FF"> type</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"font/woff2"</span><span style="color:#79C0FF"> crossorigin</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Prefetch next page resources --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"prefetch"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"/next-page.html"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span></code></pre>
<h3 id="2-critical-css-extraction">2. Critical CSS Extraction</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Using critical package</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> critical</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> require</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'critical'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">critical.</span><span style="color:#D2A8FF">generate</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">  inline: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  base: </span><span style="color:#A5D6FF">'dist/'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  src: </span><span style="color:#A5D6FF">'index.html'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  dest: </span><span style="color:#A5D6FF">'index-critical.html'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  dimensions: [</span></span>
<span class="line"><span style="color:#E6EDF3">    {</span></span>
<span class="line"><span style="color:#E6EDF3">      height: </span><span style="color:#79C0FF">900</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      width: </span><span style="color:#79C0FF">1300</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">    },</span></span>
<span class="line"><span style="color:#E6EDF3">    {</span></span>
<span class="line"><span style="color:#E6EDF3">      height: </span><span style="color:#79C0FF">720</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      width: </span><span style="color:#79C0FF">480</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">    },</span></span>
<span class="line"><span style="color:#E6EDF3">  ],</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Webpack plugin for critical CSS</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> HtmlCriticalWebpackPlugin</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> require</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'html-critical-webpack-plugin'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF">module</span><span style="color:#E6EDF3">.</span><span style="color:#79C0FF">exports</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  plugins: [</span></span>
<span class="line"><span style="color:#FF7B72">    new</span><span style="color:#D2A8FF"> HtmlCriticalWebpackPlugin</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">      base: path.</span><span style="color:#D2A8FF">resolve</span><span style="color:#E6EDF3">(__dirname, </span><span style="color:#A5D6FF">'dist'</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#E6EDF3">      src: </span><span style="color:#A5D6FF">'index.html'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      dest: </span><span style="color:#A5D6FF">'index.html'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      inline: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      minify: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      extract: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      dimensions: [{</span></span>
<span class="line"><span style="color:#E6EDF3">        height: </span><span style="color:#79C0FF">900</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">        width: </span><span style="color:#79C0FF">1300</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      }],</span></span>
<span class="line"><span style="color:#E6EDF3">    }),</span></span>
<span class="line"><span style="color:#E6EDF3">  ],</span></span>
<span class="line"><span style="color:#E6EDF3">};</span></span>
<span class="line"></span></code></pre>
<h3 id="3-lazy-loading">3. Lazy Loading</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Image lazy loading (native)</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">img</span><span style="color:#79C0FF"> src</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"hero.jpg"</span><span style="color:#79C0FF"> loading</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"lazy"</span><span style="color:#79C0FF"> alt</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"Hero image"</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// Intersection Observer for custom lazy loading</span></span>
<span class="line"><span style="color:#E6EDF3">const observer = new IntersectionObserver((entries) => </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#E6EDF3">  entries.</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">entry</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (entry.isIntersecting) {</span></span>
<span class="line"><span style="color:#FF7B72">      const</span><span style="color:#79C0FF"> img</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> entry.target;</span></span>
<span class="line"><span style="color:#E6EDF3">      img.src </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> img.dataset.src;</span></span>
<span class="line"><span style="color:#E6EDF3">      img.classList.</span><span style="color:#D2A8FF">add</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'loaded'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">      observer.</span><span style="color:#D2A8FF">unobserve</span><span style="color:#E6EDF3">(img);</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#FF7B72">}</span><span style="color:#E6EDF3">, </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#E6EDF3">  rootMargin: </span><span style="color:#A5D6FF">'50px'</span><span style="color:#8B949E"> // Load 50px before entering viewport</span></span>
<span class="line"><span style="color:#FF7B72">}</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">document.querySelectorAll('img[data-src]').forEach(img => </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#E6EDF3">  observer.</span><span style="color:#D2A8FF">observe</span><span style="color:#E6EDF3">(img);</span></span>
<span class="line"><span style="color:#FF7B72">}</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// Component lazy loading</span></span>
<span class="line"><span style="color:#E6EDF3">const LazyComponent = React.lazy(() => import('./HeavyComponent'));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">function App() </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#D2A8FF">  return</span><span style="color:#E6EDF3"> (</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;</span><span style="color:#7EE787">Suspense</span><span style="color:#79C0FF"> fallback</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">LoadingSpinner</span><span style="color:#E6EDF3"> /></span><span style="color:#FF7B72">}</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">      &#x3C;</span><span style="color:#7EE787">LazyComponent</span><span style="color:#E6EDF3"> /></span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;/</span><span style="color:#7EE787">Suspense</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#FF7B72">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// Route-based code splitting</span></span>
<span class="line"><span style="color:#E6EDF3">const routes = [</span></span>
<span class="line"><span style="color:#FF7B72">  {</span></span>
<span class="line"><span style="color:#E6EDF3">    path: </span><span style="color:#A5D6FF">'/'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">    component: React.</span><span style="color:#D2A8FF">lazy</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#FF7B72"> import</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'./pages/Home'</span><span style="color:#E6EDF3">))</span></span>
<span class="line"><span style="color:#FF7B72">  }</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#FF7B72">  {</span></span>
<span class="line"><span style="color:#E6EDF3">    path: </span><span style="color:#A5D6FF">'/about'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">    component: React.</span><span style="color:#D2A8FF">lazy</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#FF7B72"> import</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'./pages/About'</span><span style="color:#E6EDF3">))</span></span>
<span class="line"><span style="color:#FF7B72">  }</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#FF7B72">  {</span></span>
<span class="line"><span style="color:#E6EDF3">    path: </span><span style="color:#A5D6FF">'/dashboard'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">    component: React.</span><span style="color:#D2A8FF">lazy</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#FF7B72"> import</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'./pages/Dashboard'</span><span style="color:#E6EDF3">))</span></span>
<span class="line"><span style="color:#FF7B72">  }</span></span>
<span class="line"><span style="color:#E6EDF3">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// Script lazy loading</span></span>
<span class="line"><span style="color:#E6EDF3">function loadScript(src) </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#E6EDF3">  return </span><span style="color:#FF7B72">new</span><span style="color:#79C0FF"> Promise</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">resolve</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">reject</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> script</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> document.</span><span style="color:#D2A8FF">createElement</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'script'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">    script.src </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> src;</span></span>
<span class="line"><span style="color:#E6EDF3">    script.async </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> true</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">    script.onload </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> resolve;</span></span>
<span class="line"><span style="color:#E6EDF3">    script.onerror </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> reject;</span></span>
<span class="line"><span style="color:#E6EDF3">    document.body.</span><span style="color:#D2A8FF">appendChild</span><span style="color:#E6EDF3">(script);</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#FF7B72">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// Load when needed</span></span>
<span class="line"><span style="color:#E6EDF3">button.addEventListener('click', async () => </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#FF7B72">  await</span><span style="color:#D2A8FF"> loadScript</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'https://maps.googleapis.com/maps/api/js'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#D2A8FF">  initializeMap</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#FF7B72">}</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span></code></pre>
<h2 id="javascript-performance-javascript">JavaScript Performance {#javascript}</h2>
<h3 id="1-debouncing-and-throttling">1. Debouncing and Throttling</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Debounce - Execute after delay, reset on each call</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> debounce</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">func</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">delay</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">  let</span><span style="color:#E6EDF3"> timeoutId;</span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#FF7B72"> function</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">...</span><span style="color:#FFA657">args</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#D2A8FF">    clearTimeout</span><span style="color:#E6EDF3">(timeoutId);</span></span>
<span class="line"><span style="color:#E6EDF3">    timeoutId </span><span style="color:#FF7B72">=</span><span style="color:#D2A8FF"> setTimeout</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> func.</span><span style="color:#D2A8FF">apply</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">this</span><span style="color:#E6EDF3">, args), delay);</span></span>
<span class="line"><span style="color:#E6EDF3">  };</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Usage: Search input</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> searchInput</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> document.</span><span style="color:#D2A8FF">getElementById</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'search'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> debouncedSearch</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> debounce</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">query</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'Searching for:'</span><span style="color:#E6EDF3">, query);</span></span>
<span class="line"><span style="color:#8B949E">  // API call here</span></span>
<span class="line"><span style="color:#E6EDF3">}, </span><span style="color:#79C0FF">300</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">searchInput.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'input'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">e</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#D2A8FF">  debouncedSearch</span><span style="color:#E6EDF3">(e.target.value);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Throttle - Execute at most once per interval</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> throttle</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">func</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">limit</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">  let</span><span style="color:#E6EDF3"> inThrottle;</span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#FF7B72"> function</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">...</span><span style="color:#FFA657">args</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">!</span><span style="color:#E6EDF3">inThrottle) {</span></span>
<span class="line"><span style="color:#E6EDF3">      func.</span><span style="color:#D2A8FF">apply</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">this</span><span style="color:#E6EDF3">, args);</span></span>
<span class="line"><span style="color:#E6EDF3">      inThrottle </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> true</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#D2A8FF">      setTimeout</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> inThrottle </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> false</span><span style="color:#E6EDF3">, limit);</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">  };</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Usage: Scroll handler</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> throttledScroll</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> throttle</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'Scroll position:'</span><span style="color:#E6EDF3">, window.scrollY);</span></span>
<span class="line"><span style="color:#E6EDF3">}, </span><span style="color:#79C0FF">100</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">window.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'scroll'</span><span style="color:#E6EDF3">, throttledScroll);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// RequestAnimationFrame throttle for smooth animations</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> rafThrottle</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">func</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">  let</span><span style="color:#E6EDF3"> rafId </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> null</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#FF7B72"> function</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">...</span><span style="color:#FFA657">args</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (rafId </span><span style="color:#FF7B72">===</span><span style="color:#79C0FF"> null</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#E6EDF3">      rafId </span><span style="color:#FF7B72">=</span><span style="color:#D2A8FF"> requestAnimationFrame</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">        func.</span><span style="color:#D2A8FF">apply</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">this</span><span style="color:#E6EDF3">, args);</span></span>
<span class="line"><span style="color:#E6EDF3">        rafId </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> null</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">      });</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">  };</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> smoothScrollHandler</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> rafThrottle</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#8B949E">  // Update UI based on scroll</span></span>
<span class="line"><span style="color:#D2A8FF">  updateParallaxEffect</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">window.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'scroll'</span><span style="color:#E6EDF3">, smoothScrollHandler);</span></span>
<span class="line"></span></code></pre>
<h3 id="2-web-workers">2. Web Workers</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// worker.js</span></span>
<span class="line"><span style="color:#E6EDF3">self.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'message'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">e</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#E6EDF3"> { </span><span style="color:#79C0FF">type</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">data</span><span style="color:#E6EDF3"> } </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> e.data;</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  if</span><span style="color:#E6EDF3"> (type </span><span style="color:#FF7B72">===</span><span style="color:#A5D6FF"> 'HEAVY_COMPUTATION'</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> result</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> performHeavyComputation</span><span style="color:#E6EDF3">(data);</span></span>
<span class="line"><span style="color:#E6EDF3">    self.</span><span style="color:#D2A8FF">postMessage</span><span style="color:#E6EDF3">({ type: </span><span style="color:#A5D6FF">'RESULT'</span><span style="color:#E6EDF3">, result });</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> performHeavyComputation</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">data</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#8B949E">  // CPU-intensive task</span></span>
<span class="line"><span style="color:#FF7B72">  let</span><span style="color:#E6EDF3"> result </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#FF7B72">  for</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">let</span><span style="color:#E6EDF3"> i </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">; i </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#79C0FF"> 1000000000</span><span style="color:#E6EDF3">; i</span><span style="color:#FF7B72">++</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#E6EDF3">    result </span><span style="color:#FF7B72">+=</span><span style="color:#E6EDF3"> Math.</span><span style="color:#D2A8FF">sqrt</span><span style="color:#E6EDF3">(i);</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#E6EDF3"> result;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// main.js</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> worker</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> Worker</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'worker.js'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">worker.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'message'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">e</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">  if</span><span style="color:#E6EDF3"> (e.data.type </span><span style="color:#FF7B72">===</span><span style="color:#A5D6FF"> 'RESULT'</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#E6EDF3">    console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'Result:'</span><span style="color:#E6EDF3">, e.data.result);</span></span>
<span class="line"><span style="color:#D2A8FF">    updateUI</span><span style="color:#E6EDF3">(e.data.result);</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">worker.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'error'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">error</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  console.</span><span style="color:#D2A8FF">error</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'Worker error:'</span><span style="color:#E6EDF3">, error);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Send data to worker</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> processData</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">data</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#E6EDF3">  worker.</span><span style="color:#D2A8FF">postMessage</span><span style="color:#E6EDF3">({ type: </span><span style="color:#A5D6FF">'HEAVY_COMPUTATION'</span><span style="color:#E6EDF3">, data });</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Shared Worker for multiple tabs</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> sharedWorker</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> SharedWorker</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'shared-worker.js'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">sharedWorker.port.</span><span style="color:#D2A8FF">start</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">sharedWorker.port.</span><span style="color:#D2A8FF">postMessage</span><span style="color:#E6EDF3">({ type: </span><span style="color:#A5D6FF">'CONNECT'</span><span style="color:#E6EDF3"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">sharedWorker.port.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'message'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">e</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'Message from shared worker:'</span><span style="color:#E6EDF3">, e.data);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Worker pool for parallel processing</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> WorkerPool</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">  constructor</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">workerPath</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">poolSize</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> navigator.hardwareConcurrency) {</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.workers </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [];</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.queue </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [];</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">let</span><span style="color:#E6EDF3"> i </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">; i </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#E6EDF3"> poolSize; i</span><span style="color:#FF7B72">++</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">      const</span><span style="color:#79C0FF"> worker</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> Worker</span><span style="color:#E6EDF3">(workerPath);</span></span>
<span class="line"><span style="color:#E6EDF3">      worker.busy </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> false</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">      worker.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'message'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">e</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">handleMessage</span><span style="color:#E6EDF3">(worker, e));</span></span>
<span class="line"><span style="color:#79C0FF">      this</span><span style="color:#E6EDF3">.workers.</span><span style="color:#D2A8FF">push</span><span style="color:#E6EDF3">(worker);</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  execute</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">data</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#FF7B72"> new</span><span style="color:#79C0FF"> Promise</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">resolve</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">reject</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">      this</span><span style="color:#E6EDF3">.queue.</span><span style="color:#D2A8FF">push</span><span style="color:#E6EDF3">({ data, resolve, reject });</span></span>
<span class="line"><span style="color:#79C0FF">      this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">processQueue</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">    });</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  processQueue</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> availableWorker</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.workers.</span><span style="color:#D2A8FF">find</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">w</span><span style="color:#FF7B72"> =></span><span style="color:#FF7B72"> !</span><span style="color:#E6EDF3">w.busy);</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">!</span><span style="color:#E6EDF3">availableWorker </span><span style="color:#FF7B72">||</span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.queue.</span><span style="color:#79C0FF">length</span><span style="color:#FF7B72"> ===</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">return</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#E6EDF3"> { </span><span style="color:#79C0FF">data</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">resolve</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">reject</span><span style="color:#E6EDF3"> } </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.queue.</span><span style="color:#D2A8FF">shift</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">    availableWorker.busy </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> true</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">    availableWorker.currentResolve </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> resolve;</span></span>
<span class="line"><span style="color:#E6EDF3">    availableWorker.</span><span style="color:#D2A8FF">postMessage</span><span style="color:#E6EDF3">({ type: </span><span style="color:#A5D6FF">'PROCESS'</span><span style="color:#E6EDF3">, data });</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  handleMessage</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">worker</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">event</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#E6EDF3">    worker.busy </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> false</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (worker.currentResolve) {</span></span>
<span class="line"><span style="color:#E6EDF3">      worker.</span><span style="color:#D2A8FF">currentResolve</span><span style="color:#E6EDF3">(event.data);</span></span>
<span class="line"><span style="color:#E6EDF3">      worker.currentResolve </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> null</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">processQueue</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  terminate</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.workers.</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">w</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> w.</span><span style="color:#D2A8FF">terminate</span><span style="color:#E6EDF3">());</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Usage</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> pool</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> WorkerPool</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'worker.js'</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> tasks</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> Array.</span><span style="color:#D2A8FF">from</span><span style="color:#E6EDF3">({ length: </span><span style="color:#79C0FF">100</span><span style="color:#E6EDF3"> }, (</span><span style="color:#FFA657">_</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">i</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> i);</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> results</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> await</span><span style="color:#79C0FF"> Promise</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">all</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#E6EDF3">  tasks.</span><span style="color:#D2A8FF">map</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">task</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> pool.</span><span style="color:#D2A8FF">execute</span><span style="color:#E6EDF3">(task))</span></span>
<span class="line"><span style="color:#E6EDF3">);</span></span>
<span class="line"></span></code></pre>
<h3 id="3-code-splitting-strategies">3. Code Splitting Strategies</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Dynamic imports</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> loadModule</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> module</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> await</span><span style="color:#FF7B72"> import</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'./heavy-module.js'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#79C0FF">  module</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">doSomething</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Conditional loading</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> loadFeature</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">  if</span><span style="color:#E6EDF3"> (user.isPremium) {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#E6EDF3"> { </span><span style="color:#79C0FF">PremiumFeature</span><span style="color:#E6EDF3"> } </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#FF7B72"> import</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'./premium-feature.js'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> PremiumFeature</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#79C0FF"> null</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Webpack magic comments</span></span>
<span class="line"><span style="color:#D2A8FF">import</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#8B949E">  /* webpackChunkName: "chart" */</span></span>
<span class="line"><span style="color:#8B949E">  /* webpackPrefetch: true */</span></span>
<span class="line"><span style="color:#A5D6FF">  './chart-library.js'</span></span>
<span class="line"><span style="color:#E6EDF3">).</span><span style="color:#D2A8FF">then</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">module</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  module</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">renderChart</span><span style="color:#E6EDF3">(data);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// React loadable components</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> loadable </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> '@loadable/component'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> HeavyComponent</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> loadable</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#FF7B72"> import</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'./HeavyComponent'</span><span style="color:#E6EDF3">), {</span></span>
<span class="line"><span style="color:#E6EDF3">  fallback: &#x3C;</span><span style="color:#7EE787">LoadingSpinner</span><span style="color:#E6EDF3"> />,</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Preload on hover</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> PreloadLink</span><span style="color:#E6EDF3">({ </span><span style="color:#FFA657">to</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">children</span><span style="color:#E6EDF3"> }) {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#D2A8FF"> handleMouseEnter</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> () </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#D2A8FF">    import</span><span style="color:#E6EDF3">(</span><span style="color:#8B949E">/* webpackPrefetch: true */</span><span style="color:#A5D6FF"> `./pages${</span><span style="color:#E6EDF3">to</span><span style="color:#A5D6FF">}`</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">  };</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#E6EDF3"> (</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;</span><span style="color:#7EE787">Link</span><span style="color:#79C0FF"> to</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">to</span><span style="color:#FF7B72">}</span><span style="color:#79C0FF"> onMouseEnter</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">handleMouseEnter</span><span style="color:#FF7B72">}</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#FF7B72">      {</span><span style="color:#E6EDF3">children</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;/</span><span style="color:#7EE787">Link</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Progressive enhancement</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> FeatureLoader</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">  static</span><span style="color:#FF7B72"> async</span><span style="color:#D2A8FF"> loadIfSupported</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">feature</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">modulePath</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">!</span><span style="color:#79C0FF">this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">isSupported</span><span style="color:#E6EDF3">(feature)) {</span></span>
<span class="line"><span style="color:#E6EDF3">      console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">`${</span><span style="color:#E6EDF3">feature</span><span style="color:#A5D6FF">} not supported`</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">      return</span><span style="color:#79C0FF"> null</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#FF7B72"> await</span><span style="color:#D2A8FF"> import</span><span style="color:#E6EDF3">(modulePath);</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  static</span><span style="color:#D2A8FF"> isSupported</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">feature</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> support</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#A5D6FF">      'webgl'</span><span style="color:#E6EDF3">: () </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">        const</span><span style="color:#79C0FF"> canvas</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> document.</span><span style="color:#D2A8FF">createElement</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'canvas'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#FF7B72"> !!</span><span style="color:#E6EDF3">(canvas.</span><span style="color:#D2A8FF">getContext</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'webgl'</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">||</span><span style="color:#E6EDF3"> canvas.</span><span style="color:#D2A8FF">getContext</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'experimental-webgl'</span><span style="color:#E6EDF3">));</span></span>
<span class="line"><span style="color:#E6EDF3">      },</span></span>
<span class="line"><span style="color:#A5D6FF">      'webrtc'</span><span style="color:#E6EDF3">: () </span><span style="color:#FF7B72">=></span><span style="color:#FF7B72"> !!</span><span style="color:#E6EDF3">(navigator.mediaDevices </span><span style="color:#FF7B72">&#x26;&#x26;</span><span style="color:#E6EDF3"> navigator.mediaDevices.getUserMedia),</span></span>
<span class="line"><span style="color:#A5D6FF">      'serviceWorker'</span><span style="color:#E6EDF3">: () </span><span style="color:#FF7B72">=></span><span style="color:#A5D6FF"> 'serviceWorker'</span><span style="color:#FF7B72"> in</span><span style="color:#E6EDF3"> navigator</span></span>
<span class="line"><span style="color:#E6EDF3">    };</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> support[feature] </span><span style="color:#FF7B72">?</span><span style="color:#E6EDF3"> support[feature]() </span><span style="color:#FF7B72">:</span><span style="color:#79C0FF"> false</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Usage</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> webglModule</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> FeatureLoader.</span><span style="color:#D2A8FF">loadIfSupported</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'webgl'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'./webgl-features.js'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">if</span><span style="color:#E6EDF3"> (webglModule) {</span></span>
<span class="line"><span style="color:#E6EDF3">  webglModule.</span><span style="color:#D2A8FF">initialize</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
<h2 id="css-optimization-css">CSS Optimization {#css}</h2>
<h3 id="1-css-performance-best-practices">1. CSS Performance Best Practices</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="css"><code><span class="line"><span style="color:#8B949E">/* ❌ Bad: Expensive selectors */</span></span>
<span class="line"><span style="color:#7EE787">div</span><span style="color:#FF7B72"> ></span><span style="color:#7EE787"> div</span><span style="color:#FF7B72"> ></span><span style="color:#7EE787"> div</span><span style="color:#FF7B72"> ></span><span style="color:#7EE787"> p</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  color</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">red</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7EE787">*</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  box-sizing</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">border-box</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">/* ✅ Good: Specific, shallow selectors */</span></span>
<span class="line"><span style="color:#79C0FF">.paragraph</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  color</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">red</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">/* Reset with specificity */</span></span>
<span class="line"><span style="color:#7EE787">*</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#7EE787">*</span><span style="color:#79C0FF">::before</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#7EE787">*</span><span style="color:#79C0FF">::after</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  box-sizing</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">border-box</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">/* ❌ Bad: Triggers layout */</span></span>
<span class="line"><span style="color:#79C0FF">.element</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  width</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">100</span><span style="color:#FF7B72">px</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">  height</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">100</span><span style="color:#FF7B72">px</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">  top</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">10</span><span style="color:#FF7B72">px</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">  left</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">10</span><span style="color:#FF7B72">px</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">/* ✅ Good: Uses transform for animations */</span></span>
<span class="line"><span style="color:#79C0FF">.element</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  width</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">100</span><span style="color:#FF7B72">px</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">  height</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">100</span><span style="color:#FF7B72">px</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">  transform</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">translate</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">10</span><span style="color:#FF7B72">px</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">10</span><span style="color:#FF7B72">px</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#79C0FF">  will-change</span><span style="color:#E6EDF3">: transform;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">/* Use containment for isolated components */</span></span>
<span class="line"><span style="color:#79C0FF">.card</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  contain</span><span style="color:#E6EDF3">: layout </span><span style="color:#79C0FF">style</span><span style="color:#E6EDF3"> paint;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF">.isolated-component</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  contain</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">content</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">/* Content visibility for off-screen content */</span></span>
<span class="line"><span style="color:#79C0FF">.long-article</span><span style="color:#7EE787"> section</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  content-visibility</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">auto</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">  contain-intrinsic-size</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">0</span><span style="color:#79C0FF"> 500</span><span style="color:#FF7B72">px</span><span style="color:#E6EDF3">; </span><span style="color:#8B949E">/* Estimated height */</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">/* GPU acceleration */</span></span>
<span class="line"><span style="color:#79C0FF">.animated</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  transform</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">translateZ</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">); </span><span style="color:#8B949E">/* Force GPU layer */</span></span>
<span class="line"><span style="color:#79C0FF">  will-change</span><span style="color:#E6EDF3">: transform; </span><span style="color:#8B949E">/* Hint to browser */</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">/* Efficient animations */</span></span>
<span class="line"><span style="color:#FF7B72">@keyframes</span><span style="color:#FFA657"> slide</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  from</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">    transform</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">translateX</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">-100</span><span style="color:#FF7B72">%</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#79C0FF">  to</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">    transform</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">translateX</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF">.sliding-element</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">  animation</span><span style="color:#E6EDF3">: slide </span><span style="color:#79C0FF">0.3</span><span style="color:#FF7B72">s</span><span style="color:#79C0FF"> ease-out</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
<h3 id="2-css-loading-strategies">2. CSS Loading Strategies</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#8B949E">&#x3C;!-- Critical CSS inline --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#8B949E">  /* Above-the-fold styles */</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- Preload non-critical CSS --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preload"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"styles.css"</span><span style="color:#79C0FF"> as</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"style"</span><span style="color:#79C0FF"> onload</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"</span><span style="color:#79C0FF">this</span><span style="color:#A5D6FF">.</span><span style="color:#E6EDF3">rel</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">'stylesheet'"</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- Font loading strategies --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preconnect"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"https://fonts.googleapis.com"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preconnect"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"https://fonts.gstatic.com"</span><span style="color:#79C0FF"> crossorigin</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- ❌ Bad: Blocking font load --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"https://fonts.googleapis.com/css2?family=Roboto"</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"stylesheet"</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- ✅ Good: Optimized font load --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"https://fonts.googleapis.com/css2?family=Roboto&#x26;display=swap"</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"stylesheet"</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#8B949E">  /* Font loading with fallback */</span></span>
<span class="line"><span style="color:#FF7B72">  @font-face</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">    font-family</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'MyFont'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">    src</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">url</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'/fonts/myfont.woff2'</span><span style="color:#E6EDF3">) </span><span style="color:#79C0FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'woff2'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#79C0FF">    font-display</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">swap</span><span style="color:#E6EDF3">; </span><span style="color:#8B949E">/* Show fallback immediately */</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#7EE787">  body</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">    font-family</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'MyFont'</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">-apple-system</span><span style="color:#E6EDF3">, BlinkMacSystemFont, </span><span style="color:#A5D6FF">'Segoe UI'</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">sans-serif</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- Variable fonts for better performance --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#FF7B72">  @font-face</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">    font-family</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'Variable Font'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">    src</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">url</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'/fonts/variable-font.woff2'</span><span style="color:#E6EDF3">) </span><span style="color:#79C0FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'woff2-variations'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#79C0FF">    font-weight</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">100</span><span style="color:#79C0FF"> 900</span><span style="color:#E6EDF3">; </span><span style="color:#8B949E">/* Full weight range */</span></span>
<span class="line"><span style="color:#79C0FF">    font-style</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">normal</span><span style="color:#79C0FF"> italic</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span></code></pre>
<h3 id="3-css-in-js-performance">3. CSS-in-JS Performance</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Styled-components with SSR</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> styled </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'styled-components'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> { ServerStyleSheet } </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'styled-components'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Extract critical CSS on server</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> sheet</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> ServerStyleSheet</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> html</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> renderToString</span><span style="color:#E6EDF3">(sheet.</span><span style="color:#D2A8FF">collectStyles</span><span style="color:#E6EDF3">(&#x3C;</span><span style="color:#7EE787">App</span><span style="color:#E6EDF3"> />));</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> styleTags</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> sheet.</span><span style="color:#D2A8FF">getStyleTags</span><span style="color:#E6EDF3">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Emotion with zero-runtime</span></span>
<span class="line"><span style="color:#8B949E">/** </span><span style="color:#FF7B72">@jsxImportSource</span><span style="color:#8B949E"> @emotion/react */</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> { css } </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> '@emotion/react'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Styles computed at build time</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> styles</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> css</span><span style="color:#A5D6FF">`</span></span>
<span class="line"><span style="color:#A5D6FF">  color: ${</span><span style="color:#E6EDF3">theme</span><span style="color:#A5D6FF">.</span><span style="color:#E6EDF3">primary</span><span style="color:#A5D6FF">};</span></span>
<span class="line"><span style="color:#A5D6FF">  padding: 1rem;</span></span>
<span class="line"><span style="color:#A5D6FF">`</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// CSS Modules for optimal performance</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> styles </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> './Component.module.css'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> Component</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#E6EDF3"> &#x3C;</span><span style="color:#7EE787">div</span><span style="color:#79C0FF"> className</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">styles.container</span><span style="color:#FF7B72">}</span><span style="color:#E6EDF3">>Content&#x3C;/</span><span style="color:#7EE787">div</span><span style="color:#E6EDF3">>;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Atomic CSS with Tailwind</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">div</span><span style="color:#79C0FF"> className</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"flex items-center justify-between p-4 bg-white shadow-lg rounded-lg"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  Content</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">div</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Dynamic styles optimization</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> Button</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> styled.</span><span style="color:#D2A8FF">button</span><span style="color:#A5D6FF">`</span></span>
<span class="line"><span style="color:#A5D6FF">  /* Static styles - extracted once */</span></span>
<span class="line"><span style="color:#A5D6FF">  padding: 1rem 2rem;</span></span>
<span class="line"><span style="color:#A5D6FF">  border-radius: 4px;</span></span>
<span class="line"><span style="color:#A5D6FF">  </span></span>
<span class="line"><span style="color:#A5D6FF">  /* Dynamic styles - computed per instance */</span></span>
<span class="line"><span style="color:#A5D6FF">  ${</span><span style="color:#79C0FF">props</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> props</span><span style="color:#A5D6FF">.</span><span style="color:#E6EDF3">variant</span><span style="color:#FF7B72"> ===</span><span style="color:#A5D6FF"> 'primary'</span><span style="color:#FF7B72"> &#x26;&#x26;</span><span style="color:#A5D6FF"> `</span></span>
<span class="line"><span style="color:#A5D6FF">    background: blue;</span></span>
<span class="line"><span style="color:#A5D6FF">    color: white;</span></span>
<span class="line"><span style="color:#A5D6FF">  `}</span></span>
<span class="line"><span style="color:#A5D6FF">`</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Better: Use CSS custom properties</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> Button</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> styled.</span><span style="color:#D2A8FF">button</span><span style="color:#A5D6FF">`</span></span>
<span class="line"><span style="color:#A5D6FF">  padding: 1rem 2rem;</span></span>
<span class="line"><span style="color:#A5D6FF">  border-radius: 4px;</span></span>
<span class="line"><span style="color:#A5D6FF">  background: var(--button-bg);</span></span>
<span class="line"><span style="color:#A5D6FF">  color: var(--button-color);</span></span>
<span class="line"><span style="color:#A5D6FF">`</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">Button</span><span style="color:#79C0FF"> style</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">{</span></span>
<span class="line"><span style="color:#A5D6FF">  '--button-bg'</span><span style="color:#E6EDF3">: variant </span><span style="color:#FF7B72">===</span><span style="color:#A5D6FF"> 'primary'</span><span style="color:#FF7B72"> ?</span><span style="color:#A5D6FF"> 'blue'</span><span style="color:#FF7B72"> :</span><span style="color:#A5D6FF"> 'gray'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">  '--button-color'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'white'</span></span>
<span class="line"><span style="color:#E6EDF3">}</span><span style="color:#FF7B72">}</span><span style="color:#E6EDF3"> /></span></span>
<span class="line"></span></code></pre>
<h2 id="image-and-media-optimization-images">Image and Media Optimization {#images}</h2>
<h3 id="1-modern-image-formats">1. Modern Image Formats</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#8B949E">&#x3C;!-- Responsive images with srcset --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">img</span></span>
<span class="line"><span style="color:#79C0FF">  src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"image-800.jpg"</span></span>
<span class="line"><span style="color:#79C0FF">  srcset</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"</span></span>
<span class="line"><span style="color:#A5D6FF">    image-400.jpg 400w,</span></span>
<span class="line"><span style="color:#A5D6FF">    image-800.jpg 800w,</span></span>
<span class="line"><span style="color:#A5D6FF">    image-1200.jpg 1200w</span></span>
<span class="line"><span style="color:#A5D6FF">  "</span></span>
<span class="line"><span style="color:#79C0FF">  sizes</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"(max-width: 600px) 400px,</span></span>
<span class="line"><span style="color:#A5D6FF">         (max-width: 1000px) 800px,</span></span>
<span class="line"><span style="color:#A5D6FF">         1200px"</span></span>
<span class="line"><span style="color:#79C0FF">  alt</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"Description"</span></span>
<span class="line"><span style="color:#79C0FF">  loading</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"lazy"</span></span>
<span class="line"><span style="color:#79C0FF">  decoding</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"async"</span></span>
<span class="line"><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- Modern formats with fallback --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">picture</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">source</span><span style="color:#79C0FF"> srcset</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"image.avif"</span><span style="color:#79C0FF"> type</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"image/avif"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">source</span><span style="color:#79C0FF"> srcset</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"image.webp"</span><span style="color:#79C0FF"> type</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"image/webp"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">img</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"image.jpg"</span><span style="color:#79C0FF"> alt</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"Description"</span><span style="color:#79C0FF"> loading</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"lazy"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">picture</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- Art direction --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">picture</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">source</span></span>
<span class="line"><span style="color:#79C0FF">    media</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"(min-width: 1000px)"</span></span>
<span class="line"><span style="color:#79C0FF">    srcset</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"desktop-image.jpg"</span></span>
<span class="line"><span style="color:#E6EDF3">  ></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">source</span></span>
<span class="line"><span style="color:#79C0FF">    media</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"(min-width: 600px)"</span></span>
<span class="line"><span style="color:#79C0FF">    srcset</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"tablet-image.jpg"</span></span>
<span class="line"><span style="color:#E6EDF3">  ></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">img</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"mobile-image.jpg"</span><span style="color:#79C0FF"> alt</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"Description"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">picture</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- Background images with image-set --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#79C0FF">  .hero</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#79C0FF">    background-image</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">image-set</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#79C0FF">      url</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'hero.avif'</span><span style="color:#E6EDF3">) </span><span style="color:#FFA657">type(</span><span style="color:#A5D6FF">'image/avif'</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#79C0FF">      url</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'hero.webp'</span><span style="color:#E6EDF3">) type(</span><span style="color:#A5D6FF">'image/webp'</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#79C0FF">      url</span><span style="color:#E6EDF3">('</span><span style="color:#79C0FF">hero</span><span style="color:#E6EDF3">.</span><span style="color:#79C0FF">jpg</span><span style="color:#E6EDF3">') </span><span style="color:#79C0FF">type</span><span style="color:#E6EDF3">('</span><span style="color:#79C0FF">image</span><span style="color:#E6EDF3">/</span><span style="color:#79C0FF">jpeg</span><span style="color:#E6EDF3">')</span></span>
<span class="line"><span style="color:#E6EDF3">    );</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span></code></pre>
<h3 id="2-image-optimization-techniques">2. Image Optimization Techniques</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Sharp for Node.js image processing</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> sharp</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> require</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'sharp'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> optimizeImage</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">inputPath</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">outputPath</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">  await</span><span style="color:#D2A8FF"> sharp</span><span style="color:#E6EDF3">(inputPath)</span></span>
<span class="line"><span style="color:#E6EDF3">    .</span><span style="color:#D2A8FF">resize</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">1200</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">800</span><span style="color:#E6EDF3">, {</span></span>
<span class="line"><span style="color:#E6EDF3">      fit: </span><span style="color:#A5D6FF">'cover'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      position: </span><span style="color:#A5D6FF">'center'</span></span>
<span class="line"><span style="color:#E6EDF3">    })</span></span>
<span class="line"><span style="color:#E6EDF3">    .</span><span style="color:#D2A8FF">webp</span><span style="color:#E6EDF3">({ quality: </span><span style="color:#79C0FF">80</span><span style="color:#E6EDF3"> })</span></span>
<span class="line"><span style="color:#E6EDF3">    .</span><span style="color:#D2A8FF">toFile</span><span style="color:#E6EDF3">(outputPath);</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Generate responsive image set</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> generateResponsiveImages</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">inputPath</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">outputDir</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> sizes</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> [</span><span style="color:#79C0FF">400</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">800</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">1200</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">1600</span><span style="color:#E6EDF3">];</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  await</span><span style="color:#79C0FF"> Promise</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">all</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#E6EDF3">    sizes.</span><span style="color:#D2A8FF">map</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">async</span><span style="color:#E6EDF3"> (</span><span style="color:#FFA657">size</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">      await</span><span style="color:#D2A8FF"> sharp</span><span style="color:#E6EDF3">(inputPath)</span></span>
<span class="line"><span style="color:#E6EDF3">        .</span><span style="color:#D2A8FF">resize</span><span style="color:#E6EDF3">(size)</span></span>
<span class="line"><span style="color:#E6EDF3">        .</span><span style="color:#D2A8FF">webp</span><span style="color:#E6EDF3">({ quality: </span><span style="color:#79C0FF">80</span><span style="color:#E6EDF3"> })</span></span>
<span class="line"><span style="color:#E6EDF3">        .</span><span style="color:#D2A8FF">toFile</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">`${</span><span style="color:#E6EDF3">outputDir</span><span style="color:#A5D6FF">}/image-${</span><span style="color:#E6EDF3">size</span><span style="color:#A5D6FF">}.webp`</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">      </span></span>
<span class="line"><span style="color:#FF7B72">      await</span><span style="color:#D2A8FF"> sharp</span><span style="color:#E6EDF3">(inputPath)</span></span>
<span class="line"><span style="color:#E6EDF3">        .</span><span style="color:#D2A8FF">resize</span><span style="color:#E6EDF3">(size)</span></span>
<span class="line"><span style="color:#E6EDF3">        .</span><span style="color:#D2A8FF">jpeg</span><span style="color:#E6EDF3">({ quality: </span><span style="color:#79C0FF">80</span><span style="color:#E6EDF3">, progressive: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3"> })</span></span>
<span class="line"><span style="color:#E6EDF3">        .</span><span style="color:#D2A8FF">toFile</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">`${</span><span style="color:#E6EDF3">outputDir</span><span style="color:#A5D6FF">}/image-${</span><span style="color:#E6EDF3">size</span><span style="color:#A5D6FF">}.jpg`</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">    })</span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Progressive JPEG</span></span>
<span class="line"><span style="color:#FF7B72">await</span><span style="color:#D2A8FF"> sharp</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'input.jpg'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">  .</span><span style="color:#D2A8FF">jpeg</span><span style="color:#E6EDF3">({ quality: </span><span style="color:#79C0FF">80</span><span style="color:#E6EDF3">, progressive: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3"> })</span></span>
<span class="line"><span style="color:#E6EDF3">  .</span><span style="color:#D2A8FF">toFile</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'output.jpg'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Blur placeholder (LQIP)</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> generatePlaceholder</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">inputPath</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> buffer</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> await</span><span style="color:#D2A8FF"> sharp</span><span style="color:#E6EDF3">(inputPath)</span></span>
<span class="line"><span style="color:#E6EDF3">    .</span><span style="color:#D2A8FF">resize</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">20</span><span style="color:#E6EDF3">) </span><span style="color:#8B949E">// Tiny size</span></span>
<span class="line"><span style="color:#E6EDF3">    .</span><span style="color:#D2A8FF">blur</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">10</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    .</span><span style="color:#D2A8FF">toBuffer</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#A5D6FF"> `data:image/jpeg;base64,${</span><span style="color:#E6EDF3">buffer</span><span style="color:#A5D6FF">.</span><span style="color:#D2A8FF">toString</span><span style="color:#A5D6FF">(</span><span style="color:#A5D6FF">'base64'</span><span style="color:#A5D6FF">)</span><span style="color:#A5D6FF">}`</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Client-side lazy loading with blur-up</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> LazyImage</span><span style="color:#E6EDF3">({ </span><span style="color:#FFA657">src</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">placeholder</span><span style="color:#E6EDF3"> }) {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#E6EDF3"> [</span><span style="color:#79C0FF">loaded</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">setLoaded</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">=</span><span style="color:#D2A8FF"> useState</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">false</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#E6EDF3"> (</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;</span><span style="color:#7EE787">div</span><span style="color:#79C0FF"> className</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"image-container"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">      &#x3C;</span><span style="color:#7EE787">img</span></span>
<span class="line"><span style="color:#79C0FF">        src</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">placeholder</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">        className</span><span style="color:#FF7B72">={</span><span style="color:#A5D6FF">`placeholder ${</span><span style="color:#E6EDF3">loaded</span><span style="color:#FF7B72"> ?</span><span style="color:#A5D6FF"> 'hidden'</span><span style="color:#FF7B72"> :</span><span style="color:#A5D6FF"> ''}`</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">        alt</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">""</span></span>
<span class="line"><span style="color:#E6EDF3">      /></span></span>
<span class="line"><span style="color:#E6EDF3">      &#x3C;</span><span style="color:#7EE787">img</span></span>
<span class="line"><span style="color:#79C0FF">        src</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">src</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">        className</span><span style="color:#FF7B72">={</span><span style="color:#A5D6FF">`main-image ${</span><span style="color:#E6EDF3">loaded</span><span style="color:#FF7B72"> ?</span><span style="color:#A5D6FF"> 'visible'</span><span style="color:#FF7B72"> :</span><span style="color:#A5D6FF"> ''}`</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">        onLoad</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">() </span><span style="color:#FF7B72">=></span><span style="color:#D2A8FF"> setLoaded</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">)</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">        loading</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"lazy"</span></span>
<span class="line"><span style="color:#79C0FF">        alt</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"Description"</span></span>
<span class="line"><span style="color:#E6EDF3">      /></span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;/</span><span style="color:#7EE787">div</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
<h3 id="3-video-optimization">3. Video Optimization</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#8B949E">&#x3C;!-- Optimized video delivery --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">video</span></span>
<span class="line"><span style="color:#79C0FF">  width</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"1280"</span></span>
<span class="line"><span style="color:#79C0FF">  height</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"720"</span></span>
<span class="line"><span style="color:#79C0FF">  poster</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"poster.jpg"</span></span>
<span class="line"><span style="color:#79C0FF">  preload</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"metadata"</span></span>
<span class="line"><span style="color:#79C0FF">  controls</span></span>
<span class="line"><span style="color:#79C0FF">  playsinline</span></span>
<span class="line"><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">source</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"video.webm"</span><span style="color:#79C0FF"> type</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"video/webm"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">source</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"video.mp4"</span><span style="color:#79C0FF"> type</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"video/mp4"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  Your browser doesn't support video.</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">video</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- Lazy load video --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">video</span></span>
<span class="line"><span style="color:#79C0FF">  data-src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"video.mp4"</span></span>
<span class="line"><span style="color:#79C0FF">  poster</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"poster.jpg"</span></span>
<span class="line"><span style="color:#79C0FF">  class</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"lazy-video"</span></span>
<span class="line"><span style="color:#E6EDF3">>&#x3C;/</span><span style="color:#7EE787">video</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> videoObserver</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> IntersectionObserver</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">entries</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  entries.</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">entry</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (entry.isIntersecting) {</span></span>
<span class="line"><span style="color:#FF7B72">      const</span><span style="color:#79C0FF"> video</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> entry.target;</span></span>
<span class="line"><span style="color:#E6EDF3">      video.src </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> video.dataset.src;</span></span>
<span class="line"><span style="color:#E6EDF3">      video.</span><span style="color:#D2A8FF">load</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">      videoObserver.</span><span style="color:#D2A8FF">unobserve</span><span style="color:#E6EDF3">(video);</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">document.</span><span style="color:#D2A8FF">querySelectorAll</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'.lazy-video'</span><span style="color:#E6EDF3">).</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">video</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  videoObserver.</span><span style="color:#D2A8FF">observe</span><span style="color:#E6EDF3">(video);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">&#x3C;!-- Adaptive streaming with HLS --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">video</span><span style="color:#79C0FF"> id</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"video"</span><span style="color:#79C0FF"> controls</span><span style="color:#E6EDF3">>&#x3C;/</span><span style="color:#7EE787">video</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">script</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"https://cdn.jsdelivr.net/npm/hls.js@latest"</span><span style="color:#E6EDF3">>&#x3C;/</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> video</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> document.</span><span style="color:#D2A8FF">getElementById</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'video'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> hls</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> Hls</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#E6EDF3">  hls.</span><span style="color:#D2A8FF">loadSource</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'video.m3u8'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">  hls.</span><span style="color:#D2A8FF">attachMedia</span><span style="color:#E6EDF3">(video);</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#E6EDF3">  hls.</span><span style="color:#D2A8FF">on</span><span style="color:#E6EDF3">(Hls.Events.</span><span style="color:#79C0FF">MANIFEST_PARSED</span><span style="color:#E6EDF3">, () </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">    video.</span><span style="color:#D2A8FF">play</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span></code></pre>
<h2 id="network-optimization-network">Network Optimization {#network}</h2>
<h3 id="1-http2-and-http3">1. HTTP/2 and HTTP/3</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// HTTP/2 Server Push (Node.js)</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> http2</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> require</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'http2'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> fs</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> require</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'fs'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> server</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> http2.</span><span style="color:#D2A8FF">createSecureServer</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">  key: fs.</span><span style="color:#D2A8FF">readFileSync</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'key.pem'</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#E6EDF3">  cert: fs.</span><span style="color:#D2A8FF">readFileSync</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'cert.pem'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">server.</span><span style="color:#D2A8FF">on</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'stream'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">stream</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">headers</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">  if</span><span style="color:#E6EDF3"> (headers[</span><span style="color:#A5D6FF">':path'</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">===</span><span style="color:#A5D6FF"> '/'</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#8B949E">    // Push critical resources</span></span>
<span class="line"><span style="color:#E6EDF3">    stream.</span><span style="color:#D2A8FF">pushStream</span><span style="color:#E6EDF3">({ </span><span style="color:#A5D6FF">':path'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'/styles.css'</span><span style="color:#E6EDF3"> }, (</span><span style="color:#FFA657">err</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">pushStream</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">      if</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">!</span><span style="color:#E6EDF3">err) {</span></span>
<span class="line"><span style="color:#E6EDF3">        pushStream.</span><span style="color:#D2A8FF">respondWithFile</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'styles.css'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">      }</span></span>
<span class="line"><span style="color:#E6EDF3">    });</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#E6EDF3">    stream.</span><span style="color:#D2A8FF">pushStream</span><span style="color:#E6EDF3">({ </span><span style="color:#A5D6FF">':path'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'/app.js'</span><span style="color:#E6EDF3"> }, (</span><span style="color:#FFA657">err</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">pushStream</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">      if</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">!</span><span style="color:#E6EDF3">err) {</span></span>
<span class="line"><span style="color:#E6EDF3">        pushStream.</span><span style="color:#D2A8FF">respondWithFile</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'app.js'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">      }</span></span>
<span class="line"><span style="color:#E6EDF3">    });</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#E6EDF3">    stream.</span><span style="color:#D2A8FF">respondWithFile</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'index.html'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Early Hints (103 status)</span></span>
<span class="line"><span style="color:#E6EDF3">app.</span><span style="color:#D2A8FF">get</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'/'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">req</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">res</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#8B949E">  // Send early hints</span></span>
<span class="line"><span style="color:#E6EDF3">  res.</span><span style="color:#D2A8FF">writeEarlyHints</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">    link: [</span></span>
<span class="line"><span style="color:#A5D6FF">      '&#x3C;/styles.css>; rel=preload; as=style'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">      '&#x3C;/app.js>; rel=preload; as=script'</span></span>
<span class="line"><span style="color:#E6EDF3">    ]</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  // Send actual response</span></span>
<span class="line"><span style="color:#E6EDF3">  res.</span><span style="color:#D2A8FF">sendFile</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'index.html'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span></code></pre>
<h3 id="2-caching-strategies">2. Caching Strategies</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Service Worker caching</span></span>
<span class="line"><span style="color:#E6EDF3">self.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'install'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">event</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  event.</span><span style="color:#D2A8FF">waitUntil</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#E6EDF3">    caches.</span><span style="color:#D2A8FF">open</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'v1'</span><span style="color:#E6EDF3">).</span><span style="color:#D2A8FF">then</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">cache</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">      return</span><span style="color:#E6EDF3"> cache.</span><span style="color:#D2A8FF">addAll</span><span style="color:#E6EDF3">([</span></span>
<span class="line"><span style="color:#A5D6FF">        '/'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">        '/styles.css'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">        '/app.js'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">        '/logo.png'</span></span>
<span class="line"><span style="color:#E6EDF3">      ]);</span></span>
<span class="line"><span style="color:#E6EDF3">    })</span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">self.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'fetch'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">event</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  event.</span><span style="color:#D2A8FF">respondWith</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#E6EDF3">    caches.</span><span style="color:#D2A8FF">match</span><span style="color:#E6EDF3">(event.request).</span><span style="color:#D2A8FF">then</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">response</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#8B949E">      // Cache first, network fallback</span></span>
<span class="line"><span style="color:#FF7B72">      return</span><span style="color:#E6EDF3"> response </span><span style="color:#FF7B72">||</span><span style="color:#D2A8FF"> fetch</span><span style="color:#E6EDF3">(event.request);</span></span>
<span class="line"><span style="color:#E6EDF3">    })</span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Network first, cache fallback</span></span>
<span class="line"><span style="color:#E6EDF3">self.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'fetch'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">event</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  event.</span><span style="color:#D2A8FF">respondWith</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#D2A8FF">    fetch</span><span style="color:#E6EDF3">(event.request)</span></span>
<span class="line"><span style="color:#E6EDF3">      .</span><span style="color:#D2A8FF">then</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">response</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">        const</span><span style="color:#79C0FF"> responseClone</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> response.</span><span style="color:#D2A8FF">clone</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">        caches.</span><span style="color:#D2A8FF">open</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'v1'</span><span style="color:#E6EDF3">).</span><span style="color:#D2A8FF">then</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">cache</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">          cache.</span><span style="color:#D2A8FF">put</span><span style="color:#E6EDF3">(event.request, responseClone);</span></span>
<span class="line"><span style="color:#E6EDF3">        });</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> response;</span></span>
<span class="line"><span style="color:#E6EDF3">      })</span></span>
<span class="line"><span style="color:#E6EDF3">      .</span><span style="color:#D2A8FF">catch</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> caches.</span><span style="color:#D2A8FF">match</span><span style="color:#E6EDF3">(event.request))</span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Stale-while-revalidate</span></span>
<span class="line"><span style="color:#E6EDF3">self.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'fetch'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">event</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  event.</span><span style="color:#D2A8FF">respondWith</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#E6EDF3">    caches.</span><span style="color:#D2A8FF">match</span><span style="color:#E6EDF3">(event.request).</span><span style="color:#D2A8FF">then</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">cachedResponse</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">      const</span><span style="color:#79C0FF"> fetchPromise</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> fetch</span><span style="color:#E6EDF3">(event.request).</span><span style="color:#D2A8FF">then</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">networkResponse</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">        caches.</span><span style="color:#D2A8FF">open</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'v1'</span><span style="color:#E6EDF3">).</span><span style="color:#D2A8FF">then</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">cache</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">          cache.</span><span style="color:#D2A8FF">put</span><span style="color:#E6EDF3">(event.request, networkResponse.</span><span style="color:#D2A8FF">clone</span><span style="color:#E6EDF3">());</span></span>
<span class="line"><span style="color:#E6EDF3">        });</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> networkResponse;</span></span>
<span class="line"><span style="color:#E6EDF3">      });</span></span>
<span class="line"><span style="color:#E6EDF3">      </span></span>
<span class="line"><span style="color:#FF7B72">      return</span><span style="color:#E6EDF3"> cachedResponse </span><span style="color:#FF7B72">||</span><span style="color:#E6EDF3"> fetchPromise;</span></span>
<span class="line"><span style="color:#E6EDF3">    })</span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// HTTP caching headers</span></span>
<span class="line"><span style="color:#E6EDF3">app.</span><span style="color:#D2A8FF">get</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'/api/data'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">req</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">res</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  res.</span><span style="color:#D2A8FF">set</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#A5D6FF">    'Cache-Control'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'public, max-age=3600'</span><span style="color:#E6EDF3">, </span><span style="color:#8B949E">// 1 hour</span></span>
<span class="line"><span style="color:#A5D6FF">    'ETag'</span><span style="color:#E6EDF3">: </span><span style="color:#D2A8FF">generateETag</span><span style="color:#E6EDF3">(data)</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">  res.</span><span style="color:#D2A8FF">json</span><span style="color:#E6EDF3">(data);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">app.</span><span style="color:#D2A8FF">get</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'/static/*'</span><span style="color:#E6EDF3">, (</span><span style="color:#FFA657">req</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">res</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  res.</span><span style="color:#D2A8FF">set</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#A5D6FF">    'Cache-Control'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'public, max-age=31536000, immutable'</span><span style="color:#8B949E"> // 1 year</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">  res.</span><span style="color:#D2A8FF">sendFile</span><span style="color:#E6EDF3">(filePath);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span></code></pre>
<h3 id="3-resource-prioritization">3. Resource Prioritization</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#8B949E">&#x3C;!-- Prioritize critical resources --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Highest priority --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preconnect"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"https://api.example.com"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- High priority --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preload"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"critical.css"</span><span style="color:#79C0FF"> as</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"style"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"preload"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"hero.jpg"</span><span style="color:#79C0FF"> as</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"image"</span><span style="color:#79C0FF"> fetchpriority</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"high"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Normal priority --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"stylesheet"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"styles.css"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Low priority --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"prefetch"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"next-page.html"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"dns-prefetch"</span><span style="color:#79C0FF"> href</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"https://analytics.com"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">head</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">body</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Image priorities --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">img</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"hero.jpg"</span><span style="color:#79C0FF"> fetchpriority</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"high"</span><span style="color:#79C0FF"> alt</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"Hero"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">img</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"secondary.jpg"</span><span style="color:#79C0FF"> fetchpriority</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"low"</span><span style="color:#79C0FF"> loading</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"lazy"</span><span style="color:#79C0FF"> alt</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"Secondary"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  &#x3C;!-- Script priorities --></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">script</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"critical.js"</span><span style="color:#E6EDF3">>&#x3C;/</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">script</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"non-critical.js"</span><span style="color:#79C0FF"> defer</span><span style="color:#E6EDF3">>&#x3C;/</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;</span><span style="color:#7EE787">script</span><span style="color:#79C0FF"> src</span><span style="color:#E6EDF3">=</span><span style="color:#A5D6FF">"analytics.js"</span><span style="color:#79C0FF"> async</span><span style="color:#E6EDF3">>&#x3C;/</span><span style="color:#7EE787">script</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">body</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span></code></pre>
<h2 id="bundle-size-optimization-bundles">Bundle Size Optimization {#bundles}</h2>
<h3 id="1-webpack-configuration">1. Webpack Configuration</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// webpack.config.js</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> TerserPlugin</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> require</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'terser-webpack-plugin'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> CompressionPlugin</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> require</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'compression-webpack-plugin'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#E6EDF3"> { </span><span style="color:#79C0FF">BundleAnalyzerPlugin</span><span style="color:#E6EDF3"> } </span><span style="color:#FF7B72">=</span><span style="color:#D2A8FF"> require</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'webpack-bundle-analyzer'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF">module</span><span style="color:#E6EDF3">.</span><span style="color:#79C0FF">exports</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  mode: </span><span style="color:#A5D6FF">'production'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#E6EDF3">  optimization: {</span></span>
<span class="line"><span style="color:#E6EDF3">    minimize: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">    minimizer: [</span></span>
<span class="line"><span style="color:#FF7B72">      new</span><span style="color:#D2A8FF"> TerserPlugin</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">        terserOptions: {</span></span>
<span class="line"><span style="color:#E6EDF3">          compress: {</span></span>
<span class="line"><span style="color:#E6EDF3">            drop_console: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">, </span><span style="color:#8B949E">// Remove console.log</span></span>
<span class="line"><span style="color:#E6EDF3">            dead_code: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">            unused: </span><span style="color:#79C0FF">true</span></span>
<span class="line"><span style="color:#E6EDF3">          },</span></span>
<span class="line"><span style="color:#E6EDF3">          mangle: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">          format: {</span></span>
<span class="line"><span style="color:#E6EDF3">            comments: </span><span style="color:#79C0FF">false</span></span>
<span class="line"><span style="color:#E6EDF3">          }</span></span>
<span class="line"><span style="color:#E6EDF3">        },</span></span>
<span class="line"><span style="color:#E6EDF3">        extractComments: </span><span style="color:#79C0FF">false</span></span>
<span class="line"><span style="color:#E6EDF3">      })</span></span>
<span class="line"><span style="color:#E6EDF3">    ],</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // Split chunks</span></span>
<span class="line"><span style="color:#E6EDF3">    splitChunks: {</span></span>
<span class="line"><span style="color:#E6EDF3">      chunks: </span><span style="color:#A5D6FF">'all'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      cacheGroups: {</span></span>
<span class="line"><span style="color:#8B949E">        // Vendor chunk</span></span>
<span class="line"><span style="color:#E6EDF3">        vendor: {</span></span>
<span class="line"><span style="color:#E6EDF3">          test:</span><span style="color:#A5D6FF"> /</span><span style="color:#79C0FF">[</span><span style="color:#7EE787;font-weight:bold">\\</span><span style="color:#79C0FF">/]</span><span style="color:#A5D6FF">node_modules</span><span style="color:#79C0FF">[</span><span style="color:#7EE787;font-weight:bold">\\</span><span style="color:#79C0FF">/]</span><span style="color:#A5D6FF">/</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">          name: </span><span style="color:#A5D6FF">'vendors'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">          priority: </span><span style="color:#79C0FF">10</span></span>
<span class="line"><span style="color:#E6EDF3">        },</span></span>
<span class="line"><span style="color:#8B949E">        // Common chunk</span></span>
<span class="line"><span style="color:#E6EDF3">        common: {</span></span>
<span class="line"><span style="color:#E6EDF3">          minChunks: </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">          priority: </span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">          reuseExistingChunk: </span><span style="color:#79C0FF">true</span></span>
<span class="line"><span style="color:#E6EDF3">        }</span></span>
<span class="line"><span style="color:#E6EDF3">      }</span></span>
<span class="line"><span style="color:#E6EDF3">    },</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // Runtime chunk</span></span>
<span class="line"><span style="color:#E6EDF3">    runtimeChunk: </span><span style="color:#A5D6FF">'single'</span></span>
<span class="line"><span style="color:#E6EDF3">  },</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#E6EDF3">  plugins: [</span></span>
<span class="line"><span style="color:#8B949E">    // Gzip compression</span></span>
<span class="line"><span style="color:#FF7B72">    new</span><span style="color:#D2A8FF"> CompressionPlugin</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">      algorithm: </span><span style="color:#A5D6FF">'gzip'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      test:</span><span style="color:#A5D6FF"> /</span><span style="color:#7EE787;font-weight:bold">\.</span><span style="color:#A5D6FF">(js</span><span style="color:#FF7B72">|</span><span style="color:#A5D6FF">css</span><span style="color:#FF7B72">|</span><span style="color:#A5D6FF">html</span><span style="color:#FF7B72">|</span><span style="color:#A5D6FF">svg)</span><span style="color:#FF7B72">$</span><span style="color:#A5D6FF">/</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      threshold: </span><span style="color:#79C0FF">10240</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      minRatio: </span><span style="color:#79C0FF">0.8</span></span>
<span class="line"><span style="color:#E6EDF3">    }),</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // Brotli compression</span></span>
<span class="line"><span style="color:#FF7B72">    new</span><span style="color:#D2A8FF"> CompressionPlugin</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">      algorithm: </span><span style="color:#A5D6FF">'brotliCompress'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      test:</span><span style="color:#A5D6FF"> /</span><span style="color:#7EE787;font-weight:bold">\.</span><span style="color:#A5D6FF">(js</span><span style="color:#FF7B72">|</span><span style="color:#A5D6FF">css</span><span style="color:#FF7B72">|</span><span style="color:#A5D6FF">html</span><span style="color:#FF7B72">|</span><span style="color:#A5D6FF">svg)</span><span style="color:#FF7B72">$</span><span style="color:#A5D6FF">/</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      compressionOptions: { level: </span><span style="color:#79C0FF">11</span><span style="color:#E6EDF3"> },</span></span>
<span class="line"><span style="color:#E6EDF3">      threshold: </span><span style="color:#79C0FF">10240</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      minRatio: </span><span style="color:#79C0FF">0.8</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      filename: </span><span style="color:#A5D6FF">'[path][base].br'</span></span>
<span class="line"><span style="color:#E6EDF3">    }),</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // Bundle analyzer</span></span>
<span class="line"><span style="color:#FF7B72">    new</span><span style="color:#D2A8FF"> BundleAnalyzerPlugin</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">      analyzerMode: </span><span style="color:#A5D6FF">'static'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">      openAnalyzer: </span><span style="color:#79C0FF">false</span></span>
<span class="line"><span style="color:#E6EDF3">    })</span></span>
<span class="line"><span style="color:#E6EDF3">  ]</span></span>
<span class="line"><span style="color:#E6EDF3">};</span></span>
<span class="line"></span></code></pre>
<h3 id="2-tree-shaking">2. Tree Shaking</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// package.json</span></span>
<span class="line"><span style="color:#E6EDF3">{</span></span>
<span class="line"><span style="color:#A5D6FF">  "sideEffects"</span><span style="color:#E6EDF3">: [</span></span>
<span class="line"><span style="color:#A5D6FF">    "*.css"</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">    "*.scss"</span></span>
<span class="line"><span style="color:#E6EDF3">  ]</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// ❌ Bad: Imports entire library</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> _ </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'lodash'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> moment </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'moment'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// ✅ Good: Import only what you need</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> debounce </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'lodash/debounce'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> map </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'lodash/map'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// ✅ Better: Use tree-shakeable alternatives</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> { debounce, map } </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'lodash-es'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> dayjs </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'dayjs'</span><span style="color:#E6EDF3">; </span><span style="color:#8B949E">// Instead of moment</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Named exports for tree shaking</span></span>
<span class="line"><span style="color:#8B949E">// utils.js</span></span>
<span class="line"><span style="color:#FF7B72">export</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> add</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">a</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">b</span><span style="color:#E6EDF3">) { </span><span style="color:#FF7B72">return</span><span style="color:#E6EDF3"> a </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> b; }</span></span>
<span class="line"><span style="color:#FF7B72">export</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> subtract</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">a</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">b</span><span style="color:#E6EDF3">) { </span><span style="color:#FF7B72">return</span><span style="color:#E6EDF3"> a </span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3"> b; }</span></span>
<span class="line"><span style="color:#FF7B72">export</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> multiply</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">a</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">b</span><span style="color:#E6EDF3">) { </span><span style="color:#FF7B72">return</span><span style="color:#E6EDF3"> a </span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3"> b; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// main.js - only imports what's used</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> { add, multiply } </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> './utils'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#8B949E">// subtract is not included in bundle</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Conditional imports</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> loadFeature</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">  if</span><span style="color:#E6EDF3"> (condition) {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> module</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> await</span><span style="color:#FF7B72"> import</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'./feature'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> module</span><span style="color:#E6EDF3">.default;</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
<h2 id="runtime-performance-runtime">Runtime Performance {#runtime}</h2>
<h3 id="1-virtual-scrolling">1. Virtual Scrolling</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// React Window implementation</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> { FixedSizeList } </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'react-window'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> VirtualList</span><span style="color:#E6EDF3">({ </span><span style="color:#FFA657">items</span><span style="color:#E6EDF3"> }) {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#D2A8FF"> Row</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> ({ </span><span style="color:#FFA657">index</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">style</span><span style="color:#E6EDF3"> }) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> (</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;</span><span style="color:#7EE787">div</span><span style="color:#79C0FF"> style</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">style</span><span style="color:#FF7B72">}</span><span style="color:#79C0FF"> className</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"row"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#FF7B72">      {</span><span style="color:#E6EDF3">items[index].name</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;/</span><span style="color:#7EE787">div</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#E6EDF3"> (</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;</span><span style="color:#7EE787">FixedSizeList</span></span>
<span class="line"><span style="color:#79C0FF">      height</span><span style="color:#FF7B72">={</span><span style="color:#79C0FF">600</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">      itemCount</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">items.</span><span style="color:#79C0FF">length</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">      itemSize</span><span style="color:#FF7B72">={</span><span style="color:#79C0FF">50</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">      width</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"100%"</span></span>
<span class="line"><span style="color:#E6EDF3">    ></span></span>
<span class="line"><span style="color:#FF7B72">      {</span><span style="color:#E6EDF3">Row</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;/</span><span style="color:#7EE787">FixedSizeList</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Variable size list</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> { VariableSizeList } </span><span style="color:#FF7B72">from</span><span style="color:#A5D6FF"> 'react-window'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> VariableList</span><span style="color:#E6EDF3">({ </span><span style="color:#FFA657">items</span><span style="color:#E6EDF3"> }) {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#D2A8FF"> getItemSize</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> (</span><span style="color:#FFA657">index</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> items[index].expanded </span><span style="color:#FF7B72">?</span><span style="color:#79C0FF"> 120</span><span style="color:#FF7B72"> :</span><span style="color:#79C0FF"> 50</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">  };</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#E6EDF3"> (</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;</span><span style="color:#7EE787">VariableSizeList</span></span>
<span class="line"><span style="color:#79C0FF">      height</span><span style="color:#FF7B72">={</span><span style="color:#79C0FF">600</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">      itemCount</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">items.</span><span style="color:#79C0FF">length</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">      itemSize</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">getItemSize</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#79C0FF">      width</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"100%"</span></span>
<span class="line"><span style="color:#E6EDF3">    ></span></span>
<span class="line"><span style="color:#FF7B72">      {</span><span style="color:#E6EDF3">Row</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;/</span><span style="color:#7EE787">VariableSizeList</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Vanilla JS virtual scrolling</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> VirtualScroll</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">  constructor</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">container</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">items</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">itemHeight</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.container </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> container;</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.items </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> items;</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.itemHeight </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> itemHeight;</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.visibleStart </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.visibleEnd </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">init</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  init</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.container.style.height </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> `${</span><span style="color:#79C0FF">this</span><span style="color:#A5D6FF">.</span><span style="color:#E6EDF3">items</span><span style="color:#A5D6FF">.</span><span style="color:#79C0FF">length</span><span style="color:#FF7B72"> *</span><span style="color:#79C0FF"> this</span><span style="color:#A5D6FF">.</span><span style="color:#E6EDF3">itemHeight</span><span style="color:#A5D6FF">}px`</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.container.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'scroll'</span><span style="color:#E6EDF3">, () </span><span style="color:#FF7B72">=></span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">render</span><span style="color:#E6EDF3">());</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">render</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  render</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> scrollTop</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.container.scrollTop;</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> containerHeight</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.container.clientHeight;</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.visibleStart </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Math.</span><span style="color:#D2A8FF">floor</span><span style="color:#E6EDF3">(scrollTop </span><span style="color:#FF7B72">/</span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.itemHeight);</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.visibleEnd </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Math.</span><span style="color:#D2A8FF">ceil</span><span style="color:#E6EDF3">((scrollTop </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> containerHeight) </span><span style="color:#FF7B72">/</span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.itemHeight);</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> fragment</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> document.</span><span style="color:#D2A8FF">createDocumentFragment</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">let</span><span style="color:#E6EDF3"> i </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.visibleStart; i </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.visibleEnd; i</span><span style="color:#FF7B72">++</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">      if</span><span style="color:#E6EDF3"> (</span><span style="color:#79C0FF">this</span><span style="color:#E6EDF3">.items[i]) {</span></span>
<span class="line"><span style="color:#FF7B72">        const</span><span style="color:#79C0FF"> div</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> document.</span><span style="color:#D2A8FF">createElement</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'div'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">        div.style.position </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> 'absolute'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">        div.style.top </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> `${</span><span style="color:#E6EDF3">i</span><span style="color:#FF7B72"> *</span><span style="color:#79C0FF"> this</span><span style="color:#A5D6FF">.</span><span style="color:#E6EDF3">itemHeight</span><span style="color:#A5D6FF">}px`</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">        div.textContent </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.items[i].name;</span></span>
<span class="line"><span style="color:#E6EDF3">        fragment.</span><span style="color:#D2A8FF">appendChild</span><span style="color:#E6EDF3">(div);</span></span>
<span class="line"><span style="color:#E6EDF3">      }</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.container.innerHTML </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> ''</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.container.</span><span style="color:#D2A8FF">appendChild</span><span style="color:#E6EDF3">(fragment);</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
<h3 id="2-efficient-dom-updates">2. Efficient DOM Updates</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// ❌ Bad: Multiple reflows</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> badUpdate</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">items</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#E6EDF3">  items.</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">item</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> div</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> document.</span><span style="color:#D2A8FF">createElement</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'div'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">    div.textContent </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> item.text;</span></span>
<span class="line"><span style="color:#E6EDF3">    document.body.</span><span style="color:#D2A8FF">appendChild</span><span style="color:#E6EDF3">(div); </span><span style="color:#8B949E">// Reflow on each append</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// ✅ Good: Single reflow</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> goodUpdate</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">items</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> fragment</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> document.</span><span style="color:#D2A8FF">createDocumentFragment</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#E6EDF3">  items.</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">item</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> div</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> document.</span><span style="color:#D2A8FF">createElement</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'div'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">    div.textContent </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> item.text;</span></span>
<span class="line"><span style="color:#E6EDF3">    fragment.</span><span style="color:#D2A8FF">appendChild</span><span style="color:#E6EDF3">(div);</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#E6EDF3">  document.body.</span><span style="color:#D2A8FF">appendChild</span><span style="color:#E6EDF3">(fragment); </span><span style="color:#8B949E">// Single reflow</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Batch DOM reads and writes</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> updateElements</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">elements</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#8B949E">  // ❌ Bad: Interleaved reads and writes</span></span>
<span class="line"><span style="color:#E6EDF3">  elements.</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">el</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> height</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> el.offsetHeight; </span><span style="color:#8B949E">// Read (reflow)</span></span>
<span class="line"><span style="color:#E6EDF3">    el.style.width </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> height </span><span style="color:#FF7B72">+</span><span style="color:#A5D6FF"> 'px'</span><span style="color:#E6EDF3">; </span><span style="color:#8B949E">// Write (reflow)</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#8B949E">  // ✅ Good: Batch reads, then writes</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> heights</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> elements.</span><span style="color:#D2A8FF">map</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">el</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> el.offsetHeight); </span><span style="color:#8B949E">// Batch reads</span></span>
<span class="line"><span style="color:#E6EDF3">  elements.</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">el</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">i</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">    el.style.width </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> heights[i] </span><span style="color:#FF7B72">+</span><span style="color:#A5D6FF"> 'px'</span><span style="color:#E6EDF3">; </span><span style="color:#8B949E">// Batch writes</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Use requestAnimationFrame</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> smoothUpdate</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">  let</span><span style="color:#E6EDF3"> frame </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  function</span><span style="color:#D2A8FF"> animate</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#E6EDF3">    frame</span><span style="color:#FF7B72">++</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#D2A8FF">    updateUI</span><span style="color:#E6EDF3">(frame);</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (frame </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#79C0FF"> 100</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#D2A8FF">      requestAnimationFrame</span><span style="color:#E6EDF3">(animate);</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  requestAnimationFrame</span><span style="color:#E6EDF3">(animate);</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Intersection Observer for visibility</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> observer</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> IntersectionObserver</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">entries</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  entries.</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">entry</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (entry.isIntersecting) {</span></span>
<span class="line"><span style="color:#8B949E">      // Element is visible, load/animate</span></span>
<span class="line"><span style="color:#E6EDF3">      entry.target.classList.</span><span style="color:#D2A8FF">add</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'visible'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">    } </span><span style="color:#FF7B72">else</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#8B949E">      // Element not visible, pause/cleanup</span></span>
<span class="line"><span style="color:#E6EDF3">      entry.target.classList.</span><span style="color:#D2A8FF">remove</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'visible'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">}, {</span></span>
<span class="line"><span style="color:#E6EDF3">  threshold: </span><span style="color:#79C0FF">0.1</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">document.</span><span style="color:#D2A8FF">querySelectorAll</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'.lazy-component'</span><span style="color:#E6EDF3">).</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">el</span><span style="color:#FF7B72"> =></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  observer.</span><span style="color:#D2A8FF">observe</span><span style="color:#E6EDF3">(el);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span></code></pre>
<h2 id="core-web-vitals-web-vitals">Core Web Vitals {#web-vitals}</h2>
<h3 id="1-optimizing-lcp">1. Optimizing LCP</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Techniques to improve LCP:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// 1. Preload LCP image</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"preload"</span><span style="color:#79C0FF"> as</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"image"</span><span style="color:#79C0FF"> href</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"hero.jpg"</span><span style="color:#79C0FF"> fetchpriority</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"high"</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// 2. Remove render-blocking resources</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"stylesheet"</span><span style="color:#79C0FF"> href</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"critical.css"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"preload"</span><span style="color:#79C0FF"> href</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"non-critical.css"</span><span style="color:#79C0FF"> as</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"style"</span><span style="color:#79C0FF"> onload</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"this.rel='stylesheet'"</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// 3. Optimize images</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">img</span><span style="color:#79C0FF"> src</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"hero.jpg"</span><span style="color:#E6EDF3"> </span></span>
<span class="line"><span style="color:#79C0FF">     srcset</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"hero-400.jpg 400w, hero-800.jpg 800w"</span></span>
<span class="line"><span style="color:#79C0FF">     sizes</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"100vw"</span></span>
<span class="line"><span style="color:#79C0FF">     fetchpriority</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"high"</span></span>
<span class="line"><span style="color:#79C0FF">     alt</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"Hero"</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// 4. Use CDN</span></span>
<span class="line"><span style="color:#E6EDF3">const imageUrl = 'https://cdn.example.com/hero.jpg';</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// 5. Optimize server response time</span></span>
<span class="line"><span style="color:#E6EDF3">// - Use CDN</span></span>
<span class="line"><span style="color:#E6EDF3">// - Enable caching</span></span>
<span class="line"><span style="color:#E6EDF3">// - Optimize database queries</span></span>
<span class="line"><span style="color:#E6EDF3">// - Use faster hosting</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// 6. Client-side rendering optimization</span></span>
<span class="line"><span style="color:#E6EDF3">function App() </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#D2A8FF">  return</span><span style="color:#E6EDF3"> (</span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;></span></span>
<span class="line"><span style="color:#FF7B72">      {</span><span style="color:#8B949E">/* Render critical content first */</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#E6EDF3">      &#x3C;</span><span style="color:#7EE787">Hero</span><span style="color:#E6EDF3"> /></span></span>
<span class="line"><span style="color:#E6EDF3">      </span></span>
<span class="line"><span style="color:#FF7B72">      {</span><span style="color:#8B949E">/* Lazy load below-the-fold content */</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#E6EDF3">      &#x3C;</span><span style="color:#7EE787">Suspense</span><span style="color:#79C0FF"> fallback</span><span style="color:#FF7B72">={</span><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">Skeleton</span><span style="color:#E6EDF3"> /></span><span style="color:#FF7B72">}</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">        &#x3C;</span><span style="color:#7EE787">BelowTheFold</span><span style="color:#E6EDF3"> /></span></span>
<span class="line"><span style="color:#E6EDF3">      &#x3C;/</span><span style="color:#7EE787">Suspense</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">    &#x3C;/></span></span>
<span class="line"><span style="color:#E6EDF3">  );</span></span>
<span class="line"><span style="color:#FF7B72">}</span></span>
<span class="line"></span></code></pre>
<h3 id="2-optimizing-fidinp">2. Optimizing FID/INP</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Techniques to improve FID and INP:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// 1. Break up long tasks</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> processLargeDataset</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">data</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> chunkSize</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> 100</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  for</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">let</span><span style="color:#E6EDF3"> i </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">; i </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#E6EDF3"> data.</span><span style="color:#79C0FF">length</span><span style="color:#E6EDF3">; i </span><span style="color:#FF7B72">+=</span><span style="color:#E6EDF3"> chunkSize) {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> chunk</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> data.</span><span style="color:#D2A8FF">slice</span><span style="color:#E6EDF3">(i, i </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> chunkSize);</span></span>
<span class="line"><span style="color:#D2A8FF">    processChunk</span><span style="color:#E6EDF3">(chunk);</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // Yield to main thread</span></span>
<span class="line"><span style="color:#FF7B72">    await</span><span style="color:#FF7B72"> new</span><span style="color:#79C0FF"> Promise</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">resolve</span><span style="color:#FF7B72"> =></span><span style="color:#D2A8FF"> setTimeout</span><span style="color:#E6EDF3">(resolve, </span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">));</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// 2. Use requestIdleCallback</span></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> performNonCriticalWork</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#D2A8FF">  requestIdleCallback</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">deadline</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    while</span><span style="color:#E6EDF3"> (deadline.</span><span style="color:#D2A8FF">timeRemaining</span><span style="color:#E6EDF3">() </span><span style="color:#FF7B72">></span><span style="color:#79C0FF"> 0</span><span style="color:#FF7B72"> &#x26;&#x26;</span><span style="color:#E6EDF3"> tasks.</span><span style="color:#79C0FF">length</span><span style="color:#FF7B72"> ></span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">      const</span><span style="color:#79C0FF"> task</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> tasks.</span><span style="color:#D2A8FF">shift</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#D2A8FF">      performTask</span><span style="color:#E6EDF3">(task);</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (tasks.</span><span style="color:#79C0FF">length</span><span style="color:#FF7B72"> ></span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#D2A8FF">      performNonCriticalWork</span><span style="color:#E6EDF3">(); </span><span style="color:#8B949E">// Continue in next idle period</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// 3. Debounce expensive operations</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> expensiveOperation</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> debounce</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#8B949E">  // Heavy computation</span></span>
<span class="line"><span style="color:#E6EDF3">}, </span><span style="color:#79C0FF">300</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">input.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'input'</span><span style="color:#E6EDF3">, expensiveOperation);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// 4. Optimize event handlers</span></span>
<span class="line"><span style="color:#8B949E">// ❌ Bad: Heavy work in event handler</span></span>
<span class="line"><span style="color:#E6EDF3">button.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'click'</span><span style="color:#E6EDF3">, () </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> result</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> heavyComputation</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#D2A8FF">  updateUI</span><span style="color:#E6EDF3">(result);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// ✅ Good: Defer work</span></span>
<span class="line"><span style="color:#E6EDF3">button.</span><span style="color:#D2A8FF">addEventListener</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'click'</span><span style="color:#E6EDF3">, () </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#D2A8FF">  requestAnimationFrame</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> result</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> heavyComputation</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#D2A8FF">    updateUI</span><span style="color:#E6EDF3">(result);</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// 5. Code splitting for interactions</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> function</span><span style="color:#D2A8FF"> handleClick</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> module</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> await</span><span style="color:#FF7B72"> import</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'./heavy-feature.js'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#79C0FF">  module</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">handleFeature</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
<h3 id="3-optimizing-cls">3. Optimizing CLS</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Techniques to prevent layout shift:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// 1. Reserve space for images</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">img</span><span style="color:#79C0FF"> src</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"image.jpg"</span><span style="color:#79C0FF"> width</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"800"</span><span style="color:#79C0FF"> height</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"600"</span><span style="color:#79C0FF"> alt</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"Description"</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// Or use aspect ratio</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  .image-container </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#E6EDF3">    aspect</span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3">ratio: </span><span style="color:#79C0FF">16</span><span style="color:#FF7B72"> /</span><span style="color:#79C0FF"> 9</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#FF7B72">  }</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// 2. Reserve space for ads</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">div</span><span style="color:#79C0FF"> class</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"ad-slot"</span><span style="color:#79C0FF"> style</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"min-height: 250px;"</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  &#x3C;!-- Ad loads here --></span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">div</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// 3. Avoid inserting content above existing content</span></span>
<span class="line"><span style="color:#E6EDF3">// ❌ Bad: Insert at top</span></span>
<span class="line"><span style="color:#E6EDF3">container.prepend(newElement);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// ✅ Good: Append or replace</span></span>
<span class="line"><span style="color:#E6EDF3">container.appendChild(newElement);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// 4. Use transform for animations</span></span>
<span class="line"><span style="color:#E6EDF3">// ❌ Bad: Causes layout shift</span></span>
<span class="line"><span style="color:#E6EDF3">.element </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#E6EDF3">  animation: move 1s;</span></span>
<span class="line"><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#E6EDF3">@keyframes move </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#E6EDF3">  from { top: </span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">; }</span></span>
<span class="line"><span style="color:#E6EDF3">  to { top: 100px; }</span></span>
<span class="line"><span style="color:#FF7B72">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// ✅ Good: No layout shift</span></span>
<span class="line"><span style="color:#E6EDF3">.element </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#E6EDF3">  animation: move 1s;</span></span>
<span class="line"><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#E6EDF3">@keyframes move </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#E6EDF3">  from { transform: </span><span style="color:#D2A8FF">translateY</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">); }</span></span>
<span class="line"><span style="color:#E6EDF3">  to { transform: </span><span style="color:#D2A8FF">translateY</span><span style="color:#E6EDF3">(100px); }</span></span>
<span class="line"><span style="color:#FF7B72">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">// 5. Preload fonts</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">link</span><span style="color:#79C0FF"> rel</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"preload"</span><span style="color:#79C0FF"> href</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"font.woff2"</span><span style="color:#79C0FF"> as</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"font"</span><span style="color:#79C0FF"> type</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"font/woff2"</span><span style="color:#79C0FF"> crossorigin</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"><span style="color:#E6EDF3">  @font-face </span><span style="color:#FF7B72">{</span></span>
<span class="line"><span style="color:#E6EDF3">    font</span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3">family: </span><span style="color:#A5D6FF">'MyFont'</span><span style="color:#E6EDF3">;</span></span>
<span class="line"><span style="color:#E6EDF3">    src: </span><span style="color:#D2A8FF">url</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'font.woff2'</span><span style="color:#E6EDF3">) </span><span style="color:#D2A8FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'woff2'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">    font</span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3">display: optional; </span><span style="color:#8B949E">/* Prevents layout shift */</span></span>
<span class="line"><span style="color:#FF7B72">  }</span></span>
<span class="line"><span style="color:#E6EDF3">&#x3C;/</span><span style="color:#7EE787">style</span><span style="color:#E6EDF3">></span></span>
<span class="line"></span></code></pre>
<h2 id="monitoring-and-tools-monitoring">Monitoring and Tools {#monitoring}</h2>
<h3 id="1-performance-monitoring">1. Performance Monitoring</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Real User Monitoring (RUM)</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> PerformanceMonitor</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">  constructor</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">apiEndpoint</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.apiEndpoint </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> apiEndpoint;</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.metrics </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {};</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">init</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  init</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#8B949E">    // Monitor Core Web Vitals</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">observeWebVitals</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // Monitor long tasks</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">observeLongTasks</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // Monitor resource timing</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">observeResourceTiming</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E">    // Send metrics periodically</span></span>
<span class="line"><span style="color:#D2A8FF">    setInterval</span><span style="color:#E6EDF3">(() </span><span style="color:#FF7B72">=></span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">sendMetrics</span><span style="color:#E6EDF3">(), </span><span style="color:#79C0FF">30000</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  observeWebVitals</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">    import</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'web-vitals'</span><span style="color:#E6EDF3">).</span><span style="color:#D2A8FF">then</span><span style="color:#E6EDF3">(({ </span><span style="color:#FFA657">getCLS</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">getFID</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">getLCP</span><span style="color:#E6EDF3"> }) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#D2A8FF">      getCLS</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">metric</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">recordMetric</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'CLS'</span><span style="color:#E6EDF3">, metric.value));</span></span>
<span class="line"><span style="color:#D2A8FF">      getFID</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">metric</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">recordMetric</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'FID'</span><span style="color:#E6EDF3">, metric.value));</span></span>
<span class="line"><span style="color:#D2A8FF">      getLCP</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">metric</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#79C0FF"> this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">recordMetric</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'LCP'</span><span style="color:#E6EDF3">, metric.value));</span></span>
<span class="line"><span style="color:#E6EDF3">    });</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  observeLongTasks</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> observer</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> PerformanceObserver</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">list</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">      for</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> entry</span><span style="color:#FF7B72"> of</span><span style="color:#E6EDF3"> list.</span><span style="color:#D2A8FF">getEntries</span><span style="color:#E6EDF3">()) {</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#E6EDF3"> (entry.duration </span><span style="color:#FF7B72">></span><span style="color:#79C0FF"> 50</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#79C0FF">          this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">recordMetric</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'long_task'</span><span style="color:#E6EDF3">, entry.duration);</span></span>
<span class="line"><span style="color:#E6EDF3">        }</span></span>
<span class="line"><span style="color:#E6EDF3">      }</span></span>
<span class="line"><span style="color:#E6EDF3">    });</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#E6EDF3">    observer.</span><span style="color:#D2A8FF">observe</span><span style="color:#E6EDF3">({ entryTypes: [</span><span style="color:#A5D6FF">'longtask'</span><span style="color:#E6EDF3">] });</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  observeResourceTiming</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">    const</span><span style="color:#79C0FF"> observer</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> PerformanceObserver</span><span style="color:#E6EDF3">((</span><span style="color:#FFA657">list</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">      for</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> entry</span><span style="color:#FF7B72"> of</span><span style="color:#E6EDF3"> list.</span><span style="color:#D2A8FF">getEntries</span><span style="color:#E6EDF3">()) {</span></span>
<span class="line"><span style="color:#79C0FF">        this</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">recordMetric</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'resource'</span><span style="color:#E6EDF3">, {</span></span>
<span class="line"><span style="color:#E6EDF3">          name: entry.name,</span></span>
<span class="line"><span style="color:#E6EDF3">          duration: entry.duration,</span></span>
<span class="line"><span style="color:#E6EDF3">          size: entry.transferSize</span></span>
<span class="line"><span style="color:#E6EDF3">        });</span></span>
<span class="line"><span style="color:#E6EDF3">      }</span></span>
<span class="line"><span style="color:#E6EDF3">    });</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#E6EDF3">    observer.</span><span style="color:#D2A8FF">observe</span><span style="color:#E6EDF3">({ entryTypes: [</span><span style="color:#A5D6FF">'resource'</span><span style="color:#E6EDF3">] });</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  recordMetric</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">name</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">value</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (</span><span style="color:#FF7B72">!</span><span style="color:#79C0FF">this</span><span style="color:#E6EDF3">.metrics[name]) {</span></span>
<span class="line"><span style="color:#79C0FF">      this</span><span style="color:#E6EDF3">.metrics[name] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [];</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.metrics[name].</span><span style="color:#D2A8FF">push</span><span style="color:#E6EDF3">(value);</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#D2A8FF">  sendMetrics</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (navigator.sendBeacon) {</span></span>
<span class="line"><span style="color:#E6EDF3">      navigator.</span><span style="color:#D2A8FF">sendBeacon</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#79C0FF">        this</span><span style="color:#E6EDF3">.apiEndpoint,</span></span>
<span class="line"><span style="color:#79C0FF">        JSON</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">stringify</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">this</span><span style="color:#E6EDF3">.metrics)</span></span>
<span class="line"><span style="color:#E6EDF3">      );</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#79C0FF">    this</span><span style="color:#E6EDF3">.metrics </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {};</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Initialize monitoring</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> monitor</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> PerformanceMonitor</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'/api/metrics'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span></code></pre>
<h3 id="2-performance-tools">2. Performance Tools</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#8B949E">// Lighthouse CI</span></span>
<span class="line"><span style="color:#8B949E">// .lighthouserc.json</span></span>
<span class="line"><span style="color:#E6EDF3">{</span></span>
<span class="line"><span style="color:#A5D6FF">  "ci"</span><span style="color:#E6EDF3">: {</span></span>
<span class="line"><span style="color:#A5D6FF">    "collect"</span><span style="color:#E6EDF3">: {</span></span>
<span class="line"><span style="color:#A5D6FF">      "numberOfRuns"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">      "url"</span><span style="color:#E6EDF3">: [</span><span style="color:#A5D6FF">"http://localhost:3000"</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">    },</span></span>
<span class="line"><span style="color:#A5D6FF">    "assert"</span><span style="color:#E6EDF3">: {</span></span>
<span class="line"><span style="color:#A5D6FF">      "assertions"</span><span style="color:#E6EDF3">: {</span></span>
<span class="line"><span style="color:#A5D6FF">        "categories:performance"</span><span style="color:#E6EDF3">: [</span><span style="color:#A5D6FF">"error"</span><span style="color:#E6EDF3">, {</span><span style="color:#A5D6FF">"minScore"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">0.9</span><span style="color:#E6EDF3">}],</span></span>
<span class="line"><span style="color:#A5D6FF">        "categories:accessibility"</span><span style="color:#E6EDF3">: [</span><span style="color:#A5D6FF">"error"</span><span style="color:#E6EDF3">, {</span><span style="color:#A5D6FF">"minScore"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">0.9</span><span style="color:#E6EDF3">}],</span></span>
<span class="line"><span style="color:#A5D6FF">        "first-contentful-paint"</span><span style="color:#E6EDF3">: [</span><span style="color:#A5D6FF">"error"</span><span style="color:#E6EDF3">, {</span><span style="color:#A5D6FF">"maxNumericValue"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">2000</span><span style="color:#E6EDF3">}],</span></span>
<span class="line"><span style="color:#A5D6FF">        "interactive"</span><span style="color:#E6EDF3">: [</span><span style="color:#A5D6FF">"error"</span><span style="color:#E6EDF3">, {</span><span style="color:#A5D6FF">"maxNumericValue"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">3000</span><span style="color:#E6EDF3">}]</span></span>
<span class="line"><span style="color:#E6EDF3">      }</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">  }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// WebPageTest API</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> WebPageTest</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> require</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'webpagetest'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> wpt</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> WebPageTest</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'www.webpagetest.org'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'YOUR_API_KEY'</span><span style="color:#E6EDF3">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">wpt.</span><span style="color:#D2A8FF">runTest</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'https://example.com'</span><span style="color:#E6EDF3">, {</span></span>
<span class="line"><span style="color:#E6EDF3">  location: </span><span style="color:#A5D6FF">'Dulles:Chrome'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  connectivity: </span><span style="color:#A5D6FF">'4G'</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  runs: </span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#E6EDF3">  video: </span><span style="color:#79C0FF">true</span></span>
<span class="line"><span style="color:#E6EDF3">}, (</span><span style="color:#FFA657">err</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">result</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">  console.</span><span style="color:#D2A8FF">log</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'Test results:'</span><span style="color:#E6EDF3">, result.data);</span></span>
<span class="line"><span style="color:#E6EDF3">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E">// Custom performance budget</span></span>
<span class="line"><span style="color:#FF7B72">const</span><span style="color:#79C0FF"> performanceBudget</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#A5D6FF">  'bundle.js'</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">200</span><span style="color:#FF7B72"> *</span><span style="color:#79C0FF"> 1024</span><span style="color:#E6EDF3">,     </span><span style="color:#8B949E">// 200 KB</span></span>
<span class="line"><span style="color:#A5D6FF">  'styles.css'</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">50</span><span style="color:#FF7B72"> *</span><span style="color:#79C0FF"> 1024</span><span style="color:#E6EDF3">,     </span><span style="color:#8B949E">// 50 KB</span></span>
<span class="line"><span style="color:#A5D6FF">  'total'</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">500</span><span style="color:#FF7B72"> *</span><span style="color:#79C0FF"> 1024</span><span style="color:#E6EDF3">,         </span><span style="color:#8B949E">// 500 KB total</span></span>
<span class="line"><span style="color:#A5D6FF">  'requests'</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">50</span><span style="color:#E6EDF3">,              </span><span style="color:#8B949E">// Max 50 requests</span></span>
<span class="line"><span style="color:#A5D6FF">  'lcp'</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">2500</span><span style="color:#E6EDF3">,                 </span><span style="color:#8B949E">// 2.5s</span></span>
<span class="line"><span style="color:#A5D6FF">  'fid'</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">100</span><span style="color:#E6EDF3">,                  </span><span style="color:#8B949E">// 100ms</span></span>
<span class="line"><span style="color:#A5D6FF">  'cls'</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">0.1</span><span style="color:#8B949E">                   // 0.1</span></span>
<span class="line"><span style="color:#E6EDF3">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">function</span><span style="color:#D2A8FF"> checkBudget</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">metrics</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">  const</span><span style="color:#79C0FF"> violations</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> [];</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#E6EDF3">  Object.</span><span style="color:#D2A8FF">entries</span><span style="color:#E6EDF3">(performanceBudget).</span><span style="color:#D2A8FF">forEach</span><span style="color:#E6EDF3">(([</span><span style="color:#FFA657">key</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">budget</span><span style="color:#E6EDF3">]) </span><span style="color:#FF7B72">=></span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (metrics[key] </span><span style="color:#FF7B72">></span><span style="color:#E6EDF3"> budget) {</span></span>
<span class="line"><span style="color:#E6EDF3">      violations.</span><span style="color:#D2A8FF">push</span><span style="color:#E6EDF3">({</span></span>
<span class="line"><span style="color:#E6EDF3">        metric: key,</span></span>
<span class="line"><span style="color:#E6EDF3">        actual: metrics[key],</span></span>
<span class="line"><span style="color:#E6EDF3">        budget: budget</span></span>
<span class="line"><span style="color:#E6EDF3">      });</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">  });</span></span>
<span class="line"><span style="color:#E6EDF3">  </span></span>
<span class="line"><span style="color:#FF7B72">  return</span><span style="color:#E6EDF3"> violations;</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>Frontend performance optimization is crucial for user experience. Key takeaways:</p>
<ol>
<li><strong>Measure First</strong> - Use real metrics, not assumptions</li>
<li><strong>Optimize Critical Path</strong> - Load essentials first</li>
<li><strong>Reduce Bundle Size</strong> - Ship less JavaScript</li>
<li><strong>Optimize Images</strong> - Use modern formats and lazy loading</li>
<li><strong>Monitor Continuously</strong> - Track performance over time</li>
</ol>
<p><strong>Remember</strong>: Every millisecond counts. Users notice performance.</p>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://web.dev/performance/">Web.dev Performance</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Performance">MDN Performance</a></li>
<li><a href="https://developer.chrome.com/docs/devtools/performance/">Chrome DevTools</a></li>
<li><a href="https://www.webpagetest.org/">WebPageTest</a></li>
</ul>
<hr>
<p><em>What performance optimizations have had the biggest impact for you? Share your wins!</em></p> </div> </article> </div> <div class="back-link" data-astro-cid-rkg3zjxi><a href="/ai-news/" data-astro-cid-rkg3zjxi>← Back to AI News</a></div>  </main> <footer class="site-footer container"> <p>© 2025 AREZKI El Mehdi • <a href="https://github.com/earezki">GitHub</a> • <a href="/rss.xml">RSS</a></p> </footer>  <script>
      // Read/Unread article tracking
      (function() {
        const STORAGE_KEY = 'readArticles';
        
        function getReadArticles() {
          try {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : [];
          } catch (e) {
            return [];
          }
        }
        
        function markArticleAsRead(url) {
          try {
            const readArticles = getReadArticles();
            if (!readArticles.includes(url)) {
              readArticles.push(url);
              localStorage.setItem(STORAGE_KEY, JSON.stringify(readArticles));
            }
          } catch (e) {
            console.error('Failed to mark article as read:', e);
          }
        }
        
        function isArticleRead(url) {
          const readArticles = getReadArticles();
          return readArticles.includes(url);
        }
        
        // Update post cards on list pages
        function updatePostCards() {
          const postCards = document.querySelectorAll('.post-card[data-article-url]');
          postCards.forEach(function(card) {
            const url = card.getAttribute('data-article-url');
            if (url) {
              if (isArticleRead(url)) {
                card.classList.add('read');
                card.classList.remove('unread');
              } else {
                card.classList.add('unread');
                card.classList.remove('read');
              }
            }
          });
        }
        
        // Mark current article as read (on article pages)
        function markCurrentArticleAsRead() {
          const isArticlePage = document.querySelector('.post-body');
          if (isArticlePage) {
            const currentPath = window.location.pathname;
            markArticleAsRead(currentPath);
          }
        }
        
        // Initialize function
        function init() {
          updatePostCards();
          markCurrentArticleAsRead();
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', init);
        
        // Handle back/forward navigation (bfcache)
        window.addEventListener('pageshow', function(event) {
          // If page is loaded from cache, update the cards
          if (event.persisted) {
            init();
          }
        });
      })();
    </script> </body> </html> 