<!DOCTYPE html><html lang="en" data-theme="dark"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Python Best Practices and Advanced Techniques: Complete Professional Guide • Dev|Journal</title><meta name="description" content="Python Best Practices and Advanced Techniques: Complete Professional Guide Python's simplicity makes it easy to start, but mastering professional Python…"><meta name="keywords" content="software architecture, backend development, microservices, Java, Python, Spring Boot, technical blog"><meta name="author" content="El Mehdi Arezki"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://earezki.com/ai-news/2025-11-01-python-best-practices-advanced-guide/"><meta property="og:title" content="Python Best Practices and Advanced Techniques: Complete Professional Guide • Dev|Journal"><meta property="og:site_name" content="Dev|Journal"><meta property="og:description" content="Python Best Practices and Advanced Techniques: Complete Professional Guide Python's simplicity makes it easy to start, but mastering professional Python…"><meta property="og:image" content="https://earezki.com/assets/og-image-default.jpg"><!-- Twitter --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://earezki.com/ai-news/2025-11-01-python-best-practices-advanced-guide/"><meta name="twitter:title" content="Python Best Practices and Advanced Techniques: Complete Professional Guide • Dev|Journal"><meta name="twitter:description" content="Python Best Practices and Advanced Techniques: Complete Professional Guide Python's simplicity makes it easy to start, but mastering professional Python…"><meta name="twitter:image" content="https://earezki.com/assets/og-image-default.jpg"><meta name="twitter:creator" content="@earezki"><link rel="canonical" href="https://earezki.com/ai-news/2025-11-01-python-best-practices-advanced-guide/"><link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-161447264-1"></script><script defer src="https://cloud.umami.is/script.js" data-website-id="4a26531d-1053-4f79-97a6-06a1366aff91"></script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Python Best Practices and Advanced Techniques: Complete Professional Guide","datePublished":"2025-11-01T15:00:00.000Z","dateModified":"2025-11-01T15:00:00.000Z","author":{"@type":"Person","name":"AREZKI El Mehdi"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://earezki.com/ai-news/2025-11-01-python-best-practices-advanced-guide/"},"description":"Python Best Practices and Advanced Techniques: Complete Professional Guide Python's simplicity makes it easy to start, but mastering professional Python…"}</script><link rel="stylesheet" href="/_astro/_slug_.CDWqF8AB.css">
<style>.post-layout[data-astro-cid-rkg3zjxi]{display:grid;grid-template-columns:260px 1fr;gap:2.5rem}.sidebar-left[data-astro-cid-rkg3zjxi]{position:relative}@media (max-width: 1080px){.post-layout[data-astro-cid-rkg3zjxi]{grid-template-columns:1fr}}.ai-disclaimer-article[data-astro-cid-rkg3zjxi]{display:flex;gap:.75rem;padding:.9rem 1.1rem;margin:0 auto 2rem;max-width:780px;background:linear-gradient(135deg,#667eea1a,#764ba21a,#f093fb1a);border:2px solid transparent;border-radius:var(--radius-md);position:relative;background-clip:padding-box;font-size:.85rem}.ai-disclaimer-article[data-astro-cid-rkg3zjxi]:before{content:"";position:absolute;inset:-2px;border-radius:var(--radius-md);padding:2px;background:var(--ai-gradient-border);background-size:200% 200%;animation:gradient-rotate 3s linear infinite;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask-composite:exclude;pointer-events:none}html[data-theme=dark] .ai-disclaimer-article[data-astro-cid-rkg3zjxi]{background:linear-gradient(135deg,#667eea26,#764ba226,#f093fb26)}.ai-disclaimer-article[data-astro-cid-rkg3zjxi] svg[data-astro-cid-rkg3zjxi]{margin-top:.15rem}.ai-disclaimer-article[data-astro-cid-rkg3zjxi] strong[data-astro-cid-rkg3zjxi]{color:var(--color-text);display:block;margin-bottom:.15rem}.ai-disclaimer-article[data-astro-cid-rkg3zjxi] div[data-astro-cid-rkg3zjxi]{line-height:1.5;color:var(--color-text-alt)}
.toc[data-astro-cid-xvrfupwn]{position:sticky;top:90px;max-height:calc(100vh - 120px);overflow:auto;padding:1rem 1rem 1.2rem;background:var(--color-bg-alt);border:1px solid var(--color-border);border-radius:var(--radius-md);font-size:.8rem;line-height:1.3}.toc-title[data-astro-cid-xvrfupwn]{font-weight:600;font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;margin-bottom:.6rem;color:var(--color-text-alt)}.toc[data-astro-cid-xvrfupwn] ul[data-astro-cid-xvrfupwn]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.35rem}.toc[data-astro-cid-xvrfupwn] a[data-astro-cid-xvrfupwn]{text-decoration:none;color:var(--color-text-alt)}.toc[data-astro-cid-xvrfupwn] a[data-astro-cid-xvrfupwn]:hover{color:var(--color-accent)}.toc[data-astro-cid-xvrfupwn] li[data-astro-cid-xvrfupwn][class*=d-3]{margin-left:.75rem}.toc[data-astro-cid-xvrfupwn] li[data-astro-cid-xvrfupwn][class*=d-4]{margin-left:1.4rem}@media (max-width: 1080px){.toc[data-astro-cid-xvrfupwn]{display:none}}
</style><script type="module" src="/_astro/hoisted.CwSnpN4J.js"></script></head> <body> <div id="readingProgress" style="position:fixed;left:0;top:0;height:3px;background:linear-gradient(90deg,#2563eb,#9333ea);width:0;z-index:999;transition:width .15s ease;"></div>  <header class="site-header container"> <div class="logo-wrap"> <a class="logo" href="/">Dev|Journal</a> </div> <nav class="main-nav"> <a href="/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path> <polyline points="9 22 9 12 15 12 15 22"></polyline> </svg>
Home
</a> <a href="/ai-news/" class="ai-news-link"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h-9.5a.5.5 0 0 0-.5.5.5.5 0 0 1-1 0 .5.5 0 0 0-.5-.5H1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"></path> <path d="M7 15v4a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-4"></path> </svg>
AI News
</a> <a href="/tags/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2z"></path> <circle cx="7" cy="7" r="1.5"></circle> </svg>
Tags
</a> <a href="/about/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <circle cx="12" cy="12" r="10"></circle> <path d="M12 16v-4"></path> <path d="M12 8h.01"></path> </svg>
About
</a> <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode"> <span class="theme-icon">☾</span> <span class="theme-text">dark</span> </button> </nav> </header> <main class="container content-area">  <div class="ai-disclaimer-article" data-astro-cid-rkg3zjxi> <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink: 0;" data-astro-cid-rkg3zjxi> <circle cx="12" cy="12" r="10" data-astro-cid-rkg3zjxi></circle> <line x1="12" y1="8" x2="12" y2="12" data-astro-cid-rkg3zjxi></line> <line x1="12" y1="16" x2="12.01" y2="16" data-astro-cid-rkg3zjxi></line> </svg> <div data-astro-cid-rkg3zjxi> <strong data-astro-cid-rkg3zjxi>AI-Generated Content:</strong> This article was created with AI assistance. Please verify important information and check original references.
</div> </div> <div class="post-layout" data-astro-cid-rkg3zjxi> <aside class="sidebar-left" data-astro-cid-rkg3zjxi> <nav class="toc" aria-label="Table of Contents" data-astro-cid-xvrfupwn> <div class="toc-title" data-astro-cid-xvrfupwn>On this page</div> <ul data-astro-cid-xvrfupwn> <li class="d-2" data-astro-cid-xvrfupwn><a href="#table-of-contents" data-astro-cid-xvrfupwn>Table of Contents</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#modern-python-features-modern-features" data-astro-cid-xvrfupwn>Modern Python Features {#modern-features}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-structural-pattern-matching-python-310" data-astro-cid-xvrfupwn>1. Structural Pattern Matching (Python 3.10+)</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-walrus-operator-python-38" data-astro-cid-xvrfupwn>2. Walrus Operator (Python 3.8+)</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-f-strings-advanced-features" data-astro-cid-xvrfupwn>3. F-Strings Advanced Features</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#4-data-classes-python-37" data-astro-cid-xvrfupwn>4. Data Classes (Python 3.7+)</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#type-hints-and-mypy-type-hints" data-astro-cid-xvrfupwn>Type Hints and mypy {#type-hints}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-basic-type-annotations" data-astro-cid-xvrfupwn>1. Basic Type Annotations</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-generic-types" data-astro-cid-xvrfupwn>2. Generic Types</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-protocol-types-structural-subtyping" data-astro-cid-xvrfupwn>3. Protocol Types (Structural Subtyping)</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#4-advanced-type-hints" data-astro-cid-xvrfupwn>4. Advanced Type Hints</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#advanced-oop-patterns-oop-patterns" data-astro-cid-xvrfupwn>Advanced OOP Patterns {#oop-patterns}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-abstract-base-classes" data-astro-cid-xvrfupwn>1. Abstract Base Classes</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-descriptors-and-properties" data-astro-cid-xvrfupwn>2. Descriptors and Properties</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-mixins" data-astro-cid-xvrfupwn>3. Mixins</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#functional-programming-functional" data-astro-cid-xvrfupwn>Functional Programming {#functional}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-higher-order-functions" data-astro-cid-xvrfupwn>1. Higher-Order Functions</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-closures-and-currying" data-astro-cid-xvrfupwn>2. Closures and Currying</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-itertools-and-generators" data-astro-cid-xvrfupwn>3. Itertools and Generators</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#context-managers-context-managers" data-astro-cid-xvrfupwn>Context Managers {#context-managers}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-basic-context-managers" data-astro-cid-xvrfupwn>1. Basic Context Managers</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-advanced-context-managers" data-astro-cid-xvrfupwn>2. Advanced Context Managers</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-async-context-managers" data-astro-cid-xvrfupwn>3. Async Context Managers</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#decorators-and-metaprogramming-decorators" data-astro-cid-xvrfupwn>Decorators and Metaprogramming {#decorators}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-function-decorators" data-astro-cid-xvrfupwn>1. Function Decorators</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-class-decorators" data-astro-cid-xvrfupwn>2. Class Decorators</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-metaclasses" data-astro-cid-xvrfupwn>3. Metaclasses</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#concurrency-and-parallelism-concurrency" data-astro-cid-xvrfupwn>Concurrency and Parallelism {#concurrency}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-asyncio-basics" data-astro-cid-xvrfupwn>1. Asyncio Basics</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-threading" data-astro-cid-xvrfupwn>2. Threading</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-multiprocessing" data-astro-cid-xvrfupwn>3. Multiprocessing</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#performance-optimization-performance" data-astro-cid-xvrfupwn>Performance Optimization {#performance}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-profiling" data-astro-cid-xvrfupwn>1. Profiling</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-performance-optimization-techniques" data-astro-cid-xvrfupwn>2. Performance Optimization Techniques</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#testing-strategies-testing" data-astro-cid-xvrfupwn>Testing Strategies {#testing}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-pytest-basics" data-astro-cid-xvrfupwn>1. pytest Basics</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-test-organization" data-astro-cid-xvrfupwn>2. Test Organization</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#project-structure-project-structure" data-astro-cid-xvrfupwn>Project Structure {#project-structure}</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-standard-project-layout" data-astro-cid-xvrfupwn>1. Standard Project Layout</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-configuration-management" data-astro-cid-xvrfupwn>2. Configuration Management</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#conclusion" data-astro-cid-xvrfupwn>Conclusion</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#resources" data-astro-cid-xvrfupwn>Resources</a></li> </ul> </nav>  </aside> <article class="post" data-astro-cid-rkg3zjxi> <header class="post-header" data-astro-cid-rkg3zjxi> <h1 data-astro-cid-rkg3zjxi>Python Best Practices and Advanced Techniques: Complete Professional Guide</h1> <div class="meta" data-astro-cid-rkg3zjxi> <time datetime="2025-11-01T15:00:00.000Z" data-astro-cid-rkg3zjxi>Sat Nov 01 2025</time> <span data-astro-cid-rkg3zjxi>• 19 min read</span> </div> <div class="tag-row" data-astro-cid-rkg3zjxi><span class="tag" data-astro-cid-rkg3zjxi>Python</span><span class="tag" data-astro-cid-rkg3zjxi>Programming</span><span class="tag" data-astro-cid-rkg3zjxi>Best Practices</span><span class="tag" data-astro-cid-rkg3zjxi>Software Engineering</span></div> </header> <div class="post-body prose" data-astro-cid-rkg3zjxi> <h1 id="python-best-practices-and-advanced-techniques-complete-professional-guide">Python Best Practices and Advanced Techniques: Complete Professional Guide</h1>
<p>Python’s simplicity makes it easy to start, but mastering professional Python development requires understanding advanced patterns and best practices. This comprehensive guide covers everything from type hints to performance optimization.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#modern-features">Modern Python Features</a></li>
<li><a href="#type-hints">Type Hints and mypy</a></li>
<li><a href="#oop-patterns">Advanced OOP Patterns</a></li>
<li><a href="#functional">Functional Programming</a></li>
<li><a href="#context-managers">Context Managers</a></li>
<li><a href="#decorators">Decorators and Metaprogramming</a></li>
<li><a href="#concurrency">Concurrency and Parallelism</a></li>
<li><a href="#performance">Performance Optimization</a></li>
<li><a href="#testing">Testing Strategies</a></li>
<li><a href="#project-structure">Project Structure</a></li>
</ol>
<h2 id="modern-python-features-modern-features">Modern Python Features {#modern-features}</h2>
<h3 id="1-structural-pattern-matching-python-310">1. Structural Pattern Matching (Python 3.10+)</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># Pattern matching for complex data structures</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> process_command</span><span style="color:#E6EDF3">(command):</span></span>
<span class="line"><span style="color:#FF7B72">    match</span><span style="color:#E6EDF3"> command:</span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">"action"</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">"create"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"resource"</span><span style="color:#E6EDF3">: resource, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs}:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#FF7B72"> f</span><span style="color:#A5D6FF">"Creating </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">resource</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> with </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">kwargs</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span></span>
<span class="line"><span style="color:#E6EDF3">        </span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">"action"</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">"delete"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"resource"</span><span style="color:#E6EDF3">: resource, </span><span style="color:#A5D6FF">"id"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">id</span><span style="color:#E6EDF3">}:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#FF7B72"> f</span><span style="color:#A5D6FF">"Deleting </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">resource</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> #</span><span style="color:#FF7B72">{</span><span style="color:#79C0FF">id</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span></span>
<span class="line"><span style="color:#E6EDF3">        </span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">"action"</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">"update"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"resource"</span><span style="color:#E6EDF3">: resource, </span><span style="color:#A5D6FF">"id"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">id</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"data"</span><span style="color:#E6EDF3">: data}:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#FF7B72"> f</span><span style="color:#A5D6FF">"Updating </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">resource</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> #</span><span style="color:#FF7B72">{</span><span style="color:#79C0FF">id</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> with </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">data</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span></span>
<span class="line"><span style="color:#E6EDF3">        </span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> _:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#A5D6FF"> "Unknown command"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Pattern matching with guards</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> categorize_number</span><span style="color:#E6EDF3">(n):</span></span>
<span class="line"><span style="color:#FF7B72">    match</span><span style="color:#E6EDF3"> n:</span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#A5D6FF"> "zero"</span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> n </span><span style="color:#FF7B72">if</span><span style="color:#E6EDF3"> n </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#A5D6FF"> "negative"</span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> n </span><span style="color:#FF7B72">if</span><span style="color:#E6EDF3"> n </span><span style="color:#FF7B72">></span><span style="color:#79C0FF"> 0</span><span style="color:#FF7B72"> and</span><span style="color:#E6EDF3"> n </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#79C0FF"> 10</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#A5D6FF"> "single digit"</span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> _:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#A5D6FF"> "multiple digits"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Pattern matching for parsing</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> parse_response</span><span style="color:#E6EDF3">(response):</span></span>
<span class="line"><span style="color:#FF7B72">    match</span><span style="color:#E6EDF3"> response:</span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">"status"</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">"success"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"data"</span><span style="color:#E6EDF3">: data}:</span></span>
<span class="line"><span style="color:#79C0FF">            print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Success: </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">data</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">        </span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">"status"</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">"error"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"code"</span><span style="color:#E6EDF3">: code, </span><span style="color:#A5D6FF">"message"</span><span style="color:#E6EDF3">: msg}:</span></span>
<span class="line"><span style="color:#79C0FF">            print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Error </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">code</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">: </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">msg</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">        </span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">"status"</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">"pending"</span><span style="color:#E6EDF3">}:</span></span>
<span class="line"><span style="color:#79C0FF">            print</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"Request pending..."</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">        </span></span>
<span class="line"><span style="color:#FF7B72">        case</span><span style="color:#E6EDF3"> _:</span></span>
<span class="line"><span style="color:#79C0FF">            print</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"Invalid response"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span></code></pre>
<h3 id="2-walrus-operator-python-38">2. Walrus Operator (Python 3.8+)</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># ❌ Bad: Multiple calls or assignments</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> process_data</span><span style="color:#E6EDF3">(data):</span></span>
<span class="line"><span style="color:#E6EDF3">    result </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> expensive_computation(data)</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> result:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> result</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># ✅ Good: Walrus operator</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> process_data</span><span style="color:#E6EDF3">(data):</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> result </span><span style="color:#FF7B72">:=</span><span style="color:#E6EDF3"> expensive_computation(data):</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> result</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># List comprehension with walrus</span></span>
<span class="line"><span style="color:#E6EDF3">filtered_data </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span></span>
<span class="line"><span style="color:#E6EDF3">    result</span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> item </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> data</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> (result </span><span style="color:#FF7B72">:=</span><span style="color:#E6EDF3"> process(item)) </span><span style="color:#FF7B72">is</span><span style="color:#FF7B72"> not</span><span style="color:#79C0FF"> None</span></span>
<span class="line"><span style="color:#E6EDF3">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># While loop with walrus</span></span>
<span class="line"><span style="color:#FF7B72">while</span><span style="color:#E6EDF3"> (line </span><span style="color:#FF7B72">:=</span><span style="color:#FFA657"> file</span><span style="color:#E6EDF3">.readline()):</span></span>
<span class="line"><span style="color:#E6EDF3">    process_line(line)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Complex example</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> find_first_match</span><span style="color:#E6EDF3">(items, condition):</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> next</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#E6EDF3">        (item </span><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> item </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> items </span><span style="color:#FF7B72">if</span><span style="color:#E6EDF3"> (result </span><span style="color:#FF7B72">:=</span><span style="color:#E6EDF3"> condition(item)) </span><span style="color:#FF7B72">and</span><span style="color:#E6EDF3"> result </span><span style="color:#FF7B72">></span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#79C0FF">        None</span></span>
<span class="line"><span style="color:#E6EDF3">    )</span></span>
<span class="line"></span></code></pre>
<h3 id="3-f-strings-advanced-features">3. F-Strings Advanced Features</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># Debugging with f-strings (Python 3.8+)</span></span>
<span class="line"><span style="color:#E6EDF3">name </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> "John"</span></span>
<span class="line"><span style="color:#E6EDF3">age </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 30</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">name</span><span style="color:#FF7B72">=}</span><span style="color:#A5D6FF">, </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">age</span><span style="color:#FF7B72">=}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)  </span><span style="color:#8B949E"># name='John', age=30</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Formatting numbers</span></span>
<span class="line"><span style="color:#E6EDF3">price </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 1234.5678</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">price</span><span style="color:#FF7B72">:.2f}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)     </span><span style="color:#8B949E"># 1234.57</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">price</span><span style="color:#FF7B72">:,.2f}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)    </span><span style="color:#8B949E"># 1,234.57</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">price</span><span style="color:#FF7B72">:>10.2f}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)  </span><span style="color:#8B949E"># Right-align, width 10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Date formatting</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> datetime </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> datetime</span></span>
<span class="line"><span style="color:#E6EDF3">now </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> datetime.now()</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">now:</span><span style="color:#FF7B72">%</span><span style="color:#E6EDF3">Y</span><span style="color:#FF7B72">-%</span><span style="color:#E6EDF3">m</span><span style="color:#FF7B72">-%</span><span style="color:#E6EDF3">d </span><span style="color:#FF7B72">%</span><span style="color:#E6EDF3">H:</span><span style="color:#FF7B72">%</span><span style="color:#E6EDF3">M:</span><span style="color:#FF7B72">%</span><span style="color:#E6EDF3">S</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Nested f-strings</span></span>
<span class="line"><span style="color:#E6EDF3">data </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">"name"</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">"Alice"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"score"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">95</span><span style="color:#E6EDF3">}</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">data[</span><span style="color:#A5D6FF">'name'</span><span style="color:#E6EDF3">]</span><span style="color:#FF7B72">:>10}</span><span style="color:#A5D6FF">: </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">data[</span><span style="color:#A5D6FF">'score'</span><span style="color:#E6EDF3">]</span><span style="color:#FF7B72">:.1f}</span><span style="color:#A5D6FF">%"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Multi-line f-strings</span></span>
<span class="line"><span style="color:#E6EDF3">message </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> f</span><span style="color:#A5D6FF">"""</span></span>
<span class="line"><span style="color:#A5D6FF">User: </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">name</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#A5D6FF">Age: </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">age</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#A5D6FF">Status: </span><span style="color:#FF7B72">{</span><span style="color:#A5D6FF">'Active'</span><span style="color:#FF7B72"> if</span><span style="color:#E6EDF3"> age </span><span style="color:#FF7B72">></span><span style="color:#79C0FF"> 18</span><span style="color:#FF7B72"> else</span><span style="color:#A5D6FF"> 'Minor'</span><span style="color:#FF7B72">}</span></span>
<span class="line"><span style="color:#A5D6FF">"""</span></span>
<span class="line"></span></code></pre>
<h3 id="4-data-classes-python-37">4. Data Classes (Python 3.7+)</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> dataclasses </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> dataclass, field</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> List</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> datetime </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> datetime</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Basic dataclass</span></span>
<span class="line"><span style="color:#D2A8FF">@dataclass</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> User</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">    name: </span><span style="color:#79C0FF">str</span></span>
<span class="line"><span style="color:#E6EDF3">    email: </span><span style="color:#79C0FF">str</span></span>
<span class="line"><span style="color:#E6EDF3">    age: </span><span style="color:#79C0FF">int</span></span>
<span class="line"><span style="color:#E6EDF3">    created_at: datetime </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> field(</span><span style="color:#FFA657">default_factory</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">datetime.now)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#8B949E"># Frozen (immutable) dataclass</span></span>
<span class="line"><span style="color:#D2A8FF">@dataclass</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">frozen</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">True</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Point</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">    x: </span><span style="color:#79C0FF">float</span></span>
<span class="line"><span style="color:#E6EDF3">    y: </span><span style="color:#79C0FF">float</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> distance_from_origin</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> (</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.x</span><span style="color:#FF7B72">**</span><span style="color:#79C0FF">2</span><span style="color:#FF7B72"> +</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.y</span><span style="color:#FF7B72">**</span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">)</span><span style="color:#FF7B72">**</span><span style="color:#79C0FF">0.5</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Dataclass with complex defaults</span></span>
<span class="line"><span style="color:#D2A8FF">@dataclass</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> ShoppingCart</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">    user_id: </span><span style="color:#79C0FF">str</span></span>
<span class="line"><span style="color:#E6EDF3">    items: List[</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> field(</span><span style="color:#FFA657">default_factory</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">list</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    total: </span><span style="color:#79C0FF">float</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> 0.0</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> add_item</span><span style="color:#E6EDF3">(self, item: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, price: </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.items.append(item)</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.total </span><span style="color:#FF7B72">+=</span><span style="color:#E6EDF3"> price</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Dataclass with post-init processing</span></span>
<span class="line"><span style="color:#D2A8FF">@dataclass</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Rectangle</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">    width: </span><span style="color:#79C0FF">float</span></span>
<span class="line"><span style="color:#E6EDF3">    height: </span><span style="color:#79C0FF">float</span></span>
<span class="line"><span style="color:#E6EDF3">    area: </span><span style="color:#79C0FF">float</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> field(</span><span style="color:#FFA657">init</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">False</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __post_init__</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.area </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.width </span><span style="color:#FF7B72">*</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.height</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Advanced: Ordering and comparison</span></span>
<span class="line"><span style="color:#D2A8FF">@dataclass</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">order</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">True</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Product</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">    sort_index: </span><span style="color:#79C0FF">float</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> field(</span><span style="color:#FFA657">init</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">False</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">repr</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">False</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    name: </span><span style="color:#79C0FF">str</span></span>
<span class="line"><span style="color:#E6EDF3">    price: </span><span style="color:#79C0FF">float</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __post_init__</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.sort_index </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.price</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">products </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span></span>
<span class="line"><span style="color:#E6EDF3">    Product(</span><span style="color:#A5D6FF">"Laptop"</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">1000</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#E6EDF3">    Product(</span><span style="color:#A5D6FF">"Mouse"</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">25</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#E6EDF3">    Product(</span><span style="color:#A5D6FF">"Keyboard"</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">75</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">sorted_products </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> sorted</span><span style="color:#E6EDF3">(products)  </span><span style="color:#8B949E"># Sorted by price</span></span>
<span class="line"></span></code></pre>
<h2 id="type-hints-and-mypy-type-hints">Type Hints and mypy {#type-hints}</h2>
<h3 id="1-basic-type-annotations">1. Basic Type Annotations</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> List, Dict, Tuple, Set, Optional, Union, Any</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Function annotations</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> greet</span><span style="color:#E6EDF3">(name: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, age: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#FF7B72"> f</span><span style="color:#A5D6FF">"Hello </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">name</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">, you are </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">age</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> years old"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Variable annotations</span></span>
<span class="line"><span style="color:#E6EDF3">count: </span><span style="color:#79C0FF">int</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> 0</span></span>
<span class="line"><span style="color:#E6EDF3">names: List[</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span><span style="color:#A5D6FF">"Alice"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"Bob"</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">config: Dict[</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, Any] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">"timeout"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">30</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"retry"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">True</span><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Optional types</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> find_user</span><span style="color:#E6EDF3">(user_id: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">) -> Optional[User]:</span></span>
<span class="line"><span style="color:#8B949E">    # Returns User or None</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> database.get(user_id)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Union types</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> process_id</span><span style="color:#E6EDF3">(id_value: Union[</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">]) -> </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> str</span><span style="color:#E6EDF3">(id_value)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Multiple return types</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> parse_value</span><span style="color:#E6EDF3">(s: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">) -> Union[</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">]:</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> int</span><span style="color:#E6EDF3">(s)</span></span>
<span class="line"><span style="color:#FF7B72">    except</span><span style="color:#79C0FF"> ValueError</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#79C0FF"> float</span><span style="color:#E6EDF3">(s)</span></span>
<span class="line"><span style="color:#FF7B72">        except</span><span style="color:#79C0FF"> ValueError</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#E6EDF3"> s</span></span>
<span class="line"></span></code></pre>
<h3 id="2-generic-types">2. Generic Types</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> TypeVar, Generic, List, Dict</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Type variables</span></span>
<span class="line"><span style="color:#E6EDF3">T </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> TypeVar(</span><span style="color:#A5D6FF">'T'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">K </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> TypeVar(</span><span style="color:#A5D6FF">'K'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">V </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> TypeVar(</span><span style="color:#A5D6FF">'V'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Generic function</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> first</span><span style="color:#E6EDF3">(items: List[T]) -> Optional[T]:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> items[</span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">if</span><span style="color:#E6EDF3"> items </span><span style="color:#FF7B72">else</span><span style="color:#79C0FF"> None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Generic class</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Container</span><span style="color:#E6EDF3">(Generic[T]):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._items: List[T] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> []</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> add</span><span style="color:#E6EDF3">(self, item: T) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._items.append(item)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> get</span><span style="color:#E6EDF3">(self, index: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> T:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">._items[index]</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> all</span><span style="color:#E6EDF3">(self) -> List[T]:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">._items.copy()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Usage</span></span>
<span class="line"><span style="color:#E6EDF3">numbers: Container[</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Container()</span></span>
<span class="line"><span style="color:#E6EDF3">numbers.add(</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">numbers.add(</span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">strings: Container[</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Container()</span></span>
<span class="line"><span style="color:#E6EDF3">strings.add(</span><span style="color:#A5D6FF">"hello"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Generic with constraints</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Protocol</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Comparable</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">Protocol</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __lt__</span><span style="color:#E6EDF3">(self, other: Any) -> </span><span style="color:#79C0FF">bool</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">T_comparable </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> TypeVar(</span><span style="color:#A5D6FF">'T_comparable'</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">bound</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">Comparable)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> find_min</span><span style="color:#E6EDF3">(items: List[T_comparable]) -> T_comparable:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> min</span><span style="color:#E6EDF3">(items)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Generic repository pattern</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Repository</span><span style="color:#E6EDF3">(Generic[T]):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._storage: Dict[</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, T] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {}</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> save</span><span style="color:#E6EDF3">(self, id: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, item: T) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._storage[</span><span style="color:#79C0FF">id</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> item</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> find_by_id</span><span style="color:#E6EDF3">(self, id: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">) -> Optional[T]:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">._storage.get(</span><span style="color:#79C0FF">id</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> find_all</span><span style="color:#E6EDF3">(self) -> List[T]:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> list</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">._storage.values())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@dataclass</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> User</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#79C0FF">    id</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">str</span></span>
<span class="line"><span style="color:#E6EDF3">    name: </span><span style="color:#79C0FF">str</span></span>
<span class="line"><span style="color:#E6EDF3">    email: </span><span style="color:#79C0FF">str</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">user_repo: Repository[User] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Repository()</span></span>
<span class="line"></span></code></pre>
<h3 id="3-protocol-types-structural-subtyping">3. Protocol Types (Structural Subtyping)</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Protocol, runtime_checkable</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Define protocol</span></span>
<span class="line"><span style="color:#D2A8FF">@runtime_checkable</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Drawable</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">Protocol</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> draw</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Circle</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> draw</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"Drawing circle"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Square</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> draw</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"Drawing square"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Works with any class that implements draw()</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> render</span><span style="color:#E6EDF3">(shape: Drawable) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">    shape.draw()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Both work without inheritance</span></span>
<span class="line"><span style="color:#E6EDF3">render(Circle())</span></span>
<span class="line"><span style="color:#E6EDF3">render(Square())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Complex protocol example</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> SupportsClose</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">Protocol</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> close</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> SupportsRead</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">Protocol</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> read</span><span style="color:#E6EDF3">(self, n: </span><span style="color:#79C0FF">int</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> -</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">bytes</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Reader</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">SupportsClose</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">SupportsRead</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">Protocol</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#A5D6FF">    """Anything that can be read and closed"""</span></span>
<span class="line"><span style="color:#FF7B72">    pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> process_file</span><span style="color:#E6EDF3">(file: Reader) -> </span><span style="color:#79C0FF">bytes</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">        data </span><span style="color:#FF7B72">=</span><span style="color:#FFA657"> file</span><span style="color:#E6EDF3">.read()</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> data</span></span>
<span class="line"><span style="color:#FF7B72">    finally</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FFA657">        file</span><span style="color:#E6EDF3">.close()</span></span>
<span class="line"></span></code></pre>
<h3 id="4-advanced-type-hints">4. Advanced Type Hints</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> (</span></span>
<span class="line"><span style="color:#E6EDF3">    Callable, Literal, TypedDict, Final,</span></span>
<span class="line"><span style="color:#E6EDF3">    Annotated, overload, cast</span></span>
<span class="line"><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Callable types</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> execute</span><span style="color:#E6EDF3">(callback: Callable[[</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">], </span><span style="color:#79C0FF">bool</span><span style="color:#E6EDF3">]) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">    result </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> callback(</span><span style="color:#79C0FF">42</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"test"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#79C0FF">    print</span><span style="color:#E6EDF3">(result)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Literal types for strict values</span></span>
<span class="line"><span style="color:#E6EDF3">Mode </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Literal[</span><span style="color:#A5D6FF">"read"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"write"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"append"</span><span style="color:#E6EDF3">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> open_file</span><span style="color:#E6EDF3">(path: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, mode: Mode) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#8B949E">    # mode can only be "read", "write", or "append"</span></span>
<span class="line"><span style="color:#FF7B72">    pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># TypedDict for structured dictionaries</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> UserDict</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">TypedDict</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    name: </span><span style="color:#79C0FF">str</span></span>
<span class="line"><span style="color:#E6EDF3">    age: </span><span style="color:#79C0FF">int</span></span>
<span class="line"><span style="color:#E6EDF3">    email: </span><span style="color:#79C0FF">str</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> create_user</span><span style="color:#E6EDF3">(data: UserDict) -> User:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> User(</span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">data)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Final for constants</span></span>
<span class="line"><span style="color:#79C0FF">MAX_CONNECTIONS</span><span style="color:#E6EDF3">: Final </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 100</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Annotated for metadata</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Annotated</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">UserId </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Annotated[</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"Unique user identifier"</span><span style="color:#E6EDF3">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> get_user</span><span style="color:#E6EDF3">(user_id: UserId) -> User:</span></span>
<span class="line"><span style="color:#FF7B72">    pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Function overloading</span></span>
<span class="line"><span style="color:#D2A8FF">@overload</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> process</span><span style="color:#E6EDF3">(data: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@overload</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> process</span><span style="color:#E6EDF3">(data: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> process</span><span style="color:#E6EDF3">(data: Union[</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">]) -> Union[</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">]:</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#79C0FF"> isinstance</span><span style="color:#E6EDF3">(data, </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> data </span><span style="color:#FF7B72">*</span><span style="color:#79C0FF"> 2</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> data.upper()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Type casting</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> get_value</span><span style="color:#E6EDF3">() -> Any:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#A5D6FF"> "hello"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">value </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> cast(</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, get_value())  </span><span style="color:#8B949E"># Tell mypy it's a str</span></span>
<span class="line"></span></code></pre>
<h2 id="advanced-oop-patterns-oop-patterns">Advanced OOP Patterns {#oop-patterns}</h2>
<h3 id="1-abstract-base-classes">1. Abstract Base Classes</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> abc </span><span style="color:#FF7B72">import</span><span style="color:#79C0FF"> ABC</span><span style="color:#E6EDF3">, abstractmethod</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> List</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Define abstract interface</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Repository</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">ABC</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#D2A8FF">    @abstractmethod</span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> save</span><span style="color:#E6EDF3">(self, entity: Any) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#A5D6FF">        """Save entity to storage"""</span></span>
<span class="line"><span style="color:#FF7B72">        pass</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @abstractmethod</span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> find_by_id</span><span style="color:#E6EDF3">(self, id: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">) -> Optional[Any]:</span></span>
<span class="line"><span style="color:#A5D6FF">        """Find entity by ID"""</span></span>
<span class="line"><span style="color:#FF7B72">        pass</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @abstractmethod</span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> find_all</span><span style="color:#E6EDF3">(self) -> List[Any]:</span></span>
<span class="line"><span style="color:#A5D6FF">        """Get all entities"""</span></span>
<span class="line"><span style="color:#FF7B72">        pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Concrete implementation</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> UserRepository</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">Repository</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._storage: Dict[</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, User] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {}</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> save</span><span style="color:#E6EDF3">(self, user: User) -> </span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._storage[user.id] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> user</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> find_by_id</span><span style="color:#E6EDF3">(self, id: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">) -> Optional[User]:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">._storage.get(</span><span style="color:#79C0FF">id</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> find_all</span><span style="color:#E6EDF3">(self) -> List[User]:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> list</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">._storage.values())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Abstract property</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Shape</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">ABC</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#D2A8FF">    @</span><span style="color:#79C0FF">property</span></span>
<span class="line"><span style="color:#D2A8FF">    @abstractmethod</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> area</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        pass</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @</span><span style="color:#79C0FF">property</span></span>
<span class="line"><span style="color:#D2A8FF">    @abstractmethod</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> perimeter</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Circle</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">Shape</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, radius: </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.radius </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> radius</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @</span><span style="color:#79C0FF">property</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> area</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> 3.14159</span><span style="color:#FF7B72"> *</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.radius </span><span style="color:#FF7B72">**</span><span style="color:#79C0FF"> 2</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @</span><span style="color:#79C0FF">property</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> perimeter</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> 2</span><span style="color:#FF7B72"> *</span><span style="color:#79C0FF"> 3.14159</span><span style="color:#FF7B72"> *</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.radius</span></span>
<span class="line"></span></code></pre>
<h3 id="2-descriptors-and-properties">2. Descriptors and Properties</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># Descriptor protocol</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Validator</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, min_value: </span><span style="color:#79C0FF">int</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> None</span><span style="color:#E6EDF3">, max_value: </span><span style="color:#79C0FF">int</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> None</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.min_value </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> min_value</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.max_value </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> max_value</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __set_name__</span><span style="color:#E6EDF3">(self, owner, name):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.name </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> f</span><span style="color:#A5D6FF">"_</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">name</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __get__</span><span style="color:#E6EDF3">(self, instance, owner):</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#E6EDF3"> instance </span><span style="color:#FF7B72">is</span><span style="color:#79C0FF"> None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#79C0FF"> self</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> getattr</span><span style="color:#E6EDF3">(instance, </span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.name)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __set__</span><span style="color:#E6EDF3">(self, instance, value):</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.min_value </span><span style="color:#FF7B72">is</span><span style="color:#FF7B72"> not</span><span style="color:#79C0FF"> None</span><span style="color:#FF7B72"> and</span><span style="color:#E6EDF3"> value </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.min_value:</span></span>
<span class="line"><span style="color:#FF7B72">            raise</span><span style="color:#79C0FF"> ValueError</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.name</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> must be >= </span><span style="color:#FF7B72">{</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.min_value</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.max_value </span><span style="color:#FF7B72">is</span><span style="color:#FF7B72"> not</span><span style="color:#79C0FF"> None</span><span style="color:#FF7B72"> and</span><span style="color:#E6EDF3"> value </span><span style="color:#FF7B72">></span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.max_value:</span></span>
<span class="line"><span style="color:#FF7B72">            raise</span><span style="color:#79C0FF"> ValueError</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.name</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> must be &#x3C;= </span><span style="color:#FF7B72">{</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.max_value</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#79C0FF">        setattr</span><span style="color:#E6EDF3">(instance, </span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.name, value)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Person</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">    age </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Validator(</span><span style="color:#FFA657">min_value</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">max_value</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">150</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, age: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.age </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> age</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Property with getter, setter, deleter</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Temperature</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, celsius: </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._celsius </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> celsius</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @</span><span style="color:#79C0FF">property</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> celsius</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">._celsius</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @celsius.setter</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> celsius</span><span style="color:#E6EDF3">(self, value: </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#E6EDF3"> value </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#FF7B72"> -</span><span style="color:#79C0FF">273.15</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">            raise</span><span style="color:#79C0FF"> ValueError</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"Temperature below absolute zero"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._celsius </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> value</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @</span><span style="color:#79C0FF">property</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> fahrenheit</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">._celsius </span><span style="color:#FF7B72">*</span><span style="color:#79C0FF"> 9</span><span style="color:#FF7B72">/</span><span style="color:#79C0FF">5</span><span style="color:#FF7B72"> +</span><span style="color:#79C0FF"> 32</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @fahrenheit.setter</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> fahrenheit</span><span style="color:#E6EDF3">(self, value: </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.celsius </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> (value </span><span style="color:#FF7B72">-</span><span style="color:#79C0FF"> 32</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">*</span><span style="color:#79C0FF"> 5</span><span style="color:#FF7B72">/</span><span style="color:#79C0FF">9</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Cached property</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> functools </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> cached_property</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> DataProcessor</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, data: List[</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">]):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._data </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> data</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @cached_property</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> statistics</span><span style="color:#E6EDF3">(self) -> Dict[</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">]:</span></span>
<span class="line"><span style="color:#8B949E">        # Computed once, then cached</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#A5D6FF">            "mean"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">sum</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">._data) </span><span style="color:#FF7B72">/</span><span style="color:#79C0FF"> len</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">._data),</span></span>
<span class="line"><span style="color:#A5D6FF">            "min"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">min</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">._data),</span></span>
<span class="line"><span style="color:#A5D6FF">            "max"</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">max</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">._data)</span></span>
<span class="line"><span style="color:#E6EDF3">        }</span></span>
<span class="line"></span></code></pre>
<h3 id="3-mixins">3. Mixins</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># Mixin classes for composition</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> JSONMixin</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> to_json</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        import</span><span style="color:#E6EDF3"> json</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> json.dumps(</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.</span><span style="color:#79C0FF">__dict__</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @</span><span style="color:#79C0FF">classmethod</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> from_json</span><span style="color:#E6EDF3">(cls, json_str: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">        import</span><span style="color:#E6EDF3"> json</span></span>
<span class="line"><span style="color:#E6EDF3">        data </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> json.loads(json_str)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> cls</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">data)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> TimestampMixin</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, </span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs):</span></span>
<span class="line"><span style="color:#79C0FF">        super</span><span style="color:#E6EDF3">().</span><span style="color:#79C0FF">__init__</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs)</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.created_at </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> datetime.now()</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.updated_at </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> datetime.now()</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> touch</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.updated_at </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> datetime.now()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> ReprMixin</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __repr__</span><span style="color:#E6EDF3">(self) -> </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">        attrs </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> ", "</span><span style="color:#E6EDF3">.join(</span></span>
<span class="line"><span style="color:#FF7B72">            f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">k</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">=</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">v</span><span style="color:#FF7B72">!r}</span><span style="color:#A5D6FF">"</span></span>
<span class="line"><span style="color:#FF7B72">            for</span><span style="color:#E6EDF3"> k, v </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.</span><span style="color:#79C0FF">__dict__</span><span style="color:#E6EDF3">.items()</span></span>
<span class="line"><span style="color:#FF7B72">            if</span><span style="color:#FF7B72"> not</span><span style="color:#E6EDF3"> k.startswith(</span><span style="color:#A5D6FF">"_"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">        )</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#FF7B72"> f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.</span><span style="color:#79C0FF">__class__</span><span style="color:#E6EDF3">.</span><span style="color:#79C0FF">__name__</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">(</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">attrs</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">)"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Combine mixins</span></span>
<span class="line"><span style="color:#D2A8FF">@dataclass</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> User</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">JSONMixin</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">TimestampMixin</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">ReprMixin</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">    id</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">str</span></span>
<span class="line"><span style="color:#E6EDF3">    name: </span><span style="color:#79C0FF">str</span></span>
<span class="line"><span style="color:#E6EDF3">    email: </span><span style="color:#79C0FF">str</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">user </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> User(</span><span style="color:#A5D6FF">"1"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"John"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"john@example.com"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">json_str </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> user.to_json()</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">repr</span><span style="color:#E6EDF3">(user))</span></span>
<span class="line"></span></code></pre>
<h2 id="functional-programming-functional">Functional Programming {#functional}</h2>
<h3 id="1-higher-order-functions">1. Higher-Order Functions</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Callable, Iterable, TypeVar</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">T </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> TypeVar(</span><span style="color:#A5D6FF">'T'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">U </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> TypeVar(</span><span style="color:#A5D6FF">'U'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Map, filter, reduce</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> map_values</span><span style="color:#E6EDF3">(fn: Callable[[T], U], items: Iterable[T]) -> List[U]:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> [fn(item) </span><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> item </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> items]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> filter_values</span><span style="color:#E6EDF3">(predicate: Callable[[T], </span><span style="color:#79C0FF">bool</span><span style="color:#E6EDF3">], items: Iterable[T]) -> List[T]:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> [item </span><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> item </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> items </span><span style="color:#FF7B72">if</span><span style="color:#E6EDF3"> predicate(item)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> functools </span><span style="color:#FF7B72">import</span><span style="color:#FFA657"> reduce</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> sum_values</span><span style="color:#E6EDF3">(items: List[</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">]) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#FFA657"> reduce</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">lambda</span><span style="color:#E6EDF3"> acc, x: acc </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> x, items, </span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Compose functions</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> compose</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">functions: Callable) -> Callable:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> inner</span><span style="color:#E6EDF3">(arg):</span></span>
<span class="line"><span style="color:#E6EDF3">        result </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> arg</span></span>
<span class="line"><span style="color:#FF7B72">        for</span><span style="color:#E6EDF3"> fn </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> reversed</span><span style="color:#E6EDF3">(functions):</span></span>
<span class="line"><span style="color:#E6EDF3">            result </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> fn(result)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> result</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> inner</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> add_one</span><span style="color:#E6EDF3">(x: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">+</span><span style="color:#79C0FF"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> double</span><span style="color:#E6EDF3">(x: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">*</span><span style="color:#79C0FF"> 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> square</span><span style="color:#E6EDF3">(x: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">**</span><span style="color:#79C0FF"> 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Compose: square(double(add_one(x)))</span></span>
<span class="line"><span style="color:#E6EDF3">process </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> compose(square, double, add_one)</span></span>
<span class="line"><span style="color:#E6EDF3">result </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> process(</span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">)  </span><span style="color:#8B949E"># ((5 + 1) * 2) ** 2 = 144</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Partial application</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> functools </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> partial</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> power</span><span style="color:#E6EDF3">(base: </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">, exponent: </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">float</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> base </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3"> exponent</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">square </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> partial(power, </span><span style="color:#FFA657">exponent</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">cube </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> partial(power, </span><span style="color:#FFA657">exponent</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(square(</span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">))  </span><span style="color:#8B949E"># 25</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(cube(</span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">))    </span><span style="color:#8B949E"># 125</span></span>
<span class="line"></span></code></pre>
<h3 id="2-closures-and-currying">2. Closures and Currying</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># Closure example</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> make_multiplier</span><span style="color:#E6EDF3">(factor: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> Callable[[</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">], </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">]:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> multiply</span><span style="color:#E6EDF3">(x: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3"> factor</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> multiply</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">double </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> make_multiplier(</span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">triple </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> make_multiplier(</span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(double(</span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">))  </span><span style="color:#8B949E"># 10</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(triple(</span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">))  </span><span style="color:#8B949E"># 15</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Counter with closure</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> make_counter</span><span style="color:#E6EDF3">(start: </span><span style="color:#79C0FF">int</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">) -> Callable[[], </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">]:</span></span>
<span class="line"><span style="color:#E6EDF3">    count </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> start</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> counter</span><span style="color:#E6EDF3">() -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        nonlocal</span><span style="color:#E6EDF3"> count</span></span>
<span class="line"><span style="color:#E6EDF3">        count </span><span style="color:#FF7B72">+=</span><span style="color:#79C0FF"> 1</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> count</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> counter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">counter1 </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> make_counter()</span></span>
<span class="line"><span style="color:#E6EDF3">counter2 </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> make_counter(</span><span style="color:#79C0FF">100</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(counter1())  </span><span style="color:#8B949E"># 1</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(counter1())  </span><span style="color:#8B949E"># 2</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(counter2())  </span><span style="color:#8B949E"># 101</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Currying</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> curry</span><span style="color:#E6EDF3">(fn: Callable) -> Callable:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> curried</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args):</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#79C0FF"> len</span><span style="color:#E6EDF3">(args) </span><span style="color:#FF7B72">>=</span><span style="color:#E6EDF3"> fn.</span><span style="color:#79C0FF">__code__</span><span style="color:#E6EDF3">.co_argcount:</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#E6EDF3"> fn(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#FF7B72"> lambda</span><span style="color:#FF7B72"> *</span><span style="color:#E6EDF3">more_args: curried(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">(args </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> more_args))</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> curried</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@curry</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> add_three</span><span style="color:#E6EDF3">(a: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">, b: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">, c: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> a </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> b </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> c</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(add_three(</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">)(</span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">)(</span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">))     </span><span style="color:#8B949E"># 6</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(add_three(</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">)(</span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">))     </span><span style="color:#8B949E"># 6</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(add_three(</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">)(</span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">))     </span><span style="color:#8B949E"># 6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Memoization</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> functools </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> lru_cache</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@lru_cache</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">maxsize</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">128</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> fibonacci</span><span style="color:#E6EDF3">(n: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> n </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#79C0FF"> 2</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> n</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> fibonacci(n </span><span style="color:#FF7B72">-</span><span style="color:#79C0FF"> 1</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> fibonacci(n </span><span style="color:#FF7B72">-</span><span style="color:#79C0FF"> 2</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Custom memoization</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> memoize</span><span style="color:#E6EDF3">(fn: Callable) -> Callable:</span></span>
<span class="line"><span style="color:#E6EDF3">    cache </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {}</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> memoized</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args):</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#E6EDF3"> args </span><span style="color:#FF7B72">not</span><span style="color:#FF7B72"> in</span><span style="color:#E6EDF3"> cache:</span></span>
<span class="line"><span style="color:#E6EDF3">            cache[args] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> fn(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> cache[args]</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> memoized</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@memoize</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> expensive_computation</span><span style="color:#E6EDF3">(x: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">, y: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#79C0FF">    print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Computing </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">x</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> + </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">y</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(expensive_computation(</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">))  </span><span style="color:#8B949E"># Computes</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(expensive_computation(</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">))  </span><span style="color:#8B949E"># Uses cache</span></span>
<span class="line"></span></code></pre>
<h3 id="3-itertools-and-generators">3. Itertools and Generators</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> itertools </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> (</span></span>
<span class="line"><span style="color:#E6EDF3">    chain, combinations, permutations,</span></span>
<span class="line"><span style="color:#E6EDF3">    product, groupby, islice, cycle</span></span>
<span class="line"><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Chain iterables</span></span>
<span class="line"><span style="color:#E6EDF3">list1 </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">list2 </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">6</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">chained </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> chain(list1, list2)  </span><span style="color:#8B949E"># [1, 2, 3, 4, 5, 6]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Combinations and permutations</span></span>
<span class="line"><span style="color:#E6EDF3">items </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">combos </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> list</span><span style="color:#E6EDF3">(combinations(items, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">))     </span><span style="color:#8B949E"># [(1,2), (1,3), (2,3)]</span></span>
<span class="line"><span style="color:#E6EDF3">perms </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> list</span><span style="color:#E6EDF3">(permutations(items, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">))      </span><span style="color:#8B949E"># [(1,2), (1,3), (2,1), (2,3), (3,1), (3,2)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Cartesian product</span></span>
<span class="line"><span style="color:#E6EDF3">colors </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span><span style="color:#A5D6FF">'red'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'blue'</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">sizes </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span><span style="color:#A5D6FF">'S'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'M'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'L'</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">products </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> list</span><span style="color:#E6EDF3">(product(colors, sizes))</span></span>
<span class="line"><span style="color:#8B949E"># [('red','S'), ('red','M'), ('red','L'), ('blue','S'), ('blue','M'), ('blue','L')]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Group by</span></span>
<span class="line"><span style="color:#E6EDF3">data </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span></span>
<span class="line"><span style="color:#E6EDF3">    {</span><span style="color:#A5D6FF">'category'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'fruit'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'name'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'apple'</span><span style="color:#E6EDF3">},</span></span>
<span class="line"><span style="color:#E6EDF3">    {</span><span style="color:#A5D6FF">'category'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'fruit'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'name'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'banana'</span><span style="color:#E6EDF3">},</span></span>
<span class="line"><span style="color:#E6EDF3">    {</span><span style="color:#A5D6FF">'category'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'vegetable'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'name'</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">'carrot'</span><span style="color:#E6EDF3">}</span></span>
<span class="line"><span style="color:#E6EDF3">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">sorted_data </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> sorted</span><span style="color:#E6EDF3">(data, </span><span style="color:#FFA657">key</span><span style="color:#FF7B72">=lambda</span><span style="color:#E6EDF3"> x: x[</span><span style="color:#A5D6FF">'category'</span><span style="color:#E6EDF3">])</span></span>
<span class="line"><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> category, items </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> groupby(sorted_data, </span><span style="color:#FFA657">key</span><span style="color:#FF7B72">=lambda</span><span style="color:#E6EDF3"> x: x[</span><span style="color:#A5D6FF">'category'</span><span style="color:#E6EDF3">]):</span></span>
<span class="line"><span style="color:#79C0FF">    print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">category</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">: </span><span style="color:#FF7B72">{</span><span style="color:#79C0FF">list</span><span style="color:#E6EDF3">(items)</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Generator functions</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> fibonacci_gen</span><span style="color:#E6EDF3">(n: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    a, b </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">1</span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> _ </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(n):</span></span>
<span class="line"><span style="color:#FF7B72">        yield</span><span style="color:#E6EDF3"> a</span></span>
<span class="line"><span style="color:#E6EDF3">        a, b </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> b, a </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> b</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Generator expression</span></span>
<span class="line"><span style="color:#E6EDF3">squares </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> (x</span><span style="color:#FF7B72">**</span><span style="color:#79C0FF">2</span><span style="color:#FF7B72"> for</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">10</span><span style="color:#E6EDF3">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Infinite generator</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> infinite_counter</span><span style="color:#E6EDF3">(start: </span><span style="color:#79C0FF">int</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    while</span><span style="color:#79C0FF"> True</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        yield</span><span style="color:#E6EDF3"> start</span></span>
<span class="line"><span style="color:#E6EDF3">        start </span><span style="color:#FF7B72">+=</span><span style="color:#79C0FF"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Take first 10 from infinite sequence</span></span>
<span class="line"><span style="color:#E6EDF3">counter </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> infinite_counter()</span></span>
<span class="line"><span style="color:#E6EDF3">first_ten </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> list</span><span style="color:#E6EDF3">(islice(counter, </span><span style="color:#79C0FF">10</span><span style="color:#E6EDF3">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Pipeline with generators</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> read_file</span><span style="color:#E6EDF3">(filename: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    with</span><span style="color:#79C0FF"> open</span><span style="color:#E6EDF3">(filename) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> f:</span></span>
<span class="line"><span style="color:#FF7B72">        for</span><span style="color:#E6EDF3"> line </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> f:</span></span>
<span class="line"><span style="color:#FF7B72">            yield</span><span style="color:#E6EDF3"> line.strip()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> filter_comments</span><span style="color:#E6EDF3">(lines):</span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> line </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> lines:</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#FF7B72"> not</span><span style="color:#E6EDF3"> line.startswith(</span><span style="color:#A5D6FF">'#'</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">            yield</span><span style="color:#E6EDF3"> line</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> parse_line</span><span style="color:#E6EDF3">(lines):</span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> line </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> lines:</span></span>
<span class="line"><span style="color:#E6EDF3">        parts </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> line.split(</span><span style="color:#A5D6FF">','</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">        yield</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">'name'</span><span style="color:#E6EDF3">: parts[</span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">], </span><span style="color:#A5D6FF">'value'</span><span style="color:#E6EDF3">: parts[</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">]}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Chain generators</span></span>
<span class="line"><span style="color:#E6EDF3">pipeline </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> parse_line(filter_comments(read_file(</span><span style="color:#A5D6FF">'data.csv'</span><span style="color:#E6EDF3">)))</span></span>
<span class="line"><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> item </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> pipeline:</span></span>
<span class="line"><span style="color:#79C0FF">    print</span><span style="color:#E6EDF3">(item)</span></span>
<span class="line"></span></code></pre>
<h2 id="context-managers-context-managers">Context Managers {#context-managers}</h2>
<h3 id="1-basic-context-managers">1. Basic Context Managers</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> contextlib </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> contextmanager</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Generator</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Class-based context manager</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> FileManager</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, filename: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, mode: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.filename </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> filename</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.mode </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> mode</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.file </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> None</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __enter__</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.file </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> open</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.filename, </span><span style="color:#79C0FF">self</span><span style="color:#E6EDF3">.mode)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.file</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __exit__</span><span style="color:#E6EDF3">(self, exc_type, exc_val, exc_tb):</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.file:</span></span>
<span class="line"><span style="color:#79C0FF">            self</span><span style="color:#E6EDF3">.file.close()</span></span>
<span class="line"><span style="color:#8B949E">        # Return False to propagate exceptions</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> False</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Usage</span></span>
<span class="line"><span style="color:#FF7B72">with</span><span style="color:#E6EDF3"> FileManager(</span><span style="color:#A5D6FF">'data.txt'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'w'</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> f:</span></span>
<span class="line"><span style="color:#E6EDF3">    f.write(</span><span style="color:#A5D6FF">'Hello, World!'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Function-based context manager</span></span>
<span class="line"><span style="color:#D2A8FF">@contextmanager</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> file_manager</span><span style="color:#E6EDF3">(filename: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, mode: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">) -> Generator:</span></span>
<span class="line"><span style="color:#FFA657">    file</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> open</span><span style="color:#E6EDF3">(filename, mode)</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        yield</span><span style="color:#FFA657"> file</span></span>
<span class="line"><span style="color:#FF7B72">    finally</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FFA657">        file</span><span style="color:#E6EDF3">.close()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">with</span><span style="color:#E6EDF3"> file_manager(</span><span style="color:#A5D6FF">'data.txt'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'r'</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> f:</span></span>
<span class="line"><span style="color:#E6EDF3">    content </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> f.read()</span></span>
<span class="line"></span></code></pre>
<h3 id="2-advanced-context-managers">2. Advanced Context Managers</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> time</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> contextlib </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> contextmanager</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Timer context manager</span></span>
<span class="line"><span style="color:#D2A8FF">@contextmanager</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> timer</span><span style="color:#E6EDF3">(operation: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    start </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> time.time()</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        yield</span></span>
<span class="line"><span style="color:#FF7B72">    finally</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">        end </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> time.time()</span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">operation</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> took </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">end </span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3"> start</span><span style="color:#FF7B72">:.2f}</span><span style="color:#A5D6FF"> seconds"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">with</span><span style="color:#E6EDF3"> timer(</span><span style="color:#A5D6FF">"Database query"</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#8B949E">    # Expensive operation</span></span>
<span class="line"><span style="color:#E6EDF3">    result </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> expensive_query()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Database transaction context manager</span></span>
<span class="line"><span style="color:#D2A8FF">@contextmanager</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> transaction</span><span style="color:#E6EDF3">(connection):</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        yield</span><span style="color:#E6EDF3"> connection</span></span>
<span class="line"><span style="color:#E6EDF3">        connection.commit()</span></span>
<span class="line"><span style="color:#FF7B72">    except</span><span style="color:#79C0FF"> Exception</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">        connection.rollback()</span></span>
<span class="line"><span style="color:#FF7B72">        raise</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">with</span><span style="color:#E6EDF3"> transaction(db_connection) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> conn:</span></span>
<span class="line"><span style="color:#E6EDF3">    conn.execute(</span><span style="color:#A5D6FF">"INSERT INTO users VALUES (...)"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    conn.execute(</span><span style="color:#A5D6FF">"UPDATE accounts SET balance = ..."</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Temporary directory context manager</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> tempfile</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> shutil</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@contextmanager</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> temporary_directory</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#E6EDF3">    temp_dir </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> tempfile.mkdtemp()</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        yield</span><span style="color:#E6EDF3"> temp_dir</span></span>
<span class="line"><span style="color:#FF7B72">    finally</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">        shutil.rmtree(temp_dir)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">with</span><span style="color:#E6EDF3"> temporary_directory() </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> temp_dir:</span></span>
<span class="line"><span style="color:#8B949E">    # Work with temporary files</span></span>
<span class="line"><span style="color:#E6EDF3">    file_path </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">temp_dir</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">/temp.txt"</span></span>
<span class="line"><span style="color:#FF7B72">    with</span><span style="color:#79C0FF"> open</span><span style="color:#E6EDF3">(file_path, </span><span style="color:#A5D6FF">'w'</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> f:</span></span>
<span class="line"><span style="color:#E6EDF3">        f.write(</span><span style="color:#A5D6FF">"Temporary data"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#8B949E"># Directory is automatically deleted</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Multiple context managers</span></span>
<span class="line"><span style="color:#FF7B72">with</span><span style="color:#E6EDF3"> (</span></span>
<span class="line"><span style="color:#79C0FF">    open</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'input.txt'</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> infile,</span></span>
<span class="line"><span style="color:#79C0FF">    open</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'output.txt'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'w'</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> outfile,</span></span>
<span class="line"><span style="color:#E6EDF3">    timer(</span><span style="color:#A5D6FF">"File processing"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> line </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> infile:</span></span>
<span class="line"><span style="color:#E6EDF3">        outfile.write(line.upper())</span></span>
<span class="line"></span></code></pre>
<h3 id="3-async-context-managers">3. Async Context Managers</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> contextlib </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> asynccontextmanager</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> asyncio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Async context manager class</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> AsyncDatabaseConnection</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#79C0FF"> __aenter__</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.connection </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> connect_to_database()</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.connection</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#79C0FF"> __aexit__</span><span style="color:#E6EDF3">(self, exc_type, exc_val, exc_tb):</span></span>
<span class="line"><span style="color:#FF7B72">        await</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.connection.close()</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> False</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> with</span><span style="color:#E6EDF3"> AsyncDatabaseConnection() </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> conn:</span></span>
<span class="line"><span style="color:#E6EDF3">    result </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> conn.execute(</span><span style="color:#A5D6FF">"SELECT * FROM users"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Async context manager function</span></span>
<span class="line"><span style="color:#D2A8FF">@asynccontextmanager</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> async_timer</span><span style="color:#E6EDF3">(operation: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    start </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> time.time()</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        yield</span></span>
<span class="line"><span style="color:#FF7B72">    finally</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">        end </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> time.time()</span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">operation</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> took </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">end </span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3"> start</span><span style="color:#FF7B72">:.2f}</span><span style="color:#A5D6FF"> seconds"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> with</span><span style="color:#E6EDF3"> async_timer(</span><span style="color:#A5D6FF">"API call"</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    result </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> fetch_data()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Async resource pool</span></span>
<span class="line"><span style="color:#D2A8FF">@asynccontextmanager</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> get_connection</span><span style="color:#E6EDF3">(pool):</span></span>
<span class="line"><span style="color:#E6EDF3">    connection </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> pool.acquire()</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        yield</span><span style="color:#E6EDF3"> connection</span></span>
<span class="line"><span style="color:#FF7B72">    finally</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        await</span><span style="color:#E6EDF3"> pool.release(connection)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> with</span><span style="color:#E6EDF3"> get_connection(db_pool) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> conn:</span></span>
<span class="line"><span style="color:#E6EDF3">    data </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> conn.fetchall(</span><span style="color:#A5D6FF">"SELECT * FROM users"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span></code></pre>
<h2 id="decorators-and-metaprogramming-decorators">Decorators and Metaprogramming {#decorators}</h2>
<h3 id="1-function-decorators">1. Function Decorators</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> functools </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> wraps</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Callable</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Basic decorator</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> timer</span><span style="color:#E6EDF3">(func: Callable) -> Callable:</span></span>
<span class="line"><span style="color:#D2A8FF">    @wraps</span><span style="color:#E6EDF3">(func)</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> wrapper</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs):</span></span>
<span class="line"><span style="color:#E6EDF3">        start </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> time.time()</span></span>
<span class="line"><span style="color:#E6EDF3">        result </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> func(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs)</span></span>
<span class="line"><span style="color:#E6EDF3">        end </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> time.time()</span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">func.</span><span style="color:#79C0FF">__name__</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> took </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">end </span><span style="color:#FF7B72">-</span><span style="color:#E6EDF3"> start</span><span style="color:#FF7B72">:.2f}</span><span style="color:#A5D6FF">s"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> result</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> wrapper</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@timer</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> slow_function</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#E6EDF3">    time.sleep(</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#A5D6FF"> "Done"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Decorator with arguments</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> retry</span><span style="color:#E6EDF3">(max_attempts: </span><span style="color:#79C0FF">int</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> 3</span><span style="color:#E6EDF3">, delay: </span><span style="color:#79C0FF">float</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> 1.0</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> decorator</span><span style="color:#E6EDF3">(func: Callable) -> Callable:</span></span>
<span class="line"><span style="color:#D2A8FF">        @wraps</span><span style="color:#E6EDF3">(func)</span></span>
<span class="line"><span style="color:#FF7B72">        def</span><span style="color:#D2A8FF"> wrapper</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs):</span></span>
<span class="line"><span style="color:#FF7B72">            for</span><span style="color:#E6EDF3"> attempt </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(max_attempts):</span></span>
<span class="line"><span style="color:#FF7B72">                try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">                    return</span><span style="color:#E6EDF3"> func(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs)</span></span>
<span class="line"><span style="color:#FF7B72">                except</span><span style="color:#79C0FF"> Exception</span><span style="color:#FF7B72"> as</span><span style="color:#E6EDF3"> e:</span></span>
<span class="line"><span style="color:#FF7B72">                    if</span><span style="color:#E6EDF3"> attempt </span><span style="color:#FF7B72">==</span><span style="color:#E6EDF3"> max_attempts </span><span style="color:#FF7B72">-</span><span style="color:#79C0FF"> 1</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">                        raise</span></span>
<span class="line"><span style="color:#79C0FF">                    print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Attempt </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">attempt </span><span style="color:#FF7B72">+</span><span style="color:#79C0FF"> 1</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> failed: </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">e</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">                    time.sleep(delay)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> wrapper</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> decorator</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@retry</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">max_attempts</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">delay</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">0.5</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> unreliable_api_call</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#8B949E">    # May fail, will retry</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> make_request()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Decorator for caching</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> functools </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> lru_cache</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@lru_cache</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">maxsize</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">128</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> fibonacci</span><span style="color:#E6EDF3">(n: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    if</span><span style="color:#E6EDF3"> n </span><span style="color:#FF7B72">&#x3C;</span><span style="color:#79C0FF"> 2</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> n</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> fibonacci(n </span><span style="color:#FF7B72">-</span><span style="color:#79C0FF"> 1</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">+</span><span style="color:#E6EDF3"> fibonacci(n </span><span style="color:#FF7B72">-</span><span style="color:#79C0FF"> 2</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Decorator for validation</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> validate_types</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">type_hints):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> decorator</span><span style="color:#E6EDF3">(func: Callable) -> Callable:</span></span>
<span class="line"><span style="color:#D2A8FF">        @wraps</span><span style="color:#E6EDF3">(func)</span></span>
<span class="line"><span style="color:#FF7B72">        def</span><span style="color:#D2A8FF"> wrapper</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs):</span></span>
<span class="line"><span style="color:#8B949E">            # Validate argument types</span></span>
<span class="line"><span style="color:#FF7B72">            for</span><span style="color:#E6EDF3"> name, expected_type </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> type_hints.items():</span></span>
<span class="line"><span style="color:#E6EDF3">                value </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> kwargs.get(name)</span></span>
<span class="line"><span style="color:#FF7B72">                if</span><span style="color:#E6EDF3"> value </span><span style="color:#FF7B72">is</span><span style="color:#FF7B72"> not</span><span style="color:#79C0FF"> None</span><span style="color:#FF7B72"> and</span><span style="color:#FF7B72"> not</span><span style="color:#79C0FF"> isinstance</span><span style="color:#E6EDF3">(value, expected_type):</span></span>
<span class="line"><span style="color:#FF7B72">                    raise</span><span style="color:#79C0FF"> TypeError</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#FF7B72">                        f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">name</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> must be </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">expected_type</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">, got </span><span style="color:#FF7B72">{</span><span style="color:#79C0FF">type</span><span style="color:#E6EDF3">(value)</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span></span>
<span class="line"><span style="color:#E6EDF3">                    )</span></span>
<span class="line"><span style="color:#FF7B72">            return</span><span style="color:#E6EDF3"> func(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> wrapper</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> decorator</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@validate_types</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">name</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">age</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> create_user</span><span style="color:#E6EDF3">(name: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, age: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> User(</span><span style="color:#FFA657">name</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">name, </span><span style="color:#FFA657">age</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">age)</span></span>
<span class="line"></span></code></pre>
<h3 id="2-class-decorators">2. Class Decorators</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># Class decorator for singleton</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> singleton</span><span style="color:#E6EDF3">(cls):</span></span>
<span class="line"><span style="color:#E6EDF3">    instances </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {}</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @wraps</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">cls</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> get_instance</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs):</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#79C0FF"> cls</span><span style="color:#FF7B72"> not</span><span style="color:#FF7B72"> in</span><span style="color:#E6EDF3"> instances:</span></span>
<span class="line"><span style="color:#E6EDF3">            instances[</span><span style="color:#79C0FF">cls</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> cls</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> instances[</span><span style="color:#79C0FF">cls</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> get_instance</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@singleton</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Database</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.connection </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> connect()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Class decorator for adding methods</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> add_repr</span><span style="color:#E6EDF3">(cls):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __repr__</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#E6EDF3">        attrs </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> ", "</span><span style="color:#E6EDF3">.join(</span></span>
<span class="line"><span style="color:#FF7B72">            f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">k</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">=</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">v</span><span style="color:#FF7B72">!r}</span><span style="color:#A5D6FF">"</span></span>
<span class="line"><span style="color:#FF7B72">            for</span><span style="color:#E6EDF3"> k, v </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">.</span><span style="color:#79C0FF">__dict__</span><span style="color:#E6EDF3">.items()</span></span>
<span class="line"><span style="color:#E6EDF3">        )</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#FF7B72"> f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#79C0FF">cls</span><span style="color:#E6EDF3">.</span><span style="color:#79C0FF">__name__</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">(</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">attrs</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">)"</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#79C0FF">    cls</span><span style="color:#E6EDF3">.</span><span style="color:#79C0FF">__repr__</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> __repr__</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> cls</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@add_repr</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> User</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, name: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, email: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.name </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> name</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.email </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> email</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Class decorator for registration</span></span>
<span class="line"><span style="color:#E6EDF3">_handlers </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> register_handler</span><span style="color:#E6EDF3">(event_type: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> decorator</span><span style="color:#E6EDF3">(cls):</span></span>
<span class="line"><span style="color:#E6EDF3">        _handlers[event_type] </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> cls</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> cls</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> decorator</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@register_handler</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"user.created"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> UserCreatedHandler</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> handle</span><span style="color:#E6EDF3">(self, event):</span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"User created: </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">event</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> get_handler</span><span style="color:#E6EDF3">(event_type: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> _handlers.get(event_type)</span></span>
<span class="line"></span></code></pre>
<h3 id="3-metaclasses">3. Metaclasses</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># Basic metaclass</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> SingletonMeta</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">type</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    _instances </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {}</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __call__</span><span style="color:#E6EDF3">(cls, </span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs):</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#79C0FF"> cls</span><span style="color:#FF7B72"> not</span><span style="color:#FF7B72"> in</span><span style="color:#79C0FF"> cls</span><span style="color:#E6EDF3">._instances:</span></span>
<span class="line"><span style="color:#79C0FF">            cls</span><span style="color:#E6EDF3">._instances[</span><span style="color:#79C0FF">cls</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> super</span><span style="color:#E6EDF3">().</span><span style="color:#79C0FF">__call__</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">args, </span><span style="color:#FF7B72">**</span><span style="color:#E6EDF3">kwargs)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> cls</span><span style="color:#E6EDF3">._instances[</span><span style="color:#79C0FF">cls</span><span style="color:#E6EDF3">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Database</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">metaclass</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">SingletonMeta</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.connection </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> "Connected"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">db1 </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Database()</span></span>
<span class="line"><span style="color:#E6EDF3">db2 </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Database()</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(db1 </span><span style="color:#FF7B72">is</span><span style="color:#E6EDF3"> db2)  </span><span style="color:#8B949E"># True</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Metaclass for automatic registration</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> PluginMeta</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">type</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    plugins </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {}</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __new__</span><span style="color:#E6EDF3">(mcs, name, bases, attrs):</span></span>
<span class="line"><span style="color:#79C0FF">        cls</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> super</span><span style="color:#E6EDF3">().</span><span style="color:#79C0FF">__new__</span><span style="color:#E6EDF3">(mcs, name, bases, attrs)</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#E6EDF3"> name </span><span style="color:#FF7B72">!=</span><span style="color:#A5D6FF"> 'Plugin'</span><span style="color:#E6EDF3">:  </span><span style="color:#8B949E"># Don't register base class</span></span>
<span class="line"><span style="color:#E6EDF3">            mcs.plugins[name] </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> cls</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> cls</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Plugin</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">metaclass</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">PluginMeta</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> EmailPlugin</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">Plugin</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> send</span><span style="color:#E6EDF3">(self, message):</span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Sending email: </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">message</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> SMSPlugin</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">Plugin</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> send</span><span style="color:#E6EDF3">(self, message):</span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Sending SMS: </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">message</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Access all registered plugins</span></span>
<span class="line"><span style="color:#79C0FF">print</span><span style="color:#E6EDF3">(PluginMeta.plugins)  </span><span style="color:#8B949E"># {'EmailPlugin': ..., 'SMSPlugin': ...}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Metaclass for validation</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> ValidatedMeta</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">type</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __new__</span><span style="color:#E6EDF3">(mcs, name, bases, attrs):</span></span>
<span class="line"><span style="color:#8B949E">        # Validate required methods</span></span>
<span class="line"><span style="color:#E6EDF3">        required_methods </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span><span style="color:#A5D6FF">'validate'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'save'</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#FF7B72">        for</span><span style="color:#E6EDF3"> method </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> required_methods:</span></span>
<span class="line"><span style="color:#FF7B72">            if</span><span style="color:#E6EDF3"> method </span><span style="color:#FF7B72">not</span><span style="color:#FF7B72"> in</span><span style="color:#E6EDF3"> attrs:</span></span>
<span class="line"><span style="color:#FF7B72">                raise</span><span style="color:#79C0FF"> TypeError</span><span style="color:#E6EDF3">(</span></span>
<span class="line"><span style="color:#FF7B72">                    f</span><span style="color:#A5D6FF">"</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">name</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> must implement </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">method</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> method"</span></span>
<span class="line"><span style="color:#E6EDF3">                )</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> super</span><span style="color:#E6EDF3">().</span><span style="color:#79C0FF">__new__</span><span style="color:#E6EDF3">(mcs, name, bases, attrs)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Model</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">metaclass</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">ValidatedMeta</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> validate</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#FF7B72">        pass</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> save</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#FF7B72">        pass</span></span>
<span class="line"></span></code></pre>
<h2 id="concurrency-and-parallelism-concurrency">Concurrency and Parallelism {#concurrency}</h2>
<h3 id="1-asyncio-basics">1. Asyncio Basics</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> asyncio</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> List</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Basic async function</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> fetch_data</span><span style="color:#E6EDF3">(url: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">dict</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#79C0FF">    print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Fetching </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">url</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">    await</span><span style="color:#E6EDF3"> asyncio.sleep(</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">)  </span><span style="color:#8B949E"># Simulate network delay</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">"url"</span><span style="color:#E6EDF3">: url, </span><span style="color:#A5D6FF">"data"</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">"..."</span><span style="color:#E6EDF3">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Run async function</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> main</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#E6EDF3">    result </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> fetch_data(</span><span style="color:#A5D6FF">"https://api.example.com"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#79C0FF">    print</span><span style="color:#E6EDF3">(result)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">asyncio.run(main())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Concurrent execution</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> fetch_all</span><span style="color:#E6EDF3">(urls: List[</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">]) -> List[</span><span style="color:#79C0FF">dict</span><span style="color:#E6EDF3">]:</span></span>
<span class="line"><span style="color:#E6EDF3">    tasks </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [fetch_data(url) </span><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> url </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> urls]</span></span>
<span class="line"><span style="color:#E6EDF3">    results </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> asyncio.gather(</span><span style="color:#FF7B72">*</span><span style="color:#E6EDF3">tasks)</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> results</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">urls </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span></span>
<span class="line"><span style="color:#A5D6FF">    "https://api.example.com/1"</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">    "https://api.example.com/2"</span><span style="color:#E6EDF3">,</span></span>
<span class="line"><span style="color:#A5D6FF">    "https://api.example.com/3"</span></span>
<span class="line"><span style="color:#E6EDF3">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">results </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> asyncio.run(fetch_all(urls))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># With timeout</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> fetch_with_timeout</span><span style="color:#E6EDF3">(url: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">, timeout: </span><span style="color:#79C0FF">float</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> 5.0</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> asyncio.wait_for(</span></span>
<span class="line"><span style="color:#E6EDF3">            fetch_data(url),</span></span>
<span class="line"><span style="color:#FFA657">            timeout</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">timeout</span></span>
<span class="line"><span style="color:#E6EDF3">        )</span></span>
<span class="line"><span style="color:#FF7B72">    except</span><span style="color:#E6EDF3"> asyncio.TimeoutError:</span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Timeout fetching </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">url</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#79C0FF"> None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Async context manager for connection pool</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> AsyncConnectionPool</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, max_connections: </span><span style="color:#79C0FF">int</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> 10</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._semaphore </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> asyncio.Semaphore(max_connections)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> acquire</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#FF7B72">        await</span><span style="color:#79C0FF"> self</span><span style="color:#E6EDF3">._semaphore.acquire()</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> Connection()</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> release</span><span style="color:#E6EDF3">(self, connection):</span></span>
<span class="line"><span style="color:#FF7B72">        await</span><span style="color:#E6EDF3"> connection.close()</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">._semaphore.release()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">pool </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> AsyncConnectionPool(</span><span style="color:#FFA657">max_connections</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> make_request</span><span style="color:#E6EDF3">(url: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    connection </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> pool.acquire()</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">        result </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> connection.fetch(url)</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> result</span></span>
<span class="line"><span style="color:#FF7B72">    finally</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">        await</span><span style="color:#E6EDF3"> pool.release(connection)</span></span>
<span class="line"></span></code></pre>
<h3 id="2-threading">2. Threading</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> threading</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> queue </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Queue</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Callable</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Basic threading</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> worker</span><span style="color:#E6EDF3">(name: </span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">    print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Worker </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">name</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> starting"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    time.sleep(</span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#79C0FF">    print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Worker </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">name</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF"> finished"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">threads </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> []</span></span>
<span class="line"><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> i </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    t </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> threading.Thread(</span><span style="color:#FFA657">target</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">worker, </span><span style="color:#FFA657">args</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"#</span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">i</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">,))</span></span>
<span class="line"><span style="color:#E6EDF3">    t.start()</span></span>
<span class="line"><span style="color:#E6EDF3">    threads.append(t)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> t </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> threads:</span></span>
<span class="line"><span style="color:#E6EDF3">    t.join()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Thread pool</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> concurrent.futures </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> ThreadPoolExecutor</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> process_item</span><span style="color:#E6EDF3">(item: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">    time.sleep(</span><span style="color:#79C0FF">0.5</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> item </span><span style="color:#FF7B72">**</span><span style="color:#79C0FF"> 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">with</span><span style="color:#E6EDF3"> ThreadPoolExecutor(</span><span style="color:#FFA657">max_workers</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> executor:</span></span>
<span class="line"><span style="color:#E6EDF3">    items </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">10</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    results </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> list</span><span style="color:#E6EDF3">(executor.map(process_item, items))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Thread-safe queue</span></span>
<span class="line"><span style="color:#E6EDF3">task_queue </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Queue()</span></span>
<span class="line"><span style="color:#E6EDF3">result_queue </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Queue()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> worker_thread</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#FF7B72">    while</span><span style="color:#79C0FF"> True</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">        item </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> task_queue.get()</span></span>
<span class="line"><span style="color:#FF7B72">        if</span><span style="color:#E6EDF3"> item </span><span style="color:#FF7B72">is</span><span style="color:#79C0FF"> None</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">            break</span></span>
<span class="line"><span style="color:#E6EDF3">        result </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> process_item(item)</span></span>
<span class="line"><span style="color:#E6EDF3">        result_queue.put(result)</span></span>
<span class="line"><span style="color:#E6EDF3">        task_queue.task_done()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Start workers</span></span>
<span class="line"><span style="color:#E6EDF3">num_workers </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 4</span></span>
<span class="line"><span style="color:#E6EDF3">workers </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> []</span></span>
<span class="line"><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> _ </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(num_workers):</span></span>
<span class="line"><span style="color:#E6EDF3">    t </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> threading.Thread(</span><span style="color:#FFA657">target</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">worker_thread)</span></span>
<span class="line"><span style="color:#E6EDF3">    t.start()</span></span>
<span class="line"><span style="color:#E6EDF3">    workers.append(t)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Add tasks</span></span>
<span class="line"><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> i </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">20</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    task_queue.put(i)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Wait for completion</span></span>
<span class="line"><span style="color:#E6EDF3">task_queue.join()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Stop workers</span></span>
<span class="line"><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> _ </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(num_workers):</span></span>
<span class="line"><span style="color:#E6EDF3">    task_queue.put(</span><span style="color:#79C0FF">None</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> t </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> workers:</span></span>
<span class="line"><span style="color:#E6EDF3">    t.join()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Collect results</span></span>
<span class="line"><span style="color:#E6EDF3">results </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> []</span></span>
<span class="line"><span style="color:#FF7B72">while</span><span style="color:#FF7B72"> not</span><span style="color:#E6EDF3"> result_queue.empty():</span></span>
<span class="line"><span style="color:#E6EDF3">    results.append(result_queue.get())</span></span>
<span class="line"></span></code></pre>
<h3 id="3-multiprocessing">3. Multiprocessing</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> multiprocessing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Pool, Process, Queue, Manager</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> os</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Basic multiprocessing</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> compute</span><span style="color:#E6EDF3">(x: </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">) -> </span><span style="color:#79C0FF">int</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">**</span><span style="color:#79C0FF"> 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">if</span><span style="color:#79C0FF"> __name__</span><span style="color:#FF7B72"> ==</span><span style="color:#A5D6FF"> '__main__'</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    with</span><span style="color:#E6EDF3"> Pool(</span><span style="color:#FFA657">processes</span><span style="color:#FF7B72">=</span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> pool:</span></span>
<span class="line"><span style="color:#E6EDF3">        results </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> pool.map(compute, </span><span style="color:#79C0FF">range</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">10</span><span style="color:#E6EDF3">))</span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(results)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Process with shared state</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> multiprocessing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Value, Array</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> increment_counter</span><span style="color:#E6EDF3">(counter, lock):</span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> _ </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">1000</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#FF7B72">        with</span><span style="color:#E6EDF3"> lock:</span></span>
<span class="line"><span style="color:#E6EDF3">            counter.value </span><span style="color:#FF7B72">+=</span><span style="color:#79C0FF"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">if</span><span style="color:#79C0FF"> __name__</span><span style="color:#FF7B72"> ==</span><span style="color:#A5D6FF"> '__main__'</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">    counter </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Value(</span><span style="color:#A5D6FF">'i'</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">0</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    lock </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> threading.Lock()</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#E6EDF3">    processes </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span></span>
<span class="line"><span style="color:#E6EDF3">        Process(</span><span style="color:#FFA657">target</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">increment_counter, </span><span style="color:#FFA657">args</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">(counter, lock))</span></span>
<span class="line"><span style="color:#FF7B72">        for</span><span style="color:#E6EDF3"> _ </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    ]</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> p </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> processes:</span></span>
<span class="line"><span style="color:#E6EDF3">        p.start()</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> p </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> processes:</span></span>
<span class="line"><span style="color:#E6EDF3">        p.join()</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#79C0FF">    print</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">f</span><span style="color:#A5D6FF">"Final count: </span><span style="color:#FF7B72">{</span><span style="color:#E6EDF3">counter.value</span><span style="color:#FF7B72">}</span><span style="color:#A5D6FF">"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Manager for complex data structures</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> worker</span><span style="color:#E6EDF3">(shared_dict, key, value):</span></span>
<span class="line"><span style="color:#E6EDF3">    shared_dict[key] </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">if</span><span style="color:#79C0FF"> __name__</span><span style="color:#FF7B72"> ==</span><span style="color:#A5D6FF"> '__main__'</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    with</span><span style="color:#E6EDF3"> Manager() </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> manager:</span></span>
<span class="line"><span style="color:#E6EDF3">        shared_dict </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> manager.dict()</span></span>
<span class="line"><span style="color:#E6EDF3">        </span></span>
<span class="line"><span style="color:#E6EDF3">        processes </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span></span>
<span class="line"><span style="color:#E6EDF3">            Process(</span><span style="color:#FFA657">target</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">worker, </span><span style="color:#FFA657">args</span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3">(shared_dict, i, i</span><span style="color:#FF7B72">**</span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">))</span></span>
<span class="line"><span style="color:#FF7B72">            for</span><span style="color:#E6EDF3"> i </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">10</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">        ]</span></span>
<span class="line"><span style="color:#E6EDF3">        </span></span>
<span class="line"><span style="color:#FF7B72">        for</span><span style="color:#E6EDF3"> p </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> processes:</span></span>
<span class="line"><span style="color:#E6EDF3">            p.start()</span></span>
<span class="line"><span style="color:#E6EDF3">        </span></span>
<span class="line"><span style="color:#FF7B72">        for</span><span style="color:#E6EDF3"> p </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> processes:</span></span>
<span class="line"><span style="color:#E6EDF3">            p.join()</span></span>
<span class="line"><span style="color:#E6EDF3">        </span></span>
<span class="line"><span style="color:#79C0FF">        print</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">dict</span><span style="color:#E6EDF3">(shared_dict))</span></span>
<span class="line"></span></code></pre>
<h2 id="performance-optimization-performance">Performance Optimization {#performance}</h2>
<h3 id="1-profiling">1. Profiling</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> cProfile</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> pstats</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> line_profiler </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> LineProfiler</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># cProfile for function-level profiling</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> slow_function</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#E6EDF3">    total </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> 0</span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> i </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">1000000</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">        total </span><span style="color:#FF7B72">+=</span><span style="color:#E6EDF3"> i</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> total</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Profile execution</span></span>
<span class="line"><span style="color:#E6EDF3">cProfile.run(</span><span style="color:#A5D6FF">'slow_function()'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Save profile data</span></span>
<span class="line"><span style="color:#E6EDF3">cProfile.run(</span><span style="color:#A5D6FF">'slow_function()'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'profile_stats'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Analyze profile data</span></span>
<span class="line"><span style="color:#E6EDF3">stats </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> pstats.Stats(</span><span style="color:#A5D6FF">'profile_stats'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">stats.sort_stats(</span><span style="color:#A5D6FF">'cumulative'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">stats.print_stats(</span><span style="color:#79C0FF">10</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Line-by-line profiling</span></span>
<span class="line"><span style="color:#E6EDF3">profiler </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> LineProfiler()</span></span>
<span class="line"><span style="color:#E6EDF3">profiler.add_function(slow_function)</span></span>
<span class="line"><span style="color:#E6EDF3">profiler.run(</span><span style="color:#A5D6FF">'slow_function()'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">profiler.print_stats()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Memory profiling</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> memory_profiler </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@profile</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> memory_intensive</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#E6EDF3">    large_list </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [i </span><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> i </span><span style="color:#FF7B72">in</span><span style="color:#79C0FF"> range</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">1000000</span><span style="color:#E6EDF3">)]</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> sum</span><span style="color:#E6EDF3">(large_list)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">memory_intensive()</span></span>
<span class="line"></span></code></pre>
<h3 id="2-performance-optimization-techniques">2. Performance Optimization Techniques</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># ❌ Bad: List concatenation in loop</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> bad_concatenation</span><span style="color:#E6EDF3">(items):</span></span>
<span class="line"><span style="color:#E6EDF3">    result </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> ""</span></span>
<span class="line"><span style="color:#FF7B72">    for</span><span style="color:#E6EDF3"> item </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> items:</span></span>
<span class="line"><span style="color:#E6EDF3">        result </span><span style="color:#FF7B72">+=</span><span style="color:#79C0FF"> str</span><span style="color:#E6EDF3">(item)  </span><span style="color:#8B949E"># Creates new string each time</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> result</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># ✅ Good: Join strings</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> good_concatenation</span><span style="color:#E6EDF3">(items):</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#A5D6FF"> ""</span><span style="color:#E6EDF3">.join(</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">(item) </span><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> item </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> items)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># ❌ Bad: Unnecessary list creation</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> bad_sum</span><span style="color:#E6EDF3">(items):</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> sum</span><span style="color:#E6EDF3">([x </span><span style="color:#FF7B72">**</span><span style="color:#79C0FF"> 2</span><span style="color:#FF7B72"> for</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> items])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># ✅ Good: Generator expression</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> good_sum</span><span style="color:#E6EDF3">(items):</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> sum</span><span style="color:#E6EDF3">(x </span><span style="color:#FF7B72">**</span><span style="color:#79C0FF"> 2</span><span style="color:#FF7B72"> for</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> items)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># ❌ Bad: Multiple passes over data</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> bad_processing</span><span style="color:#E6EDF3">(data):</span></span>
<span class="line"><span style="color:#E6EDF3">    filtered </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [x </span><span style="color:#FF7B72">for</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> data </span><span style="color:#FF7B72">if</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">></span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">    squared </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [x </span><span style="color:#FF7B72">**</span><span style="color:#79C0FF"> 2</span><span style="color:#FF7B72"> for</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> filtered]</span></span>
<span class="line"><span style="color:#E6EDF3">    summed </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> sum</span><span style="color:#E6EDF3">(squared)</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> summed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># ✅ Good: Single pass</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> good_processing</span><span style="color:#E6EDF3">(data):</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#79C0FF"> sum</span><span style="color:#E6EDF3">(x </span><span style="color:#FF7B72">**</span><span style="color:#79C0FF"> 2</span><span style="color:#FF7B72"> for</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> data </span><span style="color:#FF7B72">if</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">></span><span style="color:#79C0FF"> 0</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Using __slots__ for memory optimization</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> RegularPoint</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, x, y):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.x </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> x</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.y </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> OptimizedPoint</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#79C0FF">    __slots__</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> [</span><span style="color:#A5D6FF">'x'</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">'y'</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#79C0FF"> __init__</span><span style="color:#E6EDF3">(self, x, y):</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.x </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> x</span></span>
<span class="line"><span style="color:#79C0FF">        self</span><span style="color:#E6EDF3">.y </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># OptimizedPoint uses ~40% less memory</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Lazy evaluation with generators</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> read_large_file</span><span style="color:#E6EDF3">(filename):</span></span>
<span class="line"><span style="color:#FF7B72">    with</span><span style="color:#79C0FF"> open</span><span style="color:#E6EDF3">(filename) </span><span style="color:#FF7B72">as</span><span style="color:#E6EDF3"> f:</span></span>
<span class="line"><span style="color:#FF7B72">        for</span><span style="color:#E6EDF3"> line </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> f:</span></span>
<span class="line"><span style="color:#8B949E">            # Process line-by-line without loading entire file</span></span>
<span class="line"><span style="color:#FF7B72">            yield</span><span style="color:#E6EDF3"> process_line(line)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Use sets for membership testing</span></span>
<span class="line"><span style="color:#8B949E"># ❌ Bad: O(n) lookup in list</span></span>
<span class="line"><span style="color:#E6EDF3">items_list </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> [</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">]</span></span>
<span class="line"><span style="color:#FF7B72">if</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> items_list:  </span><span style="color:#8B949E"># Slow for large lists</span></span>
<span class="line"><span style="color:#FF7B72">    pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># ✅ Good: O(1) lookup in set</span></span>
<span class="line"><span style="color:#E6EDF3">items_set </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">}</span></span>
<span class="line"><span style="color:#FF7B72">if</span><span style="color:#E6EDF3"> x </span><span style="color:#FF7B72">in</span><span style="color:#E6EDF3"> items_set:  </span><span style="color:#8B949E"># Fast</span></span>
<span class="line"><span style="color:#FF7B72">    pass</span></span>
<span class="line"></span></code></pre>
<h2 id="testing-strategies-testing">Testing Strategies {#testing}</h2>
<h3 id="1-pytest-basics">1. pytest Basics</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> pytest</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> List</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Basic test</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> test_addition</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#FF7B72">    assert</span><span style="color:#79C0FF"> 1</span><span style="color:#FF7B72"> +</span><span style="color:#79C0FF"> 1</span><span style="color:#FF7B72"> ==</span><span style="color:#79C0FF"> 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Test with fixtures</span></span>
<span class="line"><span style="color:#D2A8FF">@pytest.fixture</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> sample_data</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> [</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">5</span><span style="color:#E6EDF3">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> test_sum</span><span style="color:#E6EDF3">(sample_data):</span></span>
<span class="line"><span style="color:#FF7B72">    assert</span><span style="color:#79C0FF"> sum</span><span style="color:#E6EDF3">(sample_data) </span><span style="color:#FF7B72">==</span><span style="color:#79C0FF"> 15</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Parametrized tests</span></span>
<span class="line"><span style="color:#D2A8FF">@pytest.mark.parametrize</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"input,expected"</span><span style="color:#E6EDF3">, [</span></span>
<span class="line"><span style="color:#E6EDF3">    (</span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#E6EDF3">    (</span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#E6EDF3">    (</span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">6</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#E6EDF3">    (</span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">8</span><span style="color:#E6EDF3">),</span></span>
<span class="line"><span style="color:#E6EDF3">])</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> test_double</span><span style="color:#E6EDF3">(input, expected):</span></span>
<span class="line"><span style="color:#FF7B72">    assert</span><span style="color:#79C0FF"> input</span><span style="color:#FF7B72"> *</span><span style="color:#79C0FF"> 2</span><span style="color:#FF7B72"> ==</span><span style="color:#E6EDF3"> expected</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Test exceptions</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> test_division_by_zero</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#FF7B72">    with</span><span style="color:#E6EDF3"> pytest.raises(</span><span style="color:#79C0FF">ZeroDivisionError</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#79C0FF">        1</span><span style="color:#FF7B72"> /</span><span style="color:#79C0FF"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Async tests</span></span>
<span class="line"><span style="color:#D2A8FF">@pytest.mark.asyncio</span></span>
<span class="line"><span style="color:#FF7B72">async</span><span style="color:#FF7B72"> def</span><span style="color:#D2A8FF"> test_async_function</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#E6EDF3">    result </span><span style="color:#FF7B72">=</span><span style="color:#FF7B72"> await</span><span style="color:#E6EDF3"> async_fetch_data()</span></span>
<span class="line"><span style="color:#FF7B72">    assert</span><span style="color:#E6EDF3"> result </span><span style="color:#FF7B72">is</span><span style="color:#FF7B72"> not</span><span style="color:#79C0FF"> None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Mocking</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> unittest.mock </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Mock, patch</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> test_with_mock</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#E6EDF3">    mock_db </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Mock()</span></span>
<span class="line"><span style="color:#E6EDF3">    mock_db.get_user.return_value </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> User(</span><span style="color:#FFA657">id</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"1"</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">name</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"Test"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#E6EDF3">    service </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> UserService(mock_db)</span></span>
<span class="line"><span style="color:#E6EDF3">    user </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> service.find_user(</span><span style="color:#A5D6FF">"1"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    assert</span><span style="color:#E6EDF3"> user.name </span><span style="color:#FF7B72">==</span><span style="color:#A5D6FF"> "Test"</span></span>
<span class="line"><span style="color:#E6EDF3">    mock_db.get_user.assert_called_once_with(</span><span style="color:#A5D6FF">"1"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Patching</span></span>
<span class="line"><span style="color:#D2A8FF">@patch</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">'module.external_api_call'</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> test_with_patch</span><span style="color:#E6EDF3">(mock_api):</span></span>
<span class="line"><span style="color:#E6EDF3">    mock_api.return_value </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> {</span><span style="color:#A5D6FF">"status"</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">"success"</span><span style="color:#E6EDF3">}</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#E6EDF3">    result </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> process_api_data()</span></span>
<span class="line"><span style="color:#FF7B72">    assert</span><span style="color:#E6EDF3"> result[</span><span style="color:#A5D6FF">"status"</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">==</span><span style="color:#A5D6FF"> "success"</span></span>
<span class="line"></span></code></pre>
<h3 id="2-test-organization">2. Test Organization</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># tests/conftest.py - Shared fixtures</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> pytest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@pytest.fixture</span><span style="color:#E6EDF3">(</span><span style="color:#FFA657">scope</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"session"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> database</span><span style="color:#E6EDF3">():</span></span>
<span class="line"><span style="color:#E6EDF3">    db </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> create_test_database()</span></span>
<span class="line"><span style="color:#FF7B72">    yield</span><span style="color:#E6EDF3"> db</span></span>
<span class="line"><span style="color:#E6EDF3">    db.cleanup()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF">@pytest.fixture</span></span>
<span class="line"><span style="color:#FF7B72">def</span><span style="color:#D2A8FF"> user</span><span style="color:#E6EDF3">(database):</span></span>
<span class="line"><span style="color:#E6EDF3">    user </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> User(</span><span style="color:#FFA657">name</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"Test"</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">email</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"test@example.com"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    database.save(user)</span></span>
<span class="line"><span style="color:#FF7B72">    yield</span><span style="color:#E6EDF3"> user</span></span>
<span class="line"><span style="color:#E6EDF3">    database.delete(user)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># tests/test_user_service.py</span></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> TestUserService</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> test_create_user</span><span style="color:#E6EDF3">(self, database):</span></span>
<span class="line"><span style="color:#E6EDF3">        service </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> UserService(database)</span></span>
<span class="line"><span style="color:#E6EDF3">        user </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> service.create_user(</span><span style="color:#A5D6FF">"John"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"john@example.com"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#FF7B72">        assert</span><span style="color:#E6EDF3"> user.name </span><span style="color:#FF7B72">==</span><span style="color:#A5D6FF"> "John"</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> test_find_user</span><span style="color:#E6EDF3">(self, database, user):</span></span>
<span class="line"><span style="color:#E6EDF3">        service </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> UserService(database)</span></span>
<span class="line"><span style="color:#E6EDF3">        found </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> service.find_user(user.id)</span></span>
<span class="line"><span style="color:#FF7B72">        assert</span><span style="color:#E6EDF3"> found.id </span><span style="color:#FF7B72">==</span><span style="color:#E6EDF3"> user.id</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#D2A8FF">    @pytest.mark.slow</span></span>
<span class="line"><span style="color:#FF7B72">    def</span><span style="color:#D2A8FF"> test_expensive_operation</span><span style="color:#E6EDF3">(self):</span></span>
<span class="line"><span style="color:#8B949E">        # Long-running test</span></span>
<span class="line"><span style="color:#FF7B72">        pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># Run specific tests</span></span>
<span class="line"><span style="color:#8B949E"># pytest tests/test_user_service.py</span></span>
<span class="line"><span style="color:#8B949E"># pytest -k "test_create"</span></span>
<span class="line"><span style="color:#8B949E"># pytest -m "not slow"</span></span>
<span class="line"></span></code></pre>
<h2 id="project-structure-project-structure">Project Structure {#project-structure}</h2>
<h3 id="1-standard-project-layout">1. Standard Project Layout</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>my_project/</span></span>
<span class="line"><span>├── src/</span></span>
<span class="line"><span>│   └── my_package/</span></span>
<span class="line"><span>│       ├── __init__.py</span></span>
<span class="line"><span>│       ├── __main__.py</span></span>
<span class="line"><span>│       ├── core/</span></span>
<span class="line"><span>│       │   ├── __init__.py</span></span>
<span class="line"><span>│       │   └── models.py</span></span>
<span class="line"><span>│       ├── services/</span></span>
<span class="line"><span>│       │   ├── __init__.py</span></span>
<span class="line"><span>│       │   └── user_service.py</span></span>
<span class="line"><span>│       └── utils/</span></span>
<span class="line"><span>│           ├── __init__.py</span></span>
<span class="line"><span>│           └── helpers.py</span></span>
<span class="line"><span>├── tests/</span></span>
<span class="line"><span>│   ├── __init__.py</span></span>
<span class="line"><span>│   ├── conftest.py</span></span>
<span class="line"><span>│   ├── unit/</span></span>
<span class="line"><span>│   │   └── test_models.py</span></span>
<span class="line"><span>│   └── integration/</span></span>
<span class="line"><span>│       └── test_user_service.py</span></span>
<span class="line"><span>├── docs/</span></span>
<span class="line"><span>│   └── README.md</span></span>
<span class="line"><span>├── pyproject.toml</span></span>
<span class="line"><span>├── setup.py</span></span>
<span class="line"><span>├── requirements.txt</span></span>
<span class="line"><span>├── requirements-dev.txt</span></span>
<span class="line"><span>├── .gitignore</span></span>
<span class="line"><span>├── .pre-commit-config.yaml</span></span>
<span class="line"><span>└── README.md</span></span>
<span class="line"><span></span></span></code></pre>
<h3 id="2-configuration-management">2. Configuration Management</h3>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#8B949E"># config.py</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> pydantic </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> BaseSettings, Field</span></span>
<span class="line"><span style="color:#FF7B72">from</span><span style="color:#E6EDF3"> typing </span><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> Optional</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">class</span><span style="color:#FFA657"> Settings</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">BaseSettings</span><span style="color:#E6EDF3">):</span></span>
<span class="line"><span style="color:#E6EDF3">    app_name: </span><span style="color:#79C0FF">str</span><span style="color:#FF7B72"> =</span><span style="color:#A5D6FF"> "My App"</span></span>
<span class="line"><span style="color:#E6EDF3">    debug: </span><span style="color:#79C0FF">bool</span><span style="color:#FF7B72"> =</span><span style="color:#79C0FF"> False</span></span>
<span class="line"><span style="color:#E6EDF3">    database_url: </span><span style="color:#79C0FF">str</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> Field(</span><span style="color:#79C0FF">...</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">env</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"DATABASE_URL"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    redis_url: Optional[</span><span style="color:#79C0FF">str</span><span style="color:#E6EDF3">] </span><span style="color:#FF7B72">=</span><span style="color:#79C0FF"> None</span></span>
<span class="line"><span style="color:#E6EDF3">    api_key: </span><span style="color:#79C0FF">str</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> Field(</span><span style="color:#79C0FF">...</span><span style="color:#E6EDF3">, </span><span style="color:#FFA657">env</span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF">"API_KEY"</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">    </span></span>
<span class="line"><span style="color:#FF7B72">    class</span><span style="color:#FFA657"> Config</span><span style="color:#E6EDF3">:</span></span>
<span class="line"><span style="color:#E6EDF3">        env_file </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> ".env"</span></span>
<span class="line"><span style="color:#E6EDF3">        env_file_encoding </span><span style="color:#FF7B72">=</span><span style="color:#A5D6FF"> "utf-8"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6EDF3">settings </span><span style="color:#FF7B72">=</span><span style="color:#E6EDF3"> Settings()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E"># .env file</span></span>
<span class="line"><span style="color:#8B949E"># DATABASE_URL=postgresql://localhost/mydb</span></span>
<span class="line"><span style="color:#8B949E"># API_KEY=secret_key_here</span></span>
<span class="line"></span></code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>Professional Python development requires mastering these patterns and practices:</p>
<ol>
<li><strong>Type Hints</strong> - Make code self-documenting and catch bugs early</li>
<li><strong>Async/Await</strong> - Handle I/O-bound operations efficiently</li>
<li><strong>Testing</strong> - Ensure code quality and prevent regressions</li>
<li><strong>Performance</strong> - Profile before optimizing, optimize bottlenecks</li>
<li><strong>Project Structure</strong> - Organize code for maintainability</li>
</ol>
<p><strong>Remember</strong>: Write Python code that others (and future you) will thank you for.</p>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://docs.python.org/">Python Documentation</a></li>
<li><a href="https://realpython.com/">Real Python</a></li>
<li><a href="https://peps.python.org/pep-0484/">Python Type Hints</a></li>
<li><a href="https://effectivepython.com/">Effective Python</a></li>
</ul>
<hr>
<p><em>What Python patterns do you use most in production? Share your experience!</em></p> </div> </article> </div> <div class="back-link" data-astro-cid-rkg3zjxi><a href="/ai-news/" data-astro-cid-rkg3zjxi>← Back to AI News</a></div>  </main> <footer class="site-footer container"> <p>© 2025 AREZKI El Mehdi • <a href="https://github.com/earezki">GitHub</a> • <a href="/rss.xml">RSS</a></p> </footer>  <script>
      // Read/Unread article tracking
      (function() {
        const STORAGE_KEY = 'readArticles';
        
        function getReadArticles() {
          try {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : [];
          } catch (e) {
            return [];
          }
        }
        
        function markArticleAsRead(url) {
          try {
            const readArticles = getReadArticles();
            if (!readArticles.includes(url)) {
              readArticles.push(url);
              localStorage.setItem(STORAGE_KEY, JSON.stringify(readArticles));
            }
          } catch (e) {
            console.error('Failed to mark article as read:', e);
          }
        }
        
        function isArticleRead(url) {
          const readArticles = getReadArticles();
          return readArticles.includes(url);
        }
        
        // Update post cards on list pages
        function updatePostCards() {
          const postCards = document.querySelectorAll('.post-card[data-article-url]');
          postCards.forEach(function(card) {
            const url = card.getAttribute('data-article-url');
            if (url) {
              if (isArticleRead(url)) {
                card.classList.add('read');
                card.classList.remove('unread');
              } else {
                card.classList.add('unread');
                card.classList.remove('read');
              }
            }
          });
        }
        
        // Mark current article as read (on article pages)
        function markCurrentArticleAsRead() {
          const isArticlePage = document.querySelector('.post-body');
          if (isArticlePage) {
            const currentPath = window.location.pathname;
            markArticleAsRead(currentPath);
          }
        }
        
        // Initialize function
        function init() {
          updatePostCards();
          markCurrentArticleAsRead();
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', init);
        
        // Handle back/forward navigation (bfcache)
        window.addEventListener('pageshow', function(event) {
          // If page is loaded from cache, update the cards
          if (event.persisted) {
            init();
          }
        });
      })();
    </script> </body> </html> 