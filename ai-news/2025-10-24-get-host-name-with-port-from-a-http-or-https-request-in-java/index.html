<!DOCTYPE html><html lang="en" data-theme="dark"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extracting Hostname and Port from HTTP Requests in Java • Dev|Journal</title><meta name="description" content="Main Heading This article explores multiple methods to extract the hostname and port from HTTP or HTTPS requests in Java, addressing use cases such as…"><meta name="keywords" content="software architecture, backend development, microservices, Java, Python, Spring Boot, technical blog"><meta name="author" content="El Mehdi Arezki"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://earezki.com/ai-news/2025-10-24-get-host-name-with-port-from-a-http-or-https-request-in-java/"><meta property="og:title" content="Extracting Hostname and Port from HTTP Requests in Java • Dev|Journal"><meta property="og:site_name" content="Dev|Journal"><meta property="og:description" content="Main Heading This article explores multiple methods to extract the hostname and port from HTTP or HTTPS requests in Java, addressing use cases such as…"><meta property="og:image" content="https://earezki.com/assets/og-image-default.jpg"><!-- Twitter --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://earezki.com/ai-news/2025-10-24-get-host-name-with-port-from-a-http-or-https-request-in-java/"><meta name="twitter:title" content="Extracting Hostname and Port from HTTP Requests in Java • Dev|Journal"><meta name="twitter:description" content="Main Heading This article explores multiple methods to extract the hostname and port from HTTP or HTTPS requests in Java, addressing use cases such as…"><meta name="twitter:image" content="https://earezki.com/assets/og-image-default.jpg"><meta name="twitter:creator" content="@earezki"><link rel="canonical" href="https://earezki.com/ai-news/2025-10-24-get-host-name-with-port-from-a-http-or-https-request-in-java/"><link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-161447264-1"></script><script defer src="https://cloud.umami.is/script.js" data-website-id="4a26531d-1053-4f79-97a6-06a1366aff91"></script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Extracting Hostname and Port from HTTP Requests in Java","datePublished":"2025-10-24T00:00:00.000Z","dateModified":"2025-10-24T00:00:00.000Z","author":{"@type":"Person","name":"AREZKI El Mehdi"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://earezki.com/ai-news/2025-10-24-get-host-name-with-port-from-a-http-or-https-request-in-java/"},"description":"Main Heading This article explores multiple methods to extract the hostname and port from HTTP or HTTPS requests in Java, addressing use cases such as…"}</script><link rel="stylesheet" href="/_astro/_slug_.CDWqF8AB.css">
<style>.post-layout[data-astro-cid-rkg3zjxi]{display:grid;grid-template-columns:260px 1fr;gap:2.5rem}.sidebar-left[data-astro-cid-rkg3zjxi]{position:relative}@media (max-width: 1080px){.post-layout[data-astro-cid-rkg3zjxi]{grid-template-columns:1fr}}.ai-disclaimer-article[data-astro-cid-rkg3zjxi]{display:flex;gap:.75rem;padding:.9rem 1.1rem;margin:0 auto 2rem;max-width:780px;background:linear-gradient(135deg,#667eea1a,#764ba21a,#f093fb1a);border:2px solid transparent;border-radius:var(--radius-md);position:relative;background-clip:padding-box;font-size:.85rem}.ai-disclaimer-article[data-astro-cid-rkg3zjxi]:before{content:"";position:absolute;inset:-2px;border-radius:var(--radius-md);padding:2px;background:var(--ai-gradient-border);background-size:200% 200%;animation:gradient-rotate 3s linear infinite;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask-composite:exclude;pointer-events:none}html[data-theme=dark] .ai-disclaimer-article[data-astro-cid-rkg3zjxi]{background:linear-gradient(135deg,#667eea26,#764ba226,#f093fb26)}.ai-disclaimer-article[data-astro-cid-rkg3zjxi] svg[data-astro-cid-rkg3zjxi]{margin-top:.15rem}.ai-disclaimer-article[data-astro-cid-rkg3zjxi] strong[data-astro-cid-rkg3zjxi]{color:var(--color-text);display:block;margin-bottom:.15rem}.ai-disclaimer-article[data-astro-cid-rkg3zjxi] div[data-astro-cid-rkg3zjxi]{line-height:1.5;color:var(--color-text-alt)}
.toc[data-astro-cid-xvrfupwn]{position:sticky;top:90px;max-height:calc(100vh - 120px);overflow:auto;padding:1rem 1rem 1.2rem;background:var(--color-bg-alt);border:1px solid var(--color-border);border-radius:var(--radius-md);font-size:.8rem;line-height:1.3}.toc-title[data-astro-cid-xvrfupwn]{font-weight:600;font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;margin-bottom:.6rem;color:var(--color-text-alt)}.toc[data-astro-cid-xvrfupwn] ul[data-astro-cid-xvrfupwn]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.35rem}.toc[data-astro-cid-xvrfupwn] a[data-astro-cid-xvrfupwn]{text-decoration:none;color:var(--color-text-alt)}.toc[data-astro-cid-xvrfupwn] a[data-astro-cid-xvrfupwn]:hover{color:var(--color-accent)}.toc[data-astro-cid-xvrfupwn] li[data-astro-cid-xvrfupwn][class*=d-3]{margin-left:.75rem}.toc[data-astro-cid-xvrfupwn] li[data-astro-cid-xvrfupwn][class*=d-4]{margin-left:1.4rem}@media (max-width: 1080px){.toc[data-astro-cid-xvrfupwn]{display:none}}
</style><script type="module" src="/_astro/hoisted.CwSnpN4J.js"></script></head> <body> <div id="readingProgress" style="position:fixed;left:0;top:0;height:3px;background:linear-gradient(90deg,#2563eb,#9333ea);width:0;z-index:999;transition:width .15s ease;"></div>  <header class="site-header container"> <div class="logo-wrap"> <a class="logo" href="/">Dev|Journal</a> </div> <nav class="main-nav"> <a href="/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path> <polyline points="9 22 9 12 15 12 15 22"></polyline> </svg>
Home
</a> <a href="/ai-news/" class="ai-news-link"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h-9.5a.5.5 0 0 0-.5.5.5.5 0 0 1-1 0 .5.5 0 0 0-.5-.5H1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"></path> <path d="M7 15v4a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-4"></path> </svg>
AI News
</a> <a href="/tags/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2z"></path> <circle cx="7" cy="7" r="1.5"></circle> </svg>
Tags
</a> <a href="/about/"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"> <circle cx="12" cy="12" r="10"></circle> <path d="M12 16v-4"></path> <path d="M12 8h.01"></path> </svg>
About
</a> <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode"> <span class="theme-icon">☾</span> <span class="theme-text">dark</span> </button> </nav> </header> <main class="container content-area">  <div class="ai-disclaimer-article" data-astro-cid-rkg3zjxi> <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink: 0;" data-astro-cid-rkg3zjxi> <circle cx="12" cy="12" r="10" data-astro-cid-rkg3zjxi></circle> <line x1="12" y1="8" x2="12" y2="12" data-astro-cid-rkg3zjxi></line> <line x1="12" y1="16" x2="12.01" y2="16" data-astro-cid-rkg3zjxi></line> </svg> <div data-astro-cid-rkg3zjxi> <strong data-astro-cid-rkg3zjxi>AI-Generated Content:</strong> This article was created with AI assistance. Please verify important information and check original references.
</div> </div> <div class="post-layout" data-astro-cid-rkg3zjxi> <aside class="sidebar-left" data-astro-cid-rkg3zjxi> <nav class="toc" aria-label="Table of Contents" data-astro-cid-xvrfupwn> <div class="toc-title" data-astro-cid-xvrfupwn>On this page</div> <ul data-astro-cid-xvrfupwn> <li class="d-2" data-astro-cid-xvrfupwn><a href="#main-heading" data-astro-cid-xvrfupwn>Main Heading</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#1-standard-httpservletrequest-approach" data-astro-cid-xvrfupwn>1. **Standard `HttpServletRequest` Approach**</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#2-using-getrequesturl-for-full-url-extraction" data-astro-cid-xvrfupwn>2. **Using `getRequestURL()` for Full URL Extraction**</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#3-springs-servleturicomponentsbuilder" data-astro-cid-xvrfupwn>3. **Spring’s `ServletUriComponentsBuilder`**</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#4-handling-reverse-proxies-with-x-forwarded-headers" data-astro-cid-xvrfupwn>4. **Handling Reverse Proxies with `X-Forwarded-*` Headers**</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#5-recommendations" data-astro-cid-xvrfupwn>5. **Recommendations**</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#working-example" data-astro-cid-xvrfupwn>Working Example</a></li><li class="d-2" data-astro-cid-xvrfupwn><a href="#recommendations" data-astro-cid-xvrfupwn>Recommendations</a></li><li class="d-3" data-astro-cid-xvrfupwn><a href="#reference" data-astro-cid-xvrfupwn>Reference</a></li> </ul> </nav>  </aside> <article class="post" data-astro-cid-rkg3zjxi> <header class="post-header" data-astro-cid-rkg3zjxi> <h1 data-astro-cid-rkg3zjxi>Extracting Hostname and Port from HTTP Requests in Java</h1> <div class="meta" data-astro-cid-rkg3zjxi> <time datetime="2025-10-24T00:00:00.000Z" data-astro-cid-rkg3zjxi>Fri Oct 24 2025</time> <span data-astro-cid-rkg3zjxi>• 3 min read</span> </div> <div class="tag-row" data-astro-cid-rkg3zjxi><a class="tag ai-news-tag" href="/ai-news/" data-astro-cid-rkg3zjxi>AI News</a><span class="tag" data-astro-cid-rkg3zjxi>Java Web</span><span class="tag" data-astro-cid-rkg3zjxi>Web Development</span></div> </header> <div class="post-body prose" data-astro-cid-rkg3zjxi> <h2 id="main-heading">Main Heading</h2>
<p>This article explores multiple methods to extract the hostname and port from HTTP or HTTPS requests in Java, addressing use cases such as generating URLs, debugging, and handling reverse proxies. The solutions range from standard Java Servlet APIs to Spring-specific utilities and proxy header configurations.</p>
<hr>
<h3 id="1-standard-httpservletrequest-approach">1. <strong>Standard <code>HttpServletRequest</code> Approach</strong></h3>
<p>The <code>HttpServletRequest</code> interface provides direct access to the scheme (HTTP/HTTPS), server name, and port. This method is ideal for basic use cases where no proxy or advanced URL parsing is required.</p>
<ul>
<li><strong>Key Implementation</strong>:
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#FF7B72">public</span><span style="color:#FF7B72"> static</span><span style="color:#E6EDF3"> String </span><span style="color:#D2A8FF">getHostWithPort</span><span style="color:#E6EDF3">(HttpServletRequest request) {</span></span>
<span class="line"><span style="color:#E6EDF3">    String</span><span style="color:#E6EDF3"> scheme</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getScheme</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">    String</span><span style="color:#E6EDF3"> serverName</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getServerName</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#FF7B72">    int</span><span style="color:#E6EDF3"> serverPort</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getServerPort</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#FF7B72">    boolean</span><span style="color:#E6EDF3"> isDefaultPort</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> (</span><span style="color:#A5D6FF">"http"</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">equals</span><span style="color:#E6EDF3">(scheme) </span><span style="color:#FF7B72">&#x26;&#x26;</span><span style="color:#E6EDF3"> serverPort </span><span style="color:#FF7B72">==</span><span style="color:#79C0FF"> 80</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">||</span><span style="color:#E6EDF3"> (</span><span style="color:#A5D6FF">"https"</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">equals</span><span style="color:#E6EDF3">(scheme) </span><span style="color:#FF7B72">&#x26;&#x26;</span><span style="color:#E6EDF3"> serverPort </span><span style="color:#FF7B72">==</span><span style="color:#79C0FF"> 443</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> isDefaultPort </span></span>
<span class="line"><span style="color:#FF7B72">        ?</span><span style="color:#E6EDF3"> String.</span><span style="color:#D2A8FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"%s://%s"</span><span style="color:#E6EDF3">, scheme, serverName) </span></span>
<span class="line"><span style="color:#FF7B72">        :</span><span style="color:#E6EDF3"> String.</span><span style="color:#D2A8FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"%s://%s:%d"</span><span style="color:#E6EDF3">, scheme, serverName, serverPort);</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
</li>
<li><strong>Purpose</strong>: Constructs a clean URL by omitting default ports (80 for HTTP, 443 for HTTPS).</li>
<li><strong>Impact</strong>: Ensures consistency in generated URLs, avoiding unnecessary port numbers.</li>
<li><strong>Limitation</strong>: Does not account for reverse proxies or forwarded headers.</li>
</ul>
<hr>
<h3 id="2-using-getrequesturl-for-full-url-extraction">2. <strong>Using <code>getRequestURL()</code> for Full URL Extraction</strong></h3>
<p>The <code>getRequestURL()</code> method retrieves the full request URL, including path and query parameters. This approach is useful when the full URL is needed, but it involves parsing the string into a <code>URL</code> object.</p>
<ul>
<li><strong>Key Implementation</strong>:
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#FF7B72">public</span><span style="color:#FF7B72"> static</span><span style="color:#E6EDF3"> String </span><span style="color:#D2A8FF">getHostWithPortFromRequestUrl</span><span style="color:#E6EDF3">(HttpServletRequest request) {</span></span>
<span class="line"><span style="color:#FF7B72">    try</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#E6EDF3">        URL</span><span style="color:#E6EDF3"> url</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> URL</span><span style="color:#E6EDF3">(request.</span><span style="color:#D2A8FF">getRequestURL</span><span style="color:#E6EDF3">().</span><span style="color:#D2A8FF">toString</span><span style="color:#E6EDF3">());</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> url.</span><span style="color:#D2A8FF">getPort</span><span style="color:#E6EDF3">() </span><span style="color:#FF7B72">==</span><span style="color:#FF7B72"> -</span><span style="color:#79C0FF">1</span></span>
<span class="line"><span style="color:#FF7B72">            ?</span><span style="color:#E6EDF3"> String.</span><span style="color:#D2A8FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"%s://%s"</span><span style="color:#E6EDF3">, url.</span><span style="color:#D2A8FF">getProtocol</span><span style="color:#E6EDF3">(), url.</span><span style="color:#D2A8FF">getHost</span><span style="color:#E6EDF3">())</span></span>
<span class="line"><span style="color:#FF7B72">            :</span><span style="color:#E6EDF3"> String.</span><span style="color:#D2A8FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"%s://%s:%d"</span><span style="color:#E6EDF3">, url.</span><span style="color:#D2A8FF">getProtocol</span><span style="color:#E6EDF3">(), url.</span><span style="color:#D2A8FF">getHost</span><span style="color:#E6EDF3">(), url.</span><span style="color:#D2A8FF">getPort</span><span style="color:#E6EDF3">());</span></span>
<span class="line"><span style="color:#E6EDF3">    } </span><span style="color:#FF7B72">catch</span><span style="color:#E6EDF3"> (MalformedURLException </span><span style="color:#FFA657">e</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#FF7B72">        throw</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> RuntimeException</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"Invalid request URL"</span><span style="color:#E6EDF3">, e);</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
</li>
<li><strong>Purpose</strong>: Extracts the host and port from the full URL string.</li>
<li><strong>Impact</strong>: Slightly less efficient due to URL parsing but works for both HTTP and HTTPS.</li>
<li><strong>Limitation</strong>: May fail if the request URL is malformed or not properly formatted.</li>
</ul>
<hr>
<h3 id="3-springs-servleturicomponentsbuilder">3. <strong>Spring’s <code>ServletUriComponentsBuilder</code></strong></h3>
<p>For Spring Boot or Spring MVC applications, <code>ServletUriComponentsBuilder</code> provides a declarative way to build URLs from the current request, automatically handling ports and schemes.</p>
<ul>
<li><strong>Key Implementation</strong>:
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#FF7B72">public</span><span style="color:#FF7B72"> static</span><span style="color:#E6EDF3"> String </span><span style="color:#D2A8FF">getBaseUrl</span><span style="color:#E6EDF3">() {</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> ServletUriComponentsBuilder.</span><span style="color:#D2A8FF">fromCurrentRequestUri</span><span style="color:#E6EDF3">()</span></span>
<span class="line"><span style="color:#E6EDF3">        .</span><span style="color:#D2A8FF">replacePath</span><span style="color:#E6EDF3">(</span><span style="color:#79C0FF">null</span><span style="color:#E6EDF3">)</span></span>
<span class="line"><span style="color:#E6EDF3">        .</span><span style="color:#D2A8FF">build</span><span style="color:#E6EDF3">()</span></span>
<span class="line"><span style="color:#E6EDF3">        .</span><span style="color:#D2A8FF">toUriString</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
</li>
<li><strong>Purpose</strong>: Constructs the base URL (scheme + host + port) without manual parsing.</li>
<li><strong>Impact</strong>: Clean and concise syntax, ideal for Spring-based applications.</li>
<li><strong>Limitation</strong>: Requires a Spring web context and does not handle proxy headers by default.</li>
</ul>
<hr>
<h3 id="4-handling-reverse-proxies-with-x-forwarded--headers">4. <strong>Handling Reverse Proxies with <code>X-Forwarded-*</code> Headers</strong></h3>
<p>In production environments, applications often sit behind reverse proxies (e.g., Nginx, Cloudflare). These proxies may alter the host and port, necessitating the use of forwarded headers.</p>
<ul>
<li><strong>Key Implementation</strong>:
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#FF7B72">public</span><span style="color:#FF7B72"> static</span><span style="color:#E6EDF3"> String </span><span style="color:#D2A8FF">getForwardedHost</span><span style="color:#E6EDF3">(HttpServletRequest request) {</span></span>
<span class="line"><span style="color:#E6EDF3">    String</span><span style="color:#E6EDF3"> forwardedHost</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getHeader</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"X-Forwarded-Host"</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">    String</span><span style="color:#E6EDF3"> forwardedProto</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getHeader</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"X-Forwarded-Proto"</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">    String</span><span style="color:#E6EDF3"> forwardedPort</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getHeader</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"X-Forwarded-Port"</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">    String</span><span style="color:#E6EDF3"> scheme</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> forwardedProto </span><span style="color:#FF7B72">!=</span><span style="color:#79C0FF"> null</span><span style="color:#FF7B72"> ?</span><span style="color:#E6EDF3"> forwardedProto </span><span style="color:#FF7B72">:</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getScheme</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">    String</span><span style="color:#E6EDF3"> host</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> forwardedHost </span><span style="color:#FF7B72">!=</span><span style="color:#79C0FF"> null</span><span style="color:#FF7B72"> ?</span><span style="color:#E6EDF3"> forwardedHost </span><span style="color:#FF7B72">:</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getServerName</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">    String</span><span style="color:#E6EDF3"> port</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> forwardedPort </span><span style="color:#FF7B72">!=</span><span style="color:#79C0FF"> null</span><span style="color:#FF7B72"> ?</span><span style="color:#E6EDF3"> forwardedPort </span><span style="color:#FF7B72">:</span><span style="color:#E6EDF3"> String.</span><span style="color:#D2A8FF">valueOf</span><span style="color:#E6EDF3">(request.</span><span style="color:#D2A8FF">getServerPort</span><span style="color:#E6EDF3">());</span></span>
<span class="line"><span style="color:#FF7B72">    boolean</span><span style="color:#E6EDF3"> isDefaultPort</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> (</span><span style="color:#A5D6FF">"http"</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">equals</span><span style="color:#E6EDF3">(scheme) </span><span style="color:#FF7B72">&#x26;&#x26;</span><span style="color:#A5D6FF"> "80"</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">equals</span><span style="color:#E6EDF3">(port))</span></span>
<span class="line"><span style="color:#FF7B72">        ||</span><span style="color:#E6EDF3"> (</span><span style="color:#A5D6FF">"https"</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">equals</span><span style="color:#E6EDF3">(scheme) </span><span style="color:#FF7B72">&#x26;&#x26;</span><span style="color:#A5D6FF"> "443"</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">equals</span><span style="color:#E6EDF3">(port));</span></span>
<span class="line"><span style="color:#FF7B72">    return</span><span style="color:#E6EDF3"> isDefaultPort </span></span>
<span class="line"><span style="color:#FF7B72">        ?</span><span style="color:#E6EDF3"> String.</span><span style="color:#D2A8FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"%s://%s"</span><span style="color:#E6EDF3">, scheme, host) </span></span>
<span class="line"><span style="color:#FF7B72">        :</span><span style="color:#E6EDF3"> String.</span><span style="color:#D2A8FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"%s://%s:%s"</span><span style="color:#E6EDF3">, scheme, host, port);</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
</li>
<li><strong>Purpose</strong>: Retrieves the client-facing URL by inspecting proxy headers.</li>
<li><strong>Impact</strong>: Ensures accurate host/port information when behind load balancers or CDNs.</li>
<li><strong>Best Practice</strong>: Enable <code>ForwardedHeaderFilter</code> in Spring Boot to automatically handle these headers.</li>
</ul>
<hr>
<h3 id="5-recommendations">5. <strong>Recommendations</strong></h3>
<ul>
<li><strong>Use <code>HttpServletRequest</code></strong> for simple, standalone applications where proxy headers are not required.</li>
<li><strong>Prefer <code>ServletUriComponentsBuilder</code></strong> in Spring-based projects for cleaner, declarative URL building.</li>
<li><strong>Always handle proxy headers</strong> in production to ensure correct client-facing URLs.</li>
<li><strong>Validate proxy configurations</strong> to avoid issues with missing or misconfigured <code>X-Forwarded-*</code> headers.</li>
<li><strong>Avoid hardcoding ports</strong> (e.g., 80/443) and use conditional checks to omit them when appropriate.</li>
</ul>
<hr>
<h2 id="working-example">Working Example</h2>
<pre class="astro-code github-dark-default" style="background-color:#0d1117;color:#e6edf3; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> javax.servlet.http.HttpServletRequest;</span></span>
<span class="line"><span style="color:#FF7B72">import</span><span style="color:#E6EDF3"> java.net.URL;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">public</span><span style="color:#FF7B72"> class</span><span style="color:#FFA657"> HostExtractor</span><span style="color:#E6EDF3"> {</span></span>
<span class="line"><span style="color:#FF7B72">    public</span><span style="color:#FF7B72"> static</span><span style="color:#FF7B72"> void</span><span style="color:#D2A8FF"> main</span><span style="color:#E6EDF3">(</span><span style="color:#FF7B72">String</span><span style="color:#E6EDF3">[] </span><span style="color:#FFA657">args</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#8B949E">        // Simulate a request with port 8080</span></span>
<span class="line"><span style="color:#E6EDF3">        HttpServletRequest</span><span style="color:#E6EDF3"> request</span><span style="color:#FF7B72"> =</span><span style="color:#FF7B72"> new</span><span style="color:#D2A8FF"> MockHttpServletRequest</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"http"</span><span style="color:#E6EDF3">, </span><span style="color:#A5D6FF">"localhost"</span><span style="color:#E6EDF3">, </span><span style="color:#79C0FF">8080</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#E6EDF3">        String</span><span style="color:#E6EDF3"> hostWithPort</span><span style="color:#FF7B72"> =</span><span style="color:#D2A8FF"> getHostWithPort</span><span style="color:#E6EDF3">(request);</span></span>
<span class="line"><span style="color:#E6EDF3">        System.out.</span><span style="color:#D2A8FF">println</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"Host with port: "</span><span style="color:#FF7B72"> +</span><span style="color:#E6EDF3"> hostWithPort);</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72">    public</span><span style="color:#FF7B72"> static</span><span style="color:#E6EDF3"> String </span><span style="color:#D2A8FF">getHostWithPort</span><span style="color:#E6EDF3">(HttpServletRequest </span><span style="color:#FFA657">request</span><span style="color:#E6EDF3">) {</span></span>
<span class="line"><span style="color:#E6EDF3">        String</span><span style="color:#E6EDF3"> scheme</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getScheme</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#E6EDF3">        String</span><span style="color:#E6EDF3"> serverName</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getServerName</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#FF7B72">        int</span><span style="color:#E6EDF3"> serverPort</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> request.</span><span style="color:#D2A8FF">getServerPort</span><span style="color:#E6EDF3">();</span></span>
<span class="line"><span style="color:#FF7B72">        boolean</span><span style="color:#E6EDF3"> isDefaultPort</span><span style="color:#FF7B72"> =</span><span style="color:#E6EDF3"> (</span><span style="color:#A5D6FF">"http"</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">equals</span><span style="color:#E6EDF3">(scheme) </span><span style="color:#FF7B72">&#x26;&#x26;</span><span style="color:#E6EDF3"> serverPort </span><span style="color:#FF7B72">==</span><span style="color:#79C0FF"> 80</span><span style="color:#E6EDF3">) </span><span style="color:#FF7B72">||</span><span style="color:#E6EDF3"> (</span><span style="color:#A5D6FF">"https"</span><span style="color:#E6EDF3">.</span><span style="color:#D2A8FF">equals</span><span style="color:#E6EDF3">(scheme) </span><span style="color:#FF7B72">&#x26;&#x26;</span><span style="color:#E6EDF3"> serverPort </span><span style="color:#FF7B72">==</span><span style="color:#79C0FF"> 443</span><span style="color:#E6EDF3">);</span></span>
<span class="line"><span style="color:#FF7B72">        return</span><span style="color:#E6EDF3"> isDefaultPort </span></span>
<span class="line"><span style="color:#FF7B72">            ?</span><span style="color:#E6EDF3"> String.</span><span style="color:#D2A8FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"%s://%s"</span><span style="color:#E6EDF3">, scheme, serverName) </span></span>
<span class="line"><span style="color:#FF7B72">            :</span><span style="color:#E6EDF3"> String.</span><span style="color:#D2A8FF">format</span><span style="color:#E6EDF3">(</span><span style="color:#A5D6FF">"%s://%s:%d"</span><span style="color:#E6EDF3">, scheme, serverName, serverPort);</span></span>
<span class="line"><span style="color:#E6EDF3">    }</span></span>
<span class="line"><span style="color:#E6EDF3">}</span></span>
<span class="line"></span></code></pre>
<hr>
<h2 id="recommendations">Recommendations</h2>
<ul>
<li>
<p><strong>When to Use This Approach</strong>:</p>
<ul>
<li>Use <code>HttpServletRequest</code> for lightweight, non-Spring applications.</li>
<li>Use <code>ServletUriComponentsBuilder</code> in Spring Boot projects for cleaner URL handling.</li>
<li>Use proxy headers when deploying behind reverse proxies (e.g., Nginx, Cloudflare).</li>
</ul>
</li>
<li>
<p><strong>What to Watch Out For</strong>:</p>
<ul>
<li>Ensure proxy headers are correctly configured in production environments.</li>
<li>Avoid relying solely on <code>request.getServerPort()</code> without checking for default ports.</li>
<li>Handle <code>MalformedURLException</code> when parsing URLs from <code>getRequestURL()</code>.</li>
</ul>
</li>
</ul>
<hr>
<h3 id="reference">Reference</h3>
<p><a href="https://www.baeldung.com/java-get-host-name-port-from-http-request">https://www.baeldung.com/java-get-host-name-port-from-http-request</a></p> </div> </article> </div> <div class="back-link" data-astro-cid-rkg3zjxi><a href="/ai-news/" data-astro-cid-rkg3zjxi>← Back to AI News</a></div>  </main> <footer class="site-footer container"> <p>© 2025 AREZKI El Mehdi • <a href="https://github.com/earezki">GitHub</a> • <a href="/rss.xml">RSS</a></p> </footer>  <script>
      // Read/Unread article tracking
      (function() {
        const STORAGE_KEY = 'readArticles';
        
        function getReadArticles() {
          try {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : [];
          } catch (e) {
            return [];
          }
        }
        
        function markArticleAsRead(url) {
          try {
            const readArticles = getReadArticles();
            if (!readArticles.includes(url)) {
              readArticles.push(url);
              localStorage.setItem(STORAGE_KEY, JSON.stringify(readArticles));
            }
          } catch (e) {
            console.error('Failed to mark article as read:', e);
          }
        }
        
        function isArticleRead(url) {
          const readArticles = getReadArticles();
          return readArticles.includes(url);
        }
        
        // Update post cards on list pages
        function updatePostCards() {
          const postCards = document.querySelectorAll('.post-card[data-article-url]');
          postCards.forEach(function(card) {
            const url = card.getAttribute('data-article-url');
            if (url) {
              if (isArticleRead(url)) {
                card.classList.add('read');
                card.classList.remove('unread');
              } else {
                card.classList.add('unread');
                card.classList.remove('read');
              }
            }
          });
        }
        
        // Mark current article as read (on article pages)
        function markCurrentArticleAsRead() {
          const isArticlePage = document.querySelector('.post-body');
          if (isArticlePage) {
            const currentPath = window.location.pathname;
            markArticleAsRead(currentPath);
          }
        }
        
        // Initialize function
        function init() {
          updatePostCards();
          markCurrentArticleAsRead();
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', init);
        
        // Handle back/forward navigation (bfcache)
        window.addEventListener('pageshow', function(event) {
          // If page is loaded from cache, update the cards
          if (event.persisted) {
            init();
          }
        });
      })();
    </script> </body> </html> 